/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("intl",function(e,t){var n={},r="yuiRootLang",i="yuiActiveLang",s=[];e.mix(e.namespace("Intl"),{_mod:function(e){return n[e]||(n[e]={}),n[e]},setLang:function(e,t){var n=this._mod(e),s=n[i],o=!!n[t];return o&&t!==s&&(n[i]=t,this.fire("intl:langChange",{module:e,prevVal:s,newVal:t===r?"":t})),o},getLang:function(e){var t=this._mod(e)[i];return t===r?"":t},add:function(e,t,n){t=t||r,this._mod(e)[t]=n,this.setLang(e,t)},get:function(t,n,r){var s=this._mod(t),o;return r=r||s[i],o=s[r]||{},n?o[n]:e.merge(o)},getAvailableLangs:function(t){var n=e.Env._loader,r=n&&n.moduleInfo[t],i=r&&r.lang;return i?i.concat():s}}),e.augment(e.Intl,e.EventTarget),e.Intl.publish("intl:langChange",{emitFacade:!0})},"3.11.0",{requires:["intl-base","event-custom"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("array-extras",function(e,t){var n=e.Array,r=e.Lang,i=Array.prototype;n.lastIndexOf=r._isNative(i.lastIndexOf)?function(e,t,n){return n||n===0?e.lastIndexOf(t,n):e.lastIndexOf(t)}:function(e,t,n){var r=e.length,i=r-1;if(n||n===0)i=Math.min(n<0?r+n:n,r);if(i>-1&&r>0)for(;i>-1;--i)if(i in e&&e[i]===t)return i;return-1},n.unique=function(e,t){var n=0,r=e.length,i=[],s,o,u,a;e:for(;n<r;n++){a=e[n];for(s=0,u=i.length;s<u;s++){o=i[s];if(t){if(t.call(e,a,o,n,e))continue e}else if(a===o)continue e}i.push(a)}return i},n.filter=r._isNative(i.filter)?function(e,t,n){return i.filter.call(e,t,n)}:function(e,t,n){var r=0,i=e.length,s=[],o;for(;r<i;++r)r in e&&(o=e[r],t.call(n,o,r,e)&&s.push(o));return s},n.reject=function(e,t,r){return n.filter(e,function(e,n,i){return!t.call(r,e,n,i)})},n.every=r._isNative(i.every)?function(e,t,n){return i.every.call(e,t,n)}:function(e,t,n){for(var r=0,i=e.length;r<i;++r)if(r in e&&!t.call(n,e[r],r,e))return!1;return!0},n.map=r._isNative(i.map)?function(e,t,n){return i.map.call(e,t,n)}:function(e,t,n){var r=0,s=e.length,o=i.concat.call(e);for(;r<s;++r)r in e&&(o[r]=t.call(n,e[r],r,e));return o},n.reduce=r._isNative(i.reduce)?function(e,t,n,r){return i.reduce.call(e,function(e,t,i,s){return n.call(r,e,t,i,s)},t)}:function(e,t,n,r){var i=0,s=e.length,o=t;for(;i<s;++i)i in e&&(o=n.call(r,o,e[i],i,e));return o},n.find=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e))return e[r];return null},n.grep=function(e,t){return n.filter(e,function(e,n){return t.test(e)})},n.partition=function(e,t,r){var i={matches:[],rejects:[]};return n.each(e,function(n,s){var u=t.call(r,n,s,e)?i.matches:i.rejects;u.push(n)}),i},n.zip=function(e,t){var r=[];return n.each(e,function(e,n){r.push([e,t[n]])}),r},n.flatten=function(e){var t=[],i,s,o;if(!e)return t;for(i=0,s=e.length;i<s;++i)o=e[i],r.isArray(o)?t.push.apply(t,n.flatten(o)):t.push(o);return t}},"3.11.0",{requires:["yui-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("escape",function(e,t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},r={html:function(e){return(e+"").replace(/[&<>"'\/`]/g,r._htmlReplacer)},regex:function(e){return(e+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")},_htmlReplacer:function(e){return n[e]}};r.regexp=r.regex,e.Escape=r},"3.11.0",{requires:["yui-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-base",function(e,t){function T(){}var n=e.Escape,r=e.Lang,i=e.Array,s=e.Object,o=r.isFunction,u=r.isString,a=r.trim,f=e.Attribute.INVALID_VALUE,l="_functionValidator",c="_sourceSuccess",h="allowBrowserAutocomplete",p="inputNode",d="query",v="queryDelimiter",m="requestTemplate",g="results",y="resultListLocator",b="value",w="valueChange",E="clear",S=d,x=g;T.prototype={initializer:function(){e.before(this._bindUIACBase,this,"bindUI"),e.before(this._syncUIACBase,this,"syncUI"),this.publish(E,{defaultFn:this._defClearFn}),this.publish(S,{defaultFn:this._defQueryFn}),this.publish(x,{defaultFn:this._defResultsFn})},destructor:function(){this._acBaseEvents&&this._acBaseEvents.detach(),delete this._acBaseEvents,delete this._cache,delete this._inputNode,delete this._rawSource},clearCache:function(){return this._cache&&(this._cache={}),this},sendRequest:function(t,n){var r,i=this.get("source");return t||t===""?this._set(d,t):t=this.get(d)||"",i&&(n||(n=this.get(m)),r=n?n.call(this,t):t,i.sendRequest({query:t,request:r,callback:{success:e.bind(this._onResponse,this,t)}})),this},_bindUIACBase:function(){var t=this.get(p),n=t&&t.tokenInput;n&&(t=n.get(p),this._set("tokenInput",n));if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._acBaseEvents=new e.EventHandle([t.on(w,this._onInputValueChange,this),t.on("blur",this._onInputBlur,this),this.after(h+"Change",this._syncBrowserAutocomplete),this.after("sourceTypeChange",this._afterSourceTypeChange),this.after(w,this._afterValueChange)])},_syncUIACBase:function(){this._syncBrowserAutocomplete(),this.set(b,this.get(p).get(b))},_createArraySource:function(e){var t=this;return{type:"array",sendRequest:function(n){t[c](e.concat(),n)}}},_createFunctionSource:function(e){var t=this;return{type:"function",sendRequest:function(n){function i(e){t[c](e||[],n)}var r;(r=e(n.query,i))&&i(r)}}},_createObjectSource:function(e){var t=this;return{type:"object",sendRequest:function(n){var r=n.query;t[c](s.owns(e,r)?e[r]:[],n)}}},_functionValidator:function(e){return e===null||o(e)},_getObjectValue:function(e,t){if(!e)return;for(var n=0,r=t.length;e&&n<r;n++)e=e[t[n]];return e},_parseResponse:function(e,t,r){var i={data:r,query:e,results:[]},s=this.get(y),o=[],u=t&&t.results,a,f,l,c,h,p,d,v,m,g,b;u&&s&&(u=s.call(this,u));if(u&&u.length){a=this.get("resultFilters"),b=this.get("resultTextLocator");for(p=0,d=u.length;p<d;++p)m=u[p],g=b?b.call(this,m):m.toString(),o.push({display:n.html(g),raw:m,text:g});for(p=0,d=a.length;p<d;++p){o=a[p].call(this,e,o.concat());if(!o)return;if(!o.length)break}if(o.length){l=this.get("resultFormatter"),h=this.get("resultHighlighter"),v=this.get("maxResults"),v&&v>0&&o.length>v&&(o.length=v);if(h){c=h.call(this,e,o.concat());if(!c)return;for(p=0,d=c.length;p<d;++p)m=o[p],m.highlighted=c[p],m.display=m.highlighted}if(l){f=l.call(this,e,o.concat());if(!f)return;for(p=0,d=f.length;p<d;++p)o[p].display=f[p]}}}i.results=o,this.fire(x,i)},_parseValue:function(e){var t=this.get(v);return t&&(e=e.split(t),e=e[e.length-1]),r.trimLeft(e)},_setEnableCache:function(e){this._cache=e?{}:null},_setLocator:function(e){if(this[l](e))return e;var t=this;return e=e.toString().split("."),function(n){return n&&t._getObjectValue(n,e)}},_setRequestTemplate:function(e){return this[l](e)?e:(e=e.toString(),function(t){return r.sub(e,{query:encodeURIComponent(t)})})},_setResultFilters:function(t){var n,s;return t===null?[]:(n=e.AutoCompleteFilters,s=function(e){return o(e)?e:u(e)&&n&&o(n[e])?n[e]:!1},r.isArray(t)?(t=i.map(t,s),i.every(t,function(e){return!!e})?t:f):(t=s(t),t?[t]:f))},_setResultHighlighter:function(t){var n;return this[l](t)?t:(n=e.AutoCompleteHighlighters,u(t)&&n&&o(n[t])?n[t]:f)},_setSource:function(t){var n=this.get("sourceType")||r.type(t),i;return t&&o(t.sendRequest)||t===null||n==="datasource"?(this._rawSource=t,t):(i=T.SOURCE_TYPES[n])?(this._rawSource=t,r.isString(i)?this[i](t):i(t)):(e.error("Unsupported source type '"+n+"'. Maybe autocomplete-sources isn't loaded?"),f)},_sourceSuccess:function(e,t){t.callback.success({data:e,response:{results:e}})},_syncBrowserAutocomplete:function(){var e=this.get(p);e.get("nodeName").toLowerCase()==="input"&&e.setAttribute("autocomplete",this.get(h)?"on":"off")},_updateValue:function(e){var t=this.get(v),n,s,o;e=r.trimLeft(e),t&&(n=a(t),o=i.map(a(this.get(b)).split(t),a),s=o.length,s>1&&(o[s-1]=e,e=o.join(n+" ")),e=e+n+" "),this.set(b,e)},_afterSourceTypeChange:function(e){this._rawSource&&this.set("source",this._rawSource)},_afterValueChange:function(e){var t=e.newVal,n=this,r=e.src===T.UI_SRC,i,s,o,u;r||n._inputNode.set(b,t),o=n.get("minQueryLength"),u=n._parseValue(t)||"",o>=0&&u.length>=o?r?(i=n.get("queryDelay"),s=function(){n.fire(S,{inputValue:t,query:u,src:e.src})},i?(clearTimeout(n._delay),n._delay=setTimeout(s,i)):s()):n._set(d,u):(clearTimeout(n._delay),n.fire(E,{prevVal:e.prevVal?n._parseValue(e.prevVal):null,src:e.src}))},_onInputBlur:function(e){var t=this.get(v),n,i,s;if(t&&!this.get("allowTrailingDelimiter")){t=r.trimRight(t),s=i=this._inputNode.get(b);if(t)while((i=r.trimRight(i))&&(n=i.length-t.length)&&i.lastIndexOf(t)===n)i=i.substring(0,n);else i=r.trimRight(i);i!==s&&this.set(b,i)}},_onInputValueChange:function(e){var t=e.newVal;t!==this.get(b)&&this.set(b,t,{src:T.UI_SRC})},_onResponse:function(e,t){e===(this.get(d)||"")&&this._parseResponse(e||"",t.response,t.data)},_defClearFn:function(){this._set(d,null),this._set(g,[])},_defQueryFn:function(e){this.sendRequest(e.query)},_defResultsFn:function(e){this._set(g,e[g])}},T.ATTRS={allowBrowserAutocomplete:{value:!1},allowTrailingDelimiter:{value:!1},enableCache:{lazyAdd:!1,setter:"_setEnableCache",value:!0},inputNode:{setter:e.one,writeOnce:"initOnly"},maxResults:{value:0},minQueryLength:{value:1},query:{readOnly:!0,value:null},queryDelay:{value:100},queryDelimiter:{value:null},requestTemplate:{setter:"_setRequestTemplate",value:null},resultFilters:{setter:"_setResultFilters",value:[]},resultFormatter
:{validator:l,value:null},resultHighlighter:{setter:"_setResultHighlighter",value:null},resultListLocator:{setter:"_setLocator",value:null},results:{readOnly:!0,value:[]},resultTextLocator:{setter:"_setLocator",value:null},source:{setter:"_setSource",value:null},sourceType:{value:null},tokenInput:{readOnly:!0},value:{value:""}},T._buildCfg={aggregates:["SOURCE_TYPES"],statics:["UI_SRC"]},T.SOURCE_TYPES={array:"_createArraySource","function":"_createFunctionSource",object:"_createObjectSource"},T.UI_SRC=e.Widget&&e.Widget.UI_SRC||"ui",e.AutoCompleteBase=T},"3.11.0",{optional:["autocomplete-sources"],requires:["array-extras","base-build","escape","event-valuechange","node-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-sources",function(e,t){var n=e.AutoCompleteBase,r=e.Lang,i="_sourceSuccess",s="maxResults",o="requestTemplate",u="resultListLocator";e.mix(n.prototype,{_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_beforeCreateObjectSource:function(t){return t instanceof e.Node&&t.get("nodeName").toLowerCase()==="select"?this._createSelectSource(t):e.JSONPRequest&&t instanceof e.JSONPRequest?this._createJSONPSource(t):this._createObjectSource(t)},_createIOSource:function(t){function a(n){var o=n.request;if(r._cache&&o in r._cache){r[i](r._cache[o],n);return}s&&s.isInProgress()&&s.abort(),s=e.io(r._getXHRUrl(t,n),{on:{success:function(t,s){var u;try{u=e.JSON.parse(s.responseText)}catch(a){e.error("JSON parse error",a)}u&&(r._cache&&(r._cache[o]=u),r[i](u,n))}}})}var n={type:"io"},r=this,s,o,u;return n.sendRequest=function(t){o=t;if(u)return;u=!0,e.use("io-base","json-parse",function(){n.sendRequest=a,a(o)})},n},_createJSONPSource:function(t){function u(e){var n=e.request,s=e.query;if(r._cache&&n in r._cache){r[i](r._cache[n],e);return}t._config.on.success=function(t){r._cache&&(r._cache[n]=t),r[i](t,e)},t.send(s)}var n={type:"jsonp"},r=this,s,o;return n.sendRequest=function(i){s=i;if(o)return;o=!0,e.use("jsonp",function(){t instanceof e.JSONPRequest||(t=new e.JSONPRequest(t,{format:e.bind(r._jsonpFormatter,r)})),n.sendRequest=u,u(s)})},n},_createSelectSource:function(e){var t=this;return{type:"select",sendRequest:function(n){var r=[];e.get("options").each(function(e){r.push({html:e.get("innerHTML"),index:e.get("index"),node:e,selected:e.get("selected"),text:e.get("text"),value:e.get("value")})}),t[i](r,n)}}},_createStringSource:function(e){return this._YQL_SOURCE_REGEX.test(e)?this._createYQLSource(e):e.indexOf("{callback}")!==-1?this._createJSONPSource(e):this._createIOSource(e)},_createYQLSource:function(t){function c(o){var u=o.query,a=n.get("yqlEnv"),f=n.get(s),c,h,p;p=r.sub(t,{maxResults:f>0?f:1e3,request:o.request,query:u});if(n._cache&&p in n._cache){n[i](n._cache[p],o);return}c=function(e){n._cache&&(n._cache[p]=e),n[i](e,o)},h={proto:n.get("yqlProtocol")},l?(l._callback=c,l._opts=h,l._params.q=p,a&&(l._params.env=a)):l=new e.YQLRequest(p,{on:{success:c},allowCache:!1},a?{env:a}:null,h),l.send()}var n=this,o={type:"yql"},a,f,l;return n.get(u)||n.set(u,n._defaultYQLLocator),o.sendRequest=function(t){a=t,f||(f=!0,e.use("yql",function(){o.sendRequest=c,c(a)}))},o},_defaultYQLLocator:function(t){var n=t&&t.query&&t.query.results,i;return n&&r.isObject(n)?(i=e.Object.values(n)||[],n=i.length===1?i[0]:i,r.isArray(n)||(n=[n])):n=[],n},_getXHRUrl:function(e,t){var n=this.get(s);return t.query!==t.request&&(e+=t.request),r.sub(e,{maxResults:n>0?n:1e3,query:encodeURIComponent(t.query)})},_jsonpFormatter:function(e,t,n){var i=this.get(s),u=this.get(o);return u&&(e+=u(n)),r.sub(e,{callback:t,maxResults:i>0?i:1e3,query:encodeURIComponent(n)})}}),e.mix(n.ATTRS,{yqlEnv:{value:null},yqlProtocol:{value:"http"}}),e.mix(n.SOURCE_TYPES,{io:"_createIOSource",jsonp:"_createJSONPSource",object:"_beforeCreateObjectSource",select:"_createSelectSource",string:"_createStringSource",yql:"_createYQLSource"},!0)},"3.11.0",{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("lang/autocomplete-list_en",function(e){e.Intl.add("autocomplete-list","en",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use up and down arrows to select."})},"3.11.0");
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("selector-css2",function(e,t){var n="parentNode",r="tagName",i="attributes",s="combinator",o="pseudos",u=e.Selector,a={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:!0,_isXML:function(){var t=e.config.doc.createElement("div").tagName!=="DIV";return t}(),shorthand:{"\\#(-?[_a-z0-9]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(t,n){return e.DOM.getAttribute(t,n)!==""},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(t){return e.DOM._children(t[n])[0]===t}},_bruteQuery:function(t,n,r){var i=[],s=[],o,a=u._tokenize(t),f=a[a.length-1],l=e.DOM._getDoc(n),c,h,p,d,v;if(f){h=f.id,p=f.className,d=f.tagName||"*";if(n.getElementsByTagName)h&&(n.all||n.nodeType===9||e.DOM.inDoc(n))?s=e.DOM.allById(h,n):p?s=n.getElementsByClassName(p):s=n.getElementsByTagName(d);else{o=[],c=n.firstChild,v=d==="*";while(c){while(c)c.tagName>"@"&&(v||c.tagName===d)&&s.push(c),o.push(c),c=c.firstChild;while(o.length>0&&!c)c=o.pop().nextSibling}}s.length&&(i=u._filterNodes(s,a,r))}return i},_filterNodes:function(t,n,r){var i=0,s,o=n.length,a=o-1,f=[],l=t[0],c=l,h=e.Selector.getters,p,d,v,m,g,y,b,w;for(i=0;c=l=t[i++];){a=o-1,m=null;e:while(c&&c.tagName){v=n[a],b=v.tests,s=b.length;if(s&&!g)while(w=b[--s]){p=w[1],h[w[0]]?y=h[w[0]](c,w[0]):(y=c[w[0]],w[0]==="tagName"&&!u._isXML&&(y=y.toUpperCase()),typeof y!="string"&&y!==undefined&&y.toString?y=y.toString():y===undefined&&c.getAttribute&&(y=c.getAttribute(w[0],2)));if(p==="="&&y!==w[2]||typeof p!="string"&&p.test&&!p.test(y)||!p.test&&typeof p=="function"&&!p(c,w[0],w[2])){if(c=c[m])while(c&&(!c.tagName||v.tagName&&v.tagName!==c.tagName))c=c[m];continue e}}a--;if(!!g||!(d=v.combinator)){f.push(l);if(r)return f;break}m=d.axis,c=c[m];while(c&&!c.tagName)c=c[m];d.direct&&(m=null)}}return l=c=null,f},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:!0},"+":{axis:"previousSibling",direct:!0}},_parsers:[{name:i,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(t,n){var r=t[2]||"",i=u.operators,s=t[3]?t[3].replace(/\\/g,""):"",o;if(t[1]==="id"&&r==="="||t[1]==="className"&&e.config.doc.documentElement.getElementsByClassName&&(r==="~="||r==="="))n.prefilter=t[1],t[3]=s,n[t[1]]=t[1]==="id"?t[3]:s;r in i&&(o=i[r],typeof o=="string"&&(t[3]=s.replace(u._reRegExpTokens,"\\$1"),o=new RegExp(o.replace("{val}",t[3]))),t[2]=o);if(!n.last||n.prefilter!==t[1])return t.slice(1)}},{name:r,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(e,t){var n=e[1];u._isXML||(n=n.toUpperCase()),t.tagName=n;if(n!=="*"&&(!t.last||t.prefilter))return[r,"=",n];t.prefilter||(t.prefilter="tagName")}},{name:s,re:/^\s*([>+~]|\s)\s*/,fn:function(e,t){}},{name:o,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(e,t){var n=u[o][e[1]];return n?(e[2]&&(e[2]=e[2].replace(/\\/g,"")),[e[2],n]):!1}}],_getToken:function(e){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]}},_tokenize:function(t){t=t||"",t=u._parseSelector(e.Lang.trim(t));var n=u._getToken(),r=t,i=[],o=!1,a,f,l,c;e:do{o=!1;for(l=0;c=u._parsers[l++];)if(a=c.re.exec(t)){c.name!==s&&(n.selector=t),t=t.replace(a[0],""),t.length||(n.last=!0),u._attrFilters[a[1]]&&(a[1]=u._attrFilters[a[1]]),f=c.fn(a,n);if(f===!1){o=!1;break e}f&&n.tests.push(f);if(!t.length||c.name===s)i.push(n),n=u._getToken(n),c.name===s&&(n.combinator=e.Selector.combinators[a[1]]);o=!0}}while(o&&t.length);if(!o||t.length)i=[];return i},_replaceMarkers:function(e){return e=e.replace(/\[/g,"\ue003"),e=e.replace(/\]/g,"\ue004"),e=e.replace(/\(/g,"\ue005"),e=e.replace(/\)/g,"\ue006"),e},_replaceShorthand:function(t){var n=e.Selector.shorthand,r;for(r in n)n.hasOwnProperty(r)&&(t=t.replace(new RegExp(r,"gi"),n[r]));return t},_parseSelector:function(t){var n=e.Selector._replaceSelector(t),t=n.selector;return t=e.Selector._replaceShorthand(t),t=e.Selector._restore("attr",t,n.attrs),t=e.Selector._restore("pseudo",t,n.pseudos),t=e.Selector._replaceMarkers(t),t=e.Selector._restore("esc",t,n.esc),t},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(t,n){return e.DOM.getAttribute(t,n)},id:function(t,n){return e.DOM.getId(t)}}};e.mix(e.Selector,a,!0),e.Selector.getters.src=e.Selector.getters.rel=e.Selector.getters.href,e.Selector.useNative&&e.config.doc.querySelector&&(e.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]")},"3.11.0",{requires:["selector-native"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("selector-css3",function(e,t){e.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/,e.Selector._getNth=function(t,n,r,i){e.Selector._reNth.test(n);var s=parseInt(RegExp.$1,10),o=RegExp.$2,u=RegExp.$3,a=parseInt(RegExp.$4,10)||0,f=[],l=e.DOM._children(t.parentNode,r),c;u?(s=2,c="+",o="n",a=u==="odd"?1:0):isNaN(s)&&(s=o?1:0);if(s===0)return i&&(a=l.length-a+1),l[a-1]===t?!0:!1;s<0&&(i=!!i,s=Math.abs(s));if(!i){for(var h=a-1,p=l.length;h<p;h+=s)if(h>=0&&l[h]===t)return!0}else for(var h=l.length-a,p=l.length;h>=0;h-=s)if(h<p&&l[h]===t)return!0;return!1},e.mix(e.Selector.pseudos,{root:function(e){return e===e.ownerDocument.documentElement},"nth-child":function(t,n){return e.Selector._getNth(t,n)},"nth-last-child":function(t,n){return e.Selector._getNth(t,n,null,!0)},"nth-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName)},"nth-last-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName,!0)},"last-child":function(t){var n=e.DOM._children(t.parentNode);return n[n.length-1]===t},"first-of-type":function(t){return e.DOM._children(t.parentNode,t.tagName)[0]===t},"last-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n[n.length-1]===t},"only-child":function(t){var n=e.DOM._children(t.parentNode);return n.length===1&&n[0]===t},"only-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n.length===1&&n[0]===t},empty:function(e){return e.childNodes.length===0},not:function(t,n){return!e.Selector.test(t,n)},contains:function(e,t){var n=e.innerText||e.textContent||"";return n.indexOf(t)>-1},checked:function(e){return e.checked===!0||e.selected===!0},enabled:function(e){return e.disabled!==undefined&&!e.disabled},disabled:function(e){return e.disabled}}),e.mix(e.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"}),e.Selector.combinators["~"]={axis:"previousSibling"}},"3.11.0",{requires:["selector-native","selector-css2"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("shim-plugin",function(e,t){function n(e){this.init(e)}n.CLASS_NAME="yui-node-shim",n.TEMPLATE='<iframe class="'+n.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"'+'src="javascript:false" tabindex="-1" role="presentation"'+'style="position:absolute; z-index:-1;"></iframe>',n.prototype={init:function(e){this._host=e.host,this.initEvents(),this.insert(),this.sync()},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this)},getShim:function(){return this._shim||(this._shim=e.Node.create(n.TEMPLATE,this._host.get("ownerDocument")))},insert:function(){var e=this._host;this._shim=e.insertBefore(this.getShim(),e.get("firstChild"))},sync:function(){var e=this._shim,t=this._host;e&&e.setAttrs({width:t.getStyle("width"),height:t.getStyle("height")})},destroy:function(){var e=this._shim;e&&e.remove(!0),this._resizeHandle.detach()}},n.NAME="Shim",n.NS="shim",e.namespace("Plugin"),e.Plugin.Shim=n},"3.11.0",{requires:["node-style","node-pluginhost"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-list",function(e,t){var n=e.Lang,r=e.Node,i=e.Array,s=e.UA.ie&&e.UA.ie<7,o=9,u="_CLASS_ITEM",a="_CLASS_ITEM_ACTIVE",f="_CLASS_ITEM_HOVER",l="_SELECTOR_ITEM",c="activeItem",h="alwaysShowList",p="circular",d="hoveredItem",v="id",m="item",g="list",y="result",b="results",w="visible",E="width",S="select",x=e.Base.create("autocompleteList",e.Widget,[e.AutoCompleteBase,e.WidgetPosition,e.WidgetPositionAlign],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",UI_EVENTS:function(){var t=e.merge(e.Node.DOM_EVENTS);return delete t.valuechange,delete t.valueChange,t}(),initializer:function(){var t=this.get("inputNode");if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._listEvents=[],this.DEF_PARENT_NODE=t.get("parentNode"),this[u]=this.getClassName(m),this[a]=this.getClassName(m,"active"),this[f]=this.getClassName(m,"hover"),this[l]="."+this[u],this.publish(S,{defaultFn:this._defSelectFn})},destructor:function(){while(this._listEvents.length)this._listEvents.pop().detach();this._ariaNode&&this._ariaNode.remove().destroy(!0)},bindUI:function(){this._bindInput(),this._bindList()},renderUI:function(){var t=this._createAriaNode(),n=this.get("boundingBox"),r=this.get("contentBox"),i=this._inputNode,o=this._createListNode(),u=i.get("parentNode");i.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":g,"aria-expanded":!1,"aria-owns":o.get("id")}),u.append(t),s&&n.plug(e.Plugin.Shim),this._ariaNode=t,this._boundingBox=n,this._contentBox=r,this._listNode=o,this._parentNode=u},syncUI:function(){this._syncResults(),this._syncVisibility()},hide:function(){return this.get(h)?this:this.set(w,!1)},selectItem:function(e,t){if(e){if(!e.hasClass(this[u]))return this}else{e=this.get(c);if(!e)return this}return this.fire(S,{itemNode:e,originEvent:t||null,result:e.getData(y)}),this},_activateNextItem:function(){var e=this.get(c),t;return e?t=e.next(this[l])||(this.get(p)?null:e):t=this._getFirstItemNode(),this.set(c,t),this},_activatePrevItem:function(){var e=this.get(c),t=e?e.previous(this[l]):this.get(p)&&this._getLastItemNode();return this.set(c,t||null),this},_add:function(t){var r=[];return i.each(n.isArray(t)?t:[t],function(e){r.push(this._createItemNode(e).setData(y,e))},this),r=e.all(r),this._listNode.append(r.toFrag()),r},_ariaSay:function(e,t){var r=this.get("strings."+e);this._ariaNode.set("text",t?n.sub(r,t):r)},_bindInput:function(){var e=this._inputNode,t,n,r;this.get("align")===null&&(r=this.get("tokenInput"),t=r&&r.get("boundingBox")||e,this.set("align",{node:t,points:["tl","bl"]}),!this.get(E)&&(n=t.get("offsetWidth"))&&this.set(E,n)),this._listEvents=this._listEvents.concat([e.after("blur",this._afterListInputBlur,this),e.after("focus",this._afterListInputFocus,this)])},_bindList:function(){this._listEvents=this._listEvents.concat([e.one("doc").after("click",this._afterDocClick,this),e.one("win").after("windowresize",this._syncPosition,this),this.after({mouseover:this._afterMouseOver,mouseout:this._afterMouseOut,activeItemChange:this._afterActiveItemChange,alwaysShowListChange:this._afterAlwaysShowListChange,hoveredItemChange:this._afterHoveredItemChange,resultsChange:this._afterResultsChange,visibleChange:this._afterVisibleChange}),this._listNode.delegate("click",this._onItemClick,this[l],this)])},_clear:function(){this.set(c,null),this._set(d,null),this._listNode.get("children").remove(!0)},_createAriaNode:function(){var e=r.create(this.ARIA_TEMPLATE);return e.addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",role:"status"})},_createItemNode:function(t){var n=r.create(this.ITEM_TEMPLATE);return n.addClass(this[u]).setAttrs({id:e.stamp(n),role:"option"}).setAttribute("data-text",t.text).append(t.display)},_createListNode:function(){var t=this.get("listNode")||r.create(this.LIST_TEMPLATE);return t.addClass(this.getClassName(g)).setAttrs({id:e.stamp(t),role:"listbox"}),this._set("listNode",t),this.get("contentBox").append(t),t},_getFirstItemNode:function(){return this._listNode.one(this[l])},_getLastItemNode:function(){return this._listNode.one(this[l]+":last-child")},_syncPosition:function(){this._syncUIPosAlign(),this._syncShim()},_syncResults:function(e){e||(e=this.get(b)),this._clear(),e.length&&(this._add(e),this._ariaSay("items_available")),this._syncPosition(),this.get("activateFirstItem")&&!this.get(c)&&this.set(c,this._getFirstItemNode())},_syncShim:s?function(){var e=this._boundingBox.shim;e&&e.sync()}:function(){},_syncVisibility:function(t){this.get(h)&&(t=!0,this.set(w,t)),typeof t=="undefined"&&(t=this.get(w)),this._inputNode.set("aria-expanded",t),this._boundingBox.set("aria-hidden",!t),t?this._syncPosition():(this.set(c,null),this._set(d,null),this._boundingBox.get("offsetWidth")),e.UA.ie===7&&e.one("body").addClass("yui3-ie7-sucks").removeClass("yui3-ie7-sucks")},_afterActiveItemChange:function(t){var n=this._inputNode,r=t.newVal,i=t.prevVal,s;i&&i._node&&i.removeClass(this[a]),r?(r.addClass(this[a]),n.set("aria-activedescendant",r.get(v))):n.removeAttribute("aria-activedescendant"),this.get("scrollIntoView")&&(s=r||n,(!s.inRegion(e.DOM.viewportRegion(),!0)||!s.inRegion(this._contentBox,!0))&&s.scrollIntoView())},_afterAlwaysShowListChange:function(e){this.set(w,e.newVal||this.get(b).length>0)},_afterDocClick:function(e){var t=this._boundingBox,n=e.target;n!==this._inputNode&&n!==t&&n.ancestor("#"+t.get("id"),!0)&&this.hide()},_afterHoveredItemChange:function(e){var t=e.newVal,n=e.prevVal;n&&n.removeClass(this[f]),t&&t.addClass(this[f])},_afterListInputBlur:function(){this._listInputFocused=!1,this.get(w)&&!this._mouseOverList&&(this._lastInputKey!==o||!this.get("tabSelect")||!this.get(c))&&this.hide()},_afterListInputFocus:function(){this._listInputFocused=!0},_afterMouseOver:function(e){var t=e.domEvent.target.ancestor(this[l],!0);this._mouseOverList=!0,t&&this._set(d,t)},_afterMouseOut:function(){this._mouseOverList=!1,this._set(d,null)},_afterResultsChange:function(e){this._syncResults(e.newVal
),this.get(h)||this.set(w,!!e.newVal.length)},_afterVisibleChange:function(e){this._syncVisibility(!!e.newVal)},_onItemClick:function(e){var t=e.currentTarget;this.set(c,t),this.selectItem(t,e)},_defSelectFn:function(e){var t=e.result.text;this._inputNode.focus(),this._updateValue(t),this._ariaSay("item_selected",{item:t}),this.hide()}},{ATTRS:{activateFirstItem:{value:!1},activeItem:{setter:e.one,value:null},alwaysShowList:{value:!1},circular:{value:!0},hoveredItem:{readOnly:!0,value:null},listNode:{writeOnce:"initOnly",value:null},scrollIntoView:{value:!1},strings:{valueFn:function(){return e.Intl.get("autocomplete-list")}},tabSelect:{value:!0},visible:{value:!1}},CSS_PREFIX:e.ClassNameManager.getClassName("aclist")});e.AutoCompleteList=x,e.AutoComplete=x},"3.11.0",{lang:["en","es","hu","it"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:!0});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-list-keys",function(e,t){function u(){e.before(this._bindKeys,this,"bindUI"),this._initKeys()}var n=40,r=13,i=27,s=9,o=38;u.prototype={_initKeys:function(){var e={},t={};e[n]=this._keyDown,t[r]=this._keyEnter,t[i]=this._keyEsc,t[s]=this._keyTab,t[o]=this._keyUp,this._keys=e,this._keysVisible=t},destructor:function(){this._unbindKeys()},_bindKeys:function(){this._keyEvents=this._inputNode.on("keydown",this._onInputKey,this)},_unbindKeys:function(){this._keyEvents&&this._keyEvents.detach(),this._keyEvents=null},_keyDown:function(){this.get("visible")?this._activateNextItem():this.show()},_keyEnter:function(e){var t=this.get("activeItem");if(!t)return!1;this.selectItem(t,e)},_keyEsc:function(){this.hide()},_keyTab:function(e){var t;if(this.get("tabSelect")){t=this.get("activeItem");if(t)return this.selectItem(t,e),!0}return!1},_keyUp:function(){this._activatePrevItem()},_onInputKey:function(e){var t,n=e.keyCode;this._lastInputKey=n,this.get("results").length&&(t=this._keys[n],!t&&this.get("visible")&&(t=this._keysVisible[n]),t&&t.call(this,e)!==!1&&e.preventDefault())}},e.Base.mix(e.AutoCompleteList,[u])},"3.11.0",{requires:["autocomplete-list","base-build"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-plugin",function(e,t){function r(e){e.inputNode=e.host,!e.render&&e.render!==!1&&(e.render=!0),r.superclass.constructor.apply(this,arguments)}var n=e.Plugin;e.extend(r,e.AutoCompleteList,{},{NAME:"autocompleteListPlugin",NS:"ac",CSS_PREFIX:e.ClassNameManager.getClassName("aclist")}),n.AutoComplete=r,n.AutoCompleteList=r},"3.11.0",{requires:["autocomplete-list","node-pluginhost"]});
YUI.add("bo-selecta-transjax",function(a){a.transjax.add("bo-selecta",{me:"me",loading:"Loading...",uber_contact_list_view_profile:"View Profile",uber_contact_list_friend_and_family:"Friend &amp; Family",uber_contact_list_friend:"Friend",uber_contact_list_family:"Family",uber_contact_list_contact:"Contact",uber_contact_list_removed:"Removed",uber_contact_list_edit:"Edit",uber_contact_list_default_text:"screen name, real name, or email",uber_contact_list_max_results:'Showing [results_shown] of [total_results] results. <a href="[url]">See all...</a>',uber_contact_list_no_realname:"No real name given",bo_selecta_no_contacts_found:"No contacts found.",bo_selecta_no_members_found:"No members found.",bo_selecta_global_search_msg:"Search through all Flickr members?",bo_selecta_global_search_msg_2:"Search all Flickr members?",too_many_results:"We found too many results to display here. Please type a few more characters."})},"0.0.1",{requires:["transjax-base"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-local",function(e,t){var n=e.Lang,r=function(){r.superclass.constructor.apply(this,arguments)};e.mix(r,{NAME:"dataSourceLocal",ATTRS:{source:{value:null}},_tId:0,transactions:{},issueCallback:function(e,t){var n=e.on||e.callback,r=n&&n.success,i=e.details[0];i.error=e.error||e.response.error,i.error&&(t.fire("error",i),r=n&&n.failure),r&&r(i)}}),e.extend(r,e.Base,{initializer:function(e){this._initEvents()},_initEvents:function(){this.publish("request",{defaultFn:e.bind("_defRequestFn",this),queuable:!0}),this.publish("data",{defaultFn:e.bind("_defDataFn",this),queuable:!0}),this.publish("response",{defaultFn:e.bind("_defResponseFn",this),queuable:!0})},_defRequestFn:function(e){var t=this.get("source"),r=e.details[0];n.isUndefined(t)&&(r.error=new Error("Local source undefined")),r.data=t,this.fire("data",r)},_defDataFn:function(e){var t=e.data,r=e.meta,i={results:n.isArray(t)?t:[t],meta:r?r:{}},s=e.details[0];s.response=i,this.fire("response",s)},_defResponseFn:function(e){r.issueCallback(e,this)},sendRequest:function(e){var t=r._tId++,n;return e=e||{},n=e.on||e.callback,this.fire("request",{tId:t,request:e.request,on:n,callback:n,cfg:e.cfg||{}}),t}}),e.namespace("DataSource").Local=r},"3.11.0",{requires:["base"]});
YUI.add("bo-selecta-global-search-datasource",function(Y){Y.BoSelectaGlobalSearchDataSource=function(attr){Y.BoSelectaGlobalSearchDataSource.superclass.constructor.apply(this,arguments),this.request=null,this.selector=attr.selector},Y.extend(Y.BoSelectaGlobalSearchDataSource,Y.DataSource.Local,{_defRequestFn:function(e){var query,that=this;return this.request&&this.request.readyState<4&&this.request.abort(),this.selector.loadingBox.setStyle("display","block"),query=decodeURIComponent(e.request),this.request=Y.flickrAPI.callMethod("flickr.people.search",{username:query},{success:function(response,raw_response){var rsp=response.data;response.params;if(that.selector.searchingGlobally){for(var person,tempPerson,matches=[],people=rsp.people.person,n=0,len=people.length;n<len;n++)(person={n:(tempPerson=people[n]).nsid,e:tempPerson.email,u:tempPerson.username,r:tempPerson.realname,a:tempPerson.path_alias,d:tempPerson.friend,y:tempPerson.family,s:tempPerson.iconserver,f:tempPerson.iconfarm})[0]=tempPerson.name,person.i=person.f&&0!==person.f&&person.s&&0!==person.s?"http://farm"+person.f+".static"+(Y.config.flickr.dev?"-dev":"")+".flickr.com/"+person.s+"/buddyicons/"+person.n+".jpg":"http://www.flickr.com/images/buddyicon.gif",matches.push(person);if(0===matches.length&&(that.selector.hideNoContactMessage||matches.push({message:Y.transjax.get("bo-selecta","bo_selecta_no_members_found"),disableActive:!0}),0<that.selector.zeroResultsMessages.length)){var msg;for(n=0,len=that.selector.zeroResultsMessages.length;n<len;n++)(msg=that.selector.zeroResultsMessages[n]).validator(that.selector)&&matches.push(msg)}that.selector.loadingBox.setStyle("display","none"),that.fire("data",Y.mix({data:matches},e))}else that.selector.loadingBox.setStyle("display","none")},failure:function(response,raw_response){response.data,response.params;var matches=[];matches.push({message:Y.transjax.get("bo-selecta","too_many_results"),totalResultsMessage:!0}),that.selector.loadingBox.setStyle("display","none"),that.fire("data",Y.mix({data:matches},e))}}),e.tId}})},"0.0.1",{requires:["bo-selecta-transjax","datasource-local","gallery-flickr-api"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-function",function(e,t){var n=e.Lang,r=function(){r.superclass.constructor.apply(this,arguments)};e.mix(r,{NAME:"dataSourceFunction",ATTRS:{source:{validator:n.isFunction}}}),e.extend(r,e.DataSource.Local,{_defRequestFn:function(e){var t=this.get("source"),n=e.details[0];if(t)try{n.data=t(e.request,this,e)}catch(r){n.error=r}else n.error=new Error("Function data failure");return this.fire("data",n),e.tId}}),e.DataSource.Function=r},"3.11.0",{requires:["datasource-local"]});
YUI.add("image-fader",function(Y){Y.imageFader={attach:function(nodes,target_opacity){target_opacity=Y.Lang.isNumber(target_opacity)?target_opacity:1,Y.Lang.isString(nodes)&&(nodes=Y.all(nodes)),nodes.on("load",function(e){e.target.inDoc()&&new Y.Anim({node:e.target,to:{opacity:target_opacity},duration:.2}).run()})}}},"0.0.1",{requires:["node","anim"]});YUI.add("string-filters",function(Y){function wordwrap(str,width,break_str,cut){if(break_str=break_str||"\n",width=width||75,cut=cut||!1,!str)return str;var regex=".{1,"+width+"}(\\s|$)"+(cut?"|.{"+width+"}|.+$":"|\\S+?(\\s|$)");return str.match(new RegExp(regex,"g")).join(break_str)}function nibble_to_hex(nibble){return"0123456789ABCDEF".charAt(nibble)}Y.StringFilters={nl2br:function(str){return str.replace(/\n/g,"<br>")},nl2p:function(str){return str=(str=(str=(str=(str=(str=(str="<p>"+(str=Y.Lang.trim(str))+"</p>").replace(/<blockquote>(.*?)<\/blockquote>/g,"</p><blockquote><p>$1</p></blockquote><p>")).replace(/(?:\r?\n){2,}/g,"</p><p>")).replace(/(?:\r?\n){1}/g,"<br>")).replace(/<p><\/p>/g,"")).replace(/<br><\/p>/g,"</p>")).replace(/<p><br>/g,"<p>")},escape_entities:function(str,escape_all){var entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",402:"fnof",710:"circ",732:"tilde",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8226:"bull",8230:"hellip",8240:"permil",8242:"prime",8243:"Prime",8249:"lsaquo",8254:"oline",8260:"frasl",8250:"rsaquo",8364:"euro",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams"};return escape_all?str.replace(/[\u00A0-\u2666<>\&]/g,function(c){return"&"+(entityTable[c.charCodeAt(0)]?entityTable[c.charCodeAt(0)]:"#"+c.charCodeAt(0))+";"}):str=(str=(str=(str=str.replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")},unescape_entities:function unescape_entities(str,unescape_all){if(!str.match(/&/))return str;if(unescape_all){var div=document.createElement("div");return div.innerHTML=str,0===div.childNodes.length?"":null===div.childNodes[0].nodeValue?unescape_entities(str,!1):div.childNodes[0].nodeValue}return str=(str=(str=(str=str.replace(/&amp;/g,"&")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")},linkify:function(str,onclick,space){if(onclick=(onclick=onclick||"").replace(/\s/g,space=space||" "),-1<str.indexOf("http://")){for(var strA=str.split("\n"),y=0;y<strA.length;y++){for(var substrA=strA[y].split(" "),t=0;t<substrA.length;t++){var openParen="";if("("===substrA[t].substr(0,1)&&(substrA[t]=substrA[t].replace(/\(/g,""),openParen="("),"http://"===substrA[t].substr(0,7)){var url=substrA[t],paren="";")"===url.substr(url.length-1,1)&&(url=url.substr(0,url.length-1),paren=")");var period="";"."===url.substr(url.length-1,1)&&(url=url.substr(0,url.length-1),period="."),substrA[t]=('<a href="'+url+'" rel="nofollow" onclick="'+onclick+'">'+url+"</a>"+paren+period).replace(/\s/g,space)}substrA[t]=openParen+substrA[t]}strA[y]=substrA.join(" ")}str=strA.join("\n")}return str},possess:function(name_thing){return Y.config.flickr.lang&&"en-us"!==Y.config.flickr.lang?name_thing:"s"===name_thing.substr(name_thing.length-1,1).toLowerCase()?name_thing+"'":name_thing+"'s"},wordwrap:wordwrap,zero_width_wordwrap:function(str,width,break_str,cut){!1!==cut&&(cut=!0);var fragments=wordwrap(str,width=width||80,break_str=break_str||'<span class="breaking-non-space"> </span>',cut).split(break_str);if(fragments.length<=1)return str;for(var final_data="",n=0,len=fragments.length,data_pos=0;n<len-1;n++)" "===str[data_pos+=fragments[n].length]?(final_data+=fragments[n]+" ",data_pos++):final_data+=fragments[n]+break_str;return final_data+=fragments[fragments.length-1]},escape_utf8:function(data){if(""===data||null==data)return"";data=data.toString();for(var buffer="",i=0;i<data.length;i++){var c=data.charCodeAt(i),bs=[];if(65536<c?(bs[0]=240|(1835008&c)>>>18,bs[1]=128|(258048&c)>>>12,bs[2]=128|(4032&c)>>>6,bs[3]=128|63&c):2048<c?(bs[0]=224|(61440&c)>>>12,bs[1]=128|(4032&c)>>>6,bs[2]=128|63&c):128<c?(bs[0]=192|(1984&c)>>>6,bs[1]=128|63&c):bs[0]=c,1<bs.length)for(var j=0;j<bs.length;j++){var b=bs[j];buffer+="%"+(nibble_to_hex((240&b)>>>4)+nibble_to_hex(15&b))}else encodeURIComponent&&"function"==typeof encodeURIComponent?buffer+=encodeURIComponent(String.fromCharCode(bs[0])):buffer+=String.fromCharCode(bs[0])}return buffer},escape_utf8_bytes:function(data){if(""===data||null==data)return"";data=data.toString();for(var buffer="",i=0;i<data.length;i++){var c=data.charCodeAt(i),bs=[];if(65536<c?(bs[0]=240|(1835008&c)>>>18,bs[1]=128|(258048&c)>>>12,bs[2]=128|(4032&c)>>>6,bs[3]=128|63&c):2048<c?(bs[0]=224|(61440&c)>>>12,bs[1]=128|(4032&c)>>>6,bs[2]=128|63&c):128<c?(bs[0]=192|(1984&c)>>>6,bs[1]=128|63&c):bs[0]=c,1<bs.length)for(var j=0;j<bs.length;j++)buffer+=String.fromCharCode(bs[j]);else buffer+=String.fromCharCode(bs[0])}return buffer},strip_tags:function(str){return str.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},truncate:function(str,len,suffix){return len=len||30,suffix=Y.Lang.isString(suffix)?suffix:"...",str.length>len&&(str=str.slice(0,len-suffix.length)+suffix),str},substitute_equivalent_chars:function(str){var variants,count,i;for(count=(variants=["(?:ae|æ)","(?:oe|œ)","(?:ss|ß)","(?:th|Þ)","[aáàâäãåấ]","[eéèêëě3]","[iíìîïǐ]","[oóòôöõǒỏơớờởỡợø]","[uúùûüǔǚưứừửữự]","[yýÿ]","[cçč]","[dÐ]","[fƒ]","[gǧ]","[hȟ]","[jǰ]","[kǩ]","[lľ]","[nñň]","[rř®]","[sšṧ]","[tť]","[zž]"]).length,i=0;i<count;i++)str=str.replace(new RegExp(variants[i],"gi"),variants[i]);return str},is_email_address:function(str){return/^[a-z_0-9\.\-\+]+@[a-z_0-9\.\-\+]+\.[a-z]/i.test(str)},soundex:function(str){if(!Y.Lang.isString(str)||0===str.length)return"";var letters=str.substring(1,str.length).toLowerCase().split(""),codes={a:"",e:"",i:"",o:"",u:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,d:3,t:3,l:4,m:5,n:5,r:6};return letters=Y.Array.filter(letters,function(item,index,arry){return item!==arry[index+1]}),letters=Y.Array.map(letters,function(item){return codes[item]}),(str.charAt(0).toUpperCase()+letters.join("")+"000").slice(0,4)},isEqualSoundex:function(a,b){var n=3;if(!Y.Lang.isString(a)||!Y.Lang.isString(b)||a.length<4||b.length<4)return!1;if(a===b)return!0;for(;"0"===a.charAt(n)||"0"===b.charAt(n);){if((a=a.slice(0,n))===(b=b.slice(0,n)))return 4-n;n--}return!1}}},"0.0.1",{requires:F.config.modules["string-filters"].requires||[],optional:F.config.modules["string-filters"].optional||[]});YUI.add("bo-selecta-3",function(Y){function highlightTerm(str,regex){return str?(str=Y.StringFilters.unescape_entities(str,!0),-1===(start_position=regex?str.search(regex):-1)?Y.BoSelecta3.sanitizeString(str):(end_position=start_position+str.match(regex)[0].length,Y.StringFilters.escape_entities(str.substring(0,start_position),!0)+'<span class="term-highlight">'+Y.StringFilters.escape_entities(str.substring(start_position,end_position),!0)+"</span>"+Y.StringFilters.escape_entities(str.substring(end_position,str.length),!0))):str;var start_position,end_position}Y.BoSelecta3=function(inputField,attr){attr=attr||{},this.showUsername=attr.showUsername||!0,this.showSubtitle=attr.showSubtitle||!1,this.showIcon=attr.showIcon||!1,this.showRelationship=attr.showRelationship||!1,this.usePersonMenu=attr.usePersonMenu||!1,this.linkUsernameToPhotostream=attr.linkUsernameToPhotostream||!1,this.linkSubtitle=attr.linkSubtitle||!1,this.showEditRelationshipLink=attr.showEditRelationshipLink||!1,this.searchOnUsername=attr.searchOnUsername||!0,this.searchOnRealname=attr.searchOnRealname||!1,this.searchOnEmail=attr.searchOnEmail||!1,this.searchOnPathAlias=attr.searchOnPathAlias||!1,this.searchUsingSoundex=attr.searchUsingSoundex||!1,this.includeUser=attr.includeUser||!1,this.includeAddressBook=attr.includeAddressBook||!1,this.maxResultsDisplayed=attr.maxResultsDisplayed||5,this.globalMaxResultsDisplayed=attr.globalMaxResultsDisplayed||10,this.showTotalResults=attr.showTotalResults||!1,this.disableMouseHover=attr.disableMouseHover||!1,this.selectFirstItem=attr.selectFirstItem||!1,this.hideNoContactMessage=attr.hideNoContactMessage||!1,this.zeroResultsMessages=attr.zeroResultsMessages||[],this.preloadText=attr.preloadText||"",this.defaultText=attr.defaultText||"",this.loadingText=attr.loadingText||Y.transjax.get("bo-selecta","loading"),this.focusOnFetch=attr.focusOnFetch||!1,this.fetchDataImmediately=attr.fetchDataImmediately||!1,this.allowNoContacts=attr.allowNoContacts||!1,this.allowFormSubmit=attr.allowFormSubmit||!1,this.respectCanTagFlag=attr.respectCanTagFlag||!1,this.apiURL=attr.apiURL||Y.config.flickr.people.api_url,this.enableGlobalSearch=attr.enableGlobalSearch||!1,this.defaultContainerWidth=attr.defaultContainerWidth||250,this.minListWidth=attr.minListWidth||228,this.maxListWidth=attr.maxListWidth||500,this.loadTransparently=attr.loadTransparently||!1,this.includeUser&&(this.meString=Y.transjax.get("bo-selecta","me").toLowerCase()),this.contacts=null,this.skipList={},this.shadowInit=!1,this.fetchingData=!1,this.haveTriedToFetchData=!1,this.searchingGlobally=!1,this._initHTML(inputField),this._initAutoComplete(),this.fetchDataImmediately&&this.fetchData()},Y.augment(Y.BoSelecta3,Y.EventTarget),Y.BoSelecta3.prototype._initHTML=function(inputField){Y.Lang.isString(inputField)&&(inputField=Y.one(inputField)),!inputField instanceof Y.Node&&(inputField=Y.one("#BoSelecta_input")),this.inputField=inputField,this.container=this.inputField.get("parentNode"),this.container.all(".no-js-fallback").setStyle("display","none"),this.container.addClass("bo-selecta-3"),this.container.addClass("yui-skin-sam"),this.containerId=Y.stamp(this.container),this.inputField.addClass("input");var loadingEls=this.container.all(".loading");0<loadingEls.size()?(this.loadingBox=loadingEls.item(0),this.loadingBox.setStyle("display",this.fetchDataImmediately&&!this.loadTransparently?"block":"none")):(this.loadingBox=Y.Node.create('<div class="loading">'+this.loadingText+"</div>"),this.loadingBox.setStyle("display",this.fetchDataImmediately&&!this.loadTransparently?"block":"none"),this.container.append(this.loadingBox)),this.inputField.set("disabled",!1),this.inputField.set("value",this.preloadText),this.inputField.addClass("grey"),this.inputField.on("focus",this.clearDefaultText,this,!0),this.inputField.on("blur",function(e){""===this.inputField.get("value")&&this.restoreDefaultText()},this,!0),this.allowFormSubmit||(this.form=this.container.ancestor("form",!0),this.form&&this.form.on("submit",function(e){e.halt()})),this.maxInputWidth=parseInt(this.container.getStyle("width"),10)||this.defaultContainerWidth,this.defaultInputWidth=parseInt(this.inputField.getStyle("width"),10)||this.defaultContainerWidth},Y.BoSelecta3.prototype._initAutoComplete=function(){var that=this;this.contactsCacheDataSource=new Y.DataSource.Function({source:function(q){return that._searchContacts(q)}}),this.globalSearchDataSource=new Y.BoSelectaGlobalSearchDataSource({selector:this}),this.autoComp=new Y.AutoComplete({inputNode:this.inputField,source:this.contactsCacheDataSource,resultTextLocator:function(result){return result&&result.u?Y.BoSelecta3.sanitizeString(result.u):""},resultFormatter:function(query,results,highlighted){return that._formatResult(query,results,highlighted)},activateFirstItem:this.selectFirstItem,queryDelay:0,render:!0}),this.autoComp.on("select",this._onItemSelectEvent,this,!0),this.autoComp.on("query",this._handleQueryChange,this,!0),this.autoComp.after("query",this._resizeListToFit,this,!0),this.inputField.on("keydown",this._onInputFieldKeyDown,this,!0),this.inputField.on("focus",function(e){var query=that.getQuery();query&&that.autoComp.sendRequest(query)}),this.inputField.on("blur",function(e){that.autoComp.get("visible")?that.resultsHideHandler||(that.resultsHideHandle=Y.one("document").on("click",function(e){e.target.ancestor(".yui3-aclist-item")||(Y.fire("BoSelecta:widgetBlur"),Y.fire("flickr-menus:hide"),that.resultsHideHandle.detach())})):Y.fire("BoSelecta:widgetBlur")}),Y.on("flickr-menus:hide",this.hideResults,this,!0)},Y.BoSelecta3.prototype._fetchData=function(){if(!this.fetchingData){this.fetchingData=!0,this.haveTriedToFetchData=!0,this.fire("BoSelecta:dataFetchStart"),this.loadTransparently||(this.inputField.setStyle("display","none"),this.loadingBox.setStyle("display","block"));var url=this.apiURL,that=this,callback={success:function(id,o,args){if("-1"!==o.responseText&&""!==o.responseText){var contactSplit,responseText=o.responseText.split("")[1];that.contacts=responseText.split("");for(var n=0,len=that.contacts.length;n<len;n++)0!==(contactSplit=that.contacts[n].split("")).length&&(that.contacts[n]={},that.contacts[n].n=contactSplit[0],that.contacts[n].e=contactSplit[1],that.contacts[n].u=contactSplit[2],that.contacts[n].r=contactSplit[3],that.contacts[n].s=contactSplit[4],that.contacts[n].f=contactSplit[5],that.contacts[n].a=contactSplit[6],that.contacts[n].d=contactSplit[7],that.contacts[n].y=contactSplit[8],that.contacts[n].c=contactSplit[9],that.contacts[n].us=Y.StringFilters.soundex(that.contacts[n].u),that.contacts[n].rs=Y.StringFilters.soundex(that.contacts[n].r),that.contacts[n][0]=that.contacts[n].u);that.loadTransparently||(that.restoreDefaultText(),that.loadingBox.setStyle("display","none"),that.inputField.setStyle("display","inline"),that.focusOnFetch&&that.clear(!0)),that.fetchingData=!1,that.fire("BoSelecta:dataFetchComplete")}else that.allowNoContacts?(that.contacts=[],that.loadTransparently||(that.restoreDefaultText(),that.loadingBox.setStyle("display","none"),that.inputField.setStyle("display","inline"),""!==that.inputField.get("value")&&!that.focusOnFetch||that.clear(!0)),that.fire("BoSelecta:dataFetchComplete")):callback.failure()},failure:function(id,o,args){that.autoComp.destroy(),that.form&&"form"===that.form.get("tagName").toLowerCase()&&Y.Event.purgeElement(that.form),that.inputField.get("parentNode").all(".no-js-fallback").setStyle("display",""),that._destroy(),that.fetchingData=!1,that.fire("BoSelecta:dataError")}};url?Y.io(url,{method:"GET",on:callback}):callback.failure()}},Y.BoSelecta3.prototype._destroy=function(removeInput){var container=this.inputField.get("parentNode");Y.Event.purgeElement(this.inputField),this.inputField.removeClass("grey"),this.inputField.removeClass("yui-ac-input"),this.inputField.set("value",""),this.inputField.setStyle("display",""),this.inputField.removeClass("input"),removeInput&&this.inputField.remove(),this.loadingBox.remove(),container.removeClass("yui-skin-sam"),container.removeClass("bo-selecta-3")},Y.BoSelecta3.prototype._searchContacts=function(query){var me,originalQuery,matches=[],that=this;if(""===query||query&&query===this.defaultText)return matches;if(query&&"string"==typeof query&&this.contacts){originalQuery=query,query=this._escapeForRegEx(query),query=Y.StringFilters.substitute_equivalent_chars(query);for(var contact,match,queryRegEx=new RegExp(query,"i"),querySoundex=Y.StringFilters.soundex(originalQuery),n=0,len=this.contacts.length;n<len;n++)match=!1,(contact=this.contacts[n]).matched=null,!contact.n||this.includeUser&&originalQuery!==this.meString||contact.n!==Y.config.flickr.user.nsid?this.skipList&&(this.skipList[contact.n]||this.skipList[contact.e])||(this.searchOnUsername&&contact.u&&-1!==contact.u.search(queryRegEx)&&(match=!0,contact.matched="username",contact.matchedPos=contact.u.search(queryRegEx)),!match&&this.searchOnRealname&&contact.r&&-1!==contact.r.search(queryRegEx)&&(match=!0,contact.matched="realname",contact.matchedPos=contact.r.search(queryRegEx)),!match&&this.searchOnEmail&&contact.e&&"@"!==query&&-1!==contact.e.search(queryRegEx)&&(match=!0,contact.matched="email",contact.matchedPos=contact.e.search(queryRegEx)),!match&&this.searchOnPathAlias&&contact.a&&-1!==contact.a.search(queryRegEx)&&(match=!0,contact.matched="path_alias",contact.matchedPos=contact.a.search(queryRegEx)),this.searchUsingSoundex&&(!match&&this.searchOnUsername&&contact.us&&Y.StringFilters.isEqualSoundex(contact.us,querySoundex)&&(match=!0,contact.matched="username-soundex",contact.matchedPos=contact.us===querySoundex?0:Y.StringFilters.isEqualSoundex(contact.us,querySoundex)),!match&&this.searchOnRealname&&contact.rs&&Y.StringFilters.isEqualSoundex(contact.rs,querySoundex)&&(match=!0,contact.matched="realname-soundex",contact.matchedPos=contact.rs===querySoundex?0:Y.StringFilters.isEqualSoundex(contact.rs,querySoundex))),match&&matches.push(contact)):originalQuery!==this.meString||this.skipList[contact.n]||(me=contact)}if(0!==matches.length||originalQuery===this.meString&&me){for(n=0,len=matches.length;n<len;n++)if(!matches[n].n&&!matches[n].u){var m=0;for(len=matches.length;m<len;m++)if(n!==m&&matches[n]&&matches[m]&&matches[n].e===matches[m].e){delete matches[n];break}}for(n=0,len=matches.length;n<len;)matches[n]?n++:(matches.splice(n,1),len--);var propertyToPositionMap={username:0,realname:1,email:2,path_alias:3,"username-soundex":4,"realname-soundex":5};matches.sort(function(a,b){var aType=a.n&&a.u?"contact":"addressBookEntry";if(aType!=(b.n&&b.u?"contact":"addressBookEntry"))return"contact"==aType?-1:1;if(a.matchedPos!==b.matchedPos)return a.matchedPos<b.matchedPos?-1:1;if(propertyToPositionMap[a.matched]!==propertyToPositionMap[b.matched])return propertyToPositionMap[a.matched]<propertyToPositionMap[b.matched]?-1:1;var au=a.u.charCodeAt(0),bu=b.u.charCodeAt(0);return au===bu?0:au<bu?-1:1}),originalQuery===this.meString&&me&&(me.matched="username",matches.unshift(me));var totalResults=matches.length;if(matches=matches.splice(0,this.maxResultsDisplayed),this.showTotalResults){matches.push({message:Y.transjax.get("bo-selecta","uber_contact_list_max_results").replace(/\[results_shown\]/,Math.min(matches.length,this.maxResultsDisplayed)).replace(/\[total_results\]/,totalResults).replace(/\[url\]/,"/search/people/?q=%s&m=names&see=all"),totalResultsMessage:!0})}}else if(this.hideNoContactMessage||(matches.push({message:Y.transjax.get("bo-selecta","bo_selecta_no_contacts_found"),notFoundLink:!0,disableActive:!0}),this.enableGlobalSearch&&matches.push({globalSearchLink:!0,query:originalQuery,message:Y.transjax.get("bo-selecta","bo_selecta_global_search_msg")})),0<this.zeroResultsMessages.length)for(var msg,n=0,len=this.zeroResultsMessages.length;n<len;n++)(msg=this.zeroResultsMessages[n]).validator(this)&&matches.push(msg);return this.showEditRelationshipLink&&!this.relationshipLinksInitialized&&Y.use("contact-changer",function(Y){that.container.delegate("click",function(e){Y.contact_changer.show(e.target.getAttribute("data-nsid")),e.preventDefault()},".edit-rel a"),that.relationshipLinksInitialized=!0}),matches},Y.BoSelecta3.prototype._formatResult=function(query,results,highlighted){var contact,messageHTML,buddyIconHTML,addressBookContactHTML,pClass,pathIdentifier,relationshipHTML,usernameHTML,subtitleHTML,contactEl,formatedResults=[],queryRegEx=query?new RegExp(Y.StringFilters.substitute_equivalent_chars(this._escapeForRegEx(query)),"gi"):null;query=query||"";for(var n=0,len=results.length;n<len;n++)(contact=results[n].raw)&&(contact.globalSearchLink?(messageHTML='<p class="bs-global-search-link bs-message bs-onclick"><span>'+contact.message+"</span></p>",formatedResults.push(messageHTML)):contact.totalResultsMessage?(messageHTML='<p class="bs-message bs-total-results bs-disable-active"><span>'+contact.message+"</span></p>",formatedResults.push(messageHTML)):contact.message?(messageHTML='<p class="bs-message'+(contact.notFoundLink?"":" bs-onclick")+(contact.disableActive?" bs-disable-active":"")+(contact.className?" "+contact.className:"")+'">'+contact.message+"</p>",formatedResults.push(messageHTML)):(pClass=this.respectCanTagFlag&&"0"===contact.c?' class="disabled"':"",!contact.e||contact.u||contact.n?(' / <a href="/people/'+(pathIdentifier=contact.a?contact.a:contact.n)+'/">'+Y.transjax.get("bo-selecta","uber_contact_list_view_profile")+"</a>",contact.i||(contact.i=contact.f&&0!==contact.f&&contact.s&&0!==contact.s?"http://farm"+contact.f+".static"+(Y.config.flickr.dev?"-dev":"")+".flickr.com/"+contact.s+"/buddyicons/"+contact.n+".jpg":"http://www.flickr.com/images/buddyicon.gif"),F.config.flickr.is_secure&&(contact.i=contact.i.replace("http:","https:")),relationshipHTML="",this.showRelationship&&("1"===contact.d&&"1"===contact.y?relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_friend_and_family"):"1"===contact.d?relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_friend"):"1"===contact.y?relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_family"):"1"===contact.removed?relationshipHTML+='<em class="contact-removed">'+Y.transjax.get("bo-selecta","uber_contact_list_removed")+"</em>":this.searchingGlobally?relationshipHTML+="":relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_contact"),this.showEditRelationshipLink&&!this.searchingGlobally&&(relationshipHTML+=' <span class="edit-rel">(<a href="/people/'+pathIdentifier+'/relationship/" data-nsid="'+contact.n+'">'+Y.transjax.get("bo-selecta","uber_contact_list_edit")+"</a>)</span>")),buddyIconHTML=this.showIcon?'<img src="'+contact.i+'" width="24" height="24" class="BuddyIconX fade-in" nsid="'+contact.n+'">':"",buddyIconHTML=this.linkUsernameToPhotostream?'<a href="/photos/'+pathIdentifier+'/">'+buddyIconHTML+"</a>":buddyIconHTML,usernameHTML=this.showUsername?highlightTerm(this._sanitizeString(contact.u),queryRegEx):"",usernameHTML=this.linkUsernameToPhotostream?'<strong class="username"><a href="/photos/'+pathIdentifier+'/">'+usernameHTML+"</a></strong>":'<strong class="username">'+usernameHTML+"</strong>",subtitleHTML="",this.showSubtitle&&(contact.matched&&"realname"!==contact.matched&&"realname-soundex"!==contact.matched?"username"===contact.matched||"username-soundex"===contact.matched?subtitleHTML=contact.r?this._sanitizeString(contact.r):Y.transjax.get("bo-selecta","uber_contact_list_no_realname"):"email"===contact.matched?subtitleHTML=highlightTerm(this._sanitizeString(contact.e),queryRegEx):"path_alias"===contact.matched&&contact.a&&(subtitleHTML="flickr.com/people/"+highlightTerm(this._sanitizeString(contact.a),queryRegEx)+"/"):subtitleHTML=contact.r?highlightTerm(this._sanitizeString(contact.r),queryRegEx):Y.transjax.get("bo-selecta","uber_contact_list_no_realname"),subtitleHTML=this.linkSubtitle?'<a title="'+Y.transjax.get("bo-selecta","uber_contact_list_view_profile")+'" href="/people/'+pathIdentifier+'/" class="realname">'+subtitleHTML+"</a>":'<span class="realname">'+subtitleHTML+"</span>"),contactEl=Y.Node.create('<p nsid="'+contact.n+'"'+pClass+'><span class="name">'+buddyIconHTML+usernameHTML+subtitleHTML+'</span><span class="relationship">'+relationshipHTML+"</span></p>"),Y.imageFader.attach(contactEl.all("img")),formatedResults.push(contactEl)):(contact.i||(contact.i="/images/icon_unread.gif"),buddyIconHTML=this.showIcon?'<img src="'+contact.i+'" width="16" height="16" class="BuddyIconX bs-email-icon">':"",addressBookContactHTML='<p email="'+contact.e+'"'+pClass+'><span class="name name-email">'+buddyIconHTML+'<strong class="username">'+highlightTerm(this._sanitizeString(contact.e),queryRegEx)+'</strong></span><span class="relationship"></span></p>',formatedResults.push(addressBookContactHTML))));return formatedResults},Y.BoSelecta3.prototype._resizeListToFit=function(e){var ac,nameNode,relationshipNode,badgeWidth,minWidth=this.minListWidth,maxWidth=this.maxListWidth;("autocompleteList:query"===e.type||"autocompleteList:visibleChange"===e.type&&!0===e.newVal)&&((ac=e.currentTarget).get("listNode").all("li p").each(function(node){nameNode=node.one(".name"),relationshipNode=node.one(".relationship"),nameNode&&relationshipNode&&(badgeWidth=nameNode.get("offsetWidth")+relationshipNode.get("offsetWidth")+12,minWidth<badgeWidth&&(minWidth=badgeWidth))}),this.baseListWidth||(this.baseListWidth=ac.get("width")),maxWidth<minWidth&&(minWidth=maxWidth),minWidth<this.baseListWidth&&(minWidth=this.baseListWidth),ac.set("width",minWidth))},Y.BoSelecta3.prototype._attachIconEvents=function(parent){if(personmenu_process_img&&"function"==typeof personmenu_process_img)for(var img,imgs=parent.all("img"),n=0,len=imgs.size();n<len;n++)img=Y.Node.getDOMNode(imgs.item(n)),imgs.item(n).hasClass("BuddyIconX")&&(img.nsid=imgs.item(n).getAttribute("nsid"),personmenu_process_img(img))},Y.BoSelecta3.prototype._useGlobalSearch=function(query){var that=this;this.searchingGlobally=!0,query&&this.inputField.set("value",decodeURIComponent(query)),this.autoComp.set("source",this.globalSearchDataSource),this.autoComp.set("minQueryLength",2),this.autoComp.set("maxResultsDisplayed",this.globalMaxResultsDisplayed),this.autoComp.set("queryDelay",600),this.loadingBox.addClass("loading-global").removeClass("loading"),this.loadingBox.set("innerHTML",""),this.globalSearchRemover=this.inputField.on("keyup",function(e){""===that.inputField.get("value")&&(that.globalSearchRemover.detach(),that._useContactsCache())}),query=this.getQuery(),this.autoComp.sendRequest(query)},Y.BoSelecta3.prototype._useContactsCache=function(query){this.searchingGlobally=!1,query&&this.inputField.set("value",decodeURIComponent(query)),this.autoComp.set("source",this.contactsCacheDataSource),this.autoComp.set("minQueryLength",1),this.autoComp.set("maxResultsDisplayed",0),this.autoComp.set("queryDelay",0)},Y.BoSelecta3.prototype._onItemSelectEvent=function(e,arg){var contact=e.result.raw;if(contact.message)return contact.globalSearchLink?this._useGlobalSearch(contact.query):contact.onclick&&"function"==typeof contact.onclick?contact.onclick(e,this):this.clear(),void e.preventDefault();this.fire("BoSelecta:resultSelect",contact,contact.query),this.searchingGlobally&&this._useContactsCache()},Y.BoSelecta3.prototype._handleQueryChange=function(e){this.fire("BoSelecta:queryChange",e.query)},Y.BoSelecta3.prototype._onInputFieldKeyDown=function(e){if(13===e.keyCode&&this.autoComp){var isMessage=!1;if(this.autoComp._oCurItem){var pEls=Y.one(this.autoComp._oCurItem).all("p");0<pEls.size()&&(isMessage=pEls.item(0).hasClass("bs-message")&&!pEls.item(0).hasClass("bs-onclick"))}this.autoComp._oCurItem&&!isMessage||this.fire("BoSelecta:inputEnter")}},Y.BoSelecta3.prototype._sanitizeString=function(str){return str=str.replace(/</g,"&lt;").replace(/>/g,"&gt;")},Y.BoSelecta3.prototype._unsanitizeString=function(str){return str=str.replace(/\&lt;/g,"<").replace(/\&gt;/g,">")},Y.BoSelecta3.prototype._escapeForRegEx=function(str){return str=(str=(str=decodeURIComponent(str)).replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/\?/g,"\\?")).replace(/\|/g,"\\|").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]")},Y.BoSelecta3.prototype.fetchData=function(){this.contacts||this.haveTriedToFetchData||this._fetchData()},Y.BoSelecta3.prototype.refreshData=function(){this._fetchData()},Y.BoSelecta3.prototype.hideResults=function(){this.autoComp&&this.autoComp.hide&&this.autoComp.hide(),this.resultsHideHandle&&this.resultsHideHandle.detach&&this.resultsHideHandle.detach()},Y.BoSelecta3.prototype.clear=function(focus){if(this.inputField.removeClass("grey"),this.inputField.set("value",""),focus)try{this.inputField.focus()}catch(e){}this.hideResults()},Y.BoSelecta3.prototype.clearDefaultText=function(focus){this.inputField.hasClass("grey")&&this.clear(focus)},Y.BoSelecta3.prototype.restoreDefaultText=function(){this.clear(),this.inputField.addClass("grey"),this.inputField.set("value",this.defaultText),this.inputField.blur()},Y.BoSelecta3.prototype.getQuery=function(){return this.inputField.hasClass("grey")?"":this.inputField.get("value")},Y.BoSelecta3.prototype.refreshResults=function(){this.autoComp&&this.getQuery()&&this.autoComp.sendRequest(this.getQuery())},Y.BoSelecta3.prototype.skipContact=function(contact){this.skipList[contact.n?contact.n:contact.e]=!0},Y.BoSelecta3.prototype.unskipContact=function(contact){this.skipList[contact.n?contact.n:contact.e]=!1},Y.BoSelecta3.prototype.unskipAll=function(){this.skipList={}},Y.BoSelecta3.prototype.showInFieldLoading=function(){this.loadingBox.addClass("loading-global"),this.loadingBox.removeClass("loading"),this.loadingBox.setStyle("display","block")},Y.BoSelecta3.prototype.hideInFieldLoading=function(){this.loadingBox.setStyle("display","")},Y.BoSelecta3.prototype.destroy=function(){this._destroy(!0)},Y.BoSelecta3.sanitizeString=Y.BoSelecta3.prototype._sanitizeString,Y.BoSelecta3.unsanitizeString=Y.BoSelecta3.prototype._unsanitizeString},"0.0.1",{requires:F.config.modules["bo-selecta-3"].requires||[],optional:F.config.modules["bo-selecta-3"].optional||[]});YUI.add("nav-selecta-transjax",function(a){a.transjax.add("nav-selecta",{search_on_flickr:"Search <strong>Everyone's Uploads</strong>",search_more:"More search types...</strong>",jump_to_the_search_field:"Jump to the search field",search_photostream:"<strong>Your Photostream</strong>",search_users_photostream:"<strong>%s Photostream</strong>",search_favorites:"<strong>Your Favorites</strong>",search_users_favorites:"<strong>%s Favorites</strong>",search_contacts:"<strong>Your Contacts' Photos</strong>",search_people:"<strong>Flickr Members</strong>",search_tags:"<strong>Tags</strong>",search_groups:"<strong>Groups</strong>",search_group:"<strong>This Group</strong>",search_location:"<strong>Places</strong>",search_apps:"<strong>Apps</strong>",search_help:"<strong>The Help Forum</strong>",search_advanced:"<strong>Advanced Search</strong>",section_your_photostream:"Your Photostream",section_your_sets:"Your Sets",section_your_collections:"Your Collections",section_your_galleries:"Your Galleries",section_your_archives:"Your Archives",section_your_tags:"Your Tags",section_your_map:"Your Map",section_your_favorites:"Your Favorites",section_your_stats:"Your Stats",section_your_apps:"Your Apps",section_recent_activity:"Recent Activity",section_photos_of_you:"Photos of You",section_upload_photos:"Upload Photos",section_your_account:"Your Account",section_your_profile:"Your Profile",section_flickrmail:"FlickrMail",section_organize_and_create:"Organize & Create",section_prints_and_photo_products:"Prints &amp; photo products",section_contacts:"Contacts' Recent Uploads",section_photos_of_your_contacts:"Photos of Your Contacts",section_contact_list:"Contact List",section_find_your_friends:"Find Your Friends",section_invite_your_friends:"Invite your Friends",section_invite_history:"Invite History",section_guest_pass_history:"Guest Pass History",section_your_groups:"Your Groups",section_recent_changes_in_your_groups:"Recent Changes in Your Groups",section_create_a_new_group:"Create a New Group",section_the_tour:"The Tour",section_explore:"Explore",section_last_7_days_interesting:"Last 7 Days Interesting",section_popular_tags:"Popular Tags",section_calendar:"Calendar",section_most_recent_uploads_to_flickr:"Most Recent Uploads to Flickr",section_video_on_flickr:"Video on Flickr",section_galleries:"Galleries",section_explore_analog:"Explore Analog",section_flickr_clock:"Flickr Clock",section_world_map:"World Map",section_places:"",section_the_commons:"The Commons",section_creative_commons:"Creative Commons",section_flickrblog:"FlickrBlog",section_getty_images:"Getty Images",section_code_flickr:"code.flickr",section_the_app_garden:"The App Garden",section_camera_finder:"Camera Finder",section_developer_guidelines:"Developer Guide",section_api_docs:"API Documentation",section_feeds:"Feeds",section_help:"Help",section_community_guidelines:"Community Guidelines",section_the_help_forum:"The Help Forum",section_faq:"FAQ",section_tools:"Tools",section_sitemap:"Sitemap",section_about_flickr:"About Flickr",section_jobs:"Jobs at Flickr",section_terms_of_service:"Terms of Service",section_terms_of_use:"Terms of Use",section_your_privacy:"Your Privacy",section_copyright_ip_policy:"Copyright/IP Policy",section_report_abuse:"Report Abuse",section_mobile:"Mobile",section_photosession:"Photo Session",section_alias_graphs:"Graphs",section_alias_referrers:"Referrers",section_alias_views:"Views",section_alias_settings:"Settings",section_alias_preferences:"Preferences",section_alias_batch:"Batch",section_alias_prints:"Prints",section_alias_calendar:"Calendar",section_alias_book:"Book",section_alias_film:"Film",section_alias_license:"License",section_alias_buy:"Buy",section_alias_sell:"Sell",section_alias_developer:"Developer",section_alias_programming:"Programming",section_alias_code:"Code",section_alias_documentation:"Documentation",section_alias_career:"Career",section_alias_work:"Work",section_alias_staff:"Staff",section_alias_upload:"Upload",section_alias_plugin:"Plug-in",section_alias_:"",section_alias_:"",section_alias_:"",section_alias_:"",section_alias_:"",section_alias_:"",section_alias_:""})},"0.0.1",{requires:F.config.modules["nav-selecta-transjax"].requires||[]});YUI.add("nav-selecta",function(Y){var metaKey=!1;Y.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&(metaKey=!0)}),Y.on("keyup",function(e){metaKey=metaKey&&!1}),Y.NavSelecta=function(inputFieldId,attr){(attr=attr||{}).showSubtitle=void 0===attr.showSubtitle||attr.showSubtitle,attr.showIcon=void 0===attr.showIcon||attr.showIcon,attr.maxResultsDisplayed=attr.maxResultsDisplayed||15,attr.searchOnRealname=void 0===attr.searchOnRealname||attr.searchOnRealname,attr.searchOnEmail=void 0===attr.searchOnEmail||attr.searchOnEmail,attr.searchOnPathAlias=void 0===attr.searchOnPathAlias||attr.searchOnPathAlias,attr.selectFirstItem=void 0===attr.selectFirstItem||attr.selectFirstItem,attr.loadTransparently=void 0===attr.loadTransparently||attr.loadTransparently,attr.allowFormSubmit=void 0===attr.allowFormSubmit||attr.allowFormSubmit,attr.minListWidth=attr.minListWidth||(F.config.flickr.flags.enable_global_nav_restyle?220:F.config.flickr.flags.enable_global_nav?241:266),attr.maxListWidth=attr.maxListWidth||(F.config.flickr.flags.enable_global_nav_restyle?220:null),attr.minListWidth=F.config.flickr.flags.enable_global_nav_upload_icon?360:attr.minListWidth,attr.maxListWidth=F.config.flickr.flags.enable_global_nav_upload_icon?360:attr.maxListWidth,Y.NavSelecta.superclass.constructor.call(this,inputFieldId,attr),this.inputField.removeClass("grey"),this.maxContactsDisplayed=attr.maxContactsDisplayed||3,this.maxSectionsDisplayed=attr.maxSectionsDisplayed||3,this.on("BoSelecta:resultSelect",handleItemSelect),this.on("BoSelecta:resultClick",handleItemSelect),Y.config.flickr.user&&Y.config.flickr.user.nsid&&(this.inputField.once("mouseover",this.fetchData,this,!0),this.inputField.once("focus",this.fetchData,this,!0),this.on("BoSelecta:dataFetchComplete",this.refreshResults,this,!0)),this.container.addClass("nav-selecta");var menu_node=this.autoComp.get("listNode").ancestor(".yui3-aclist-content");function nixMenuHide(){this._hover_hide_timeout&&this._hover_hide_timeout.cancel()}function setMenuOver(e,source){e.target.addClass("search-menu-hover"),nixMenuHide()}function setMenuOut(e,source){e.target.removeClass("search-menu-hover"),function(e,source){nixMenuHide(),this._hover_hide_timeout=Y.later(1e3,this,function(){Y.fire("flickr-menus:hide",source),this._hover_hide_timeout=null})}(0,source)}menu_node.on("mouseover",setMenuOver,this),menu_node.on("mouseout",setMenuOut,this),this.container.on("mouseover",setMenuOver,this,"source:nav-selecta-container"),this.container.on("mouseout",setMenuOut,this,"source:nav-selecta-container"),this.container.on("keyup",function(e){e.target.hasClass("search-menu-hover")||setMenuOut.apply(this,arguments)},this),Y.keyboardShortcutManager.register({keystring:"83",handler:focusAndScrollToField,context:"",scope:this,legend:{key:"S",description:Y.transjax.get("nav-selecta","jump_to_the_search_field"),group:Y.transjax.get("keyboard-shortcut-legend","navigation"),order:99}}),this.addSections(Y.config.flickr.nav_selecta.additional_sections)};var proto={},statik={};function handleItemSelect(section,query){"contact"===section.type?metaKey||navigateTo("/photos/"+(section.a?section.a:section.n)+"/"):(section.type,metaKey||navigateTo(section.url))}function focusAndScrollToField(e){e.preventDefault(),window.scrollTo(0,0),this.inputField.focus()}function navigateTo(url){Y.rapidTracker.beacon("Search-search_icon"),Y.fire("NavSelecta:beforeNavigatingAway",url),window.location=url}function mergeQuery(query){var qs=location.search.split("?")[1]||null;if(qs){var qs_parts=qs.split("&"),query_parts=query.split("&"),query_part=null,query_object={},i=null,value=null,query_out="";for(i=0;query_parts.length>i;i++)query_object[(query_part=query_parts[i].split("="))[0]]=query_part[1];for(i=0;qs_parts.length>i;i++)(query_part=qs_parts[i].split("="))[0].match(/^[a-zA-Z][a-zA-Z0-9]*/)&&(query_object[query_part[0]]?(value=query_object[query_part[0]],query_object[query_part[0]]=null):value=query_part[1],query_out+=query_part[0]+"="+Y.StringFilters.escape_entities(value)+"&");for(i in query_object)query_object[i]&&(query_out+=i+"="+query_object[i]+"&");return query_out.substring(0,query_out.length-1)}return query}function highlightTerm(str,regex){return str?(str=Y.StringFilters.unescape_entities(str,!0),-1===(start_position=regex?str.search(regex):-1)?Y.BoSelecta3.sanitizeString(str):(end_position=start_position+str.match(regex)[0].length,Y.StringFilters.escape_entities(str.substring(0,start_position),!0)+'<span class="term-highlight">'+Y.StringFilters.escape_entities(str.substring(start_position,end_position),!0)+"</span>"+Y.StringFilters.escape_entities(str.substring(end_position,str.length),!0))):str;var start_position,end_position}function trans(key){return Y.transjax.get("nav-selecta",key)}proto._searchContacts=function(query){var me,propertyToPositionMap,matches=[],originalQuery=query,that=this,photostreamOptionShown=!1,userPhotostreamOptionShown=!1,favoritesOptionShown=!1,userFavoritesOptionShown=!1,groupOptionShown=!1;if(matches.push({type:"search",message:Y.transjax.get("nav-selecta","search_on_flickr",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(e){metaKey||navigateTo("/search/?"+mergeQuery("q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("q="+encodeURIComponent(originalQuery))}),Y.config.flickr.nav_selecta.photostream_search_user&&(Y.config.flickr.user&&Y.config.flickr.user.nsid&&Y.config.flickr.user.nsid===Y.config.flickr.nav_selecta.photostream_search_user.nsid?(matches.push({type:"search-photostream",message:Y.transjax.get("nav-selecta","search_photostream",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w="+Y.config.flickr.user.nsid+"&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w="+Y.config.flickr.user.nsid+"&q="+encodeURIComponent(originalQuery))}),photostreamOptionShown=!0):(matches.push({type:"search-users-photostream",message:Y.transjax.get("nav-selecta","search_users_photostream",Y.StringFilters.escape_entities(Y.config.flickr.nav_selecta.photostream_search_user.owner_name_possessive),'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w="+Y.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w="+Y.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(originalQuery))}),userPhotostreamOptionShown=!0)),Y.config.flickr.nav_selecta.favorites_search_user&&(Y.config.flickr.user&&Y.config.flickr.user.nsid&&Y.config.flickr.user.nsid===Y.config.flickr.nav_selecta.favorites_search_user.nsid?(matches.push({type:"search-favorites",message:Y.transjax.get("nav-selecta","search_favorites",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w=faves&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w=faves&q="+encodeURIComponent(originalQuery))}),favoritesOptionShown=!0):(matches.push({type:"search-users-favorites",message:Y.transjax.get("nav-selecta","search_users_favorites",Y.StringFilters.escape_entities(Y.config.flickr.nav_selecta.favorites_search_user.owner_name_possessive),'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w=faves-"+Y.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w=faves-"+Y.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(originalQuery))}),userFavoritesOptionShown=!0)),Y.config.flickr.nav_selecta.search_group&&Y.config.flickr.nav_selecta.search_group.nsid&&(matches.push({type:"search-group",message:Y.transjax.get("nav-selecta","search_group",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/groups/?"+mergeQuery("w="+encodeURIComponent(Y.config.flickr.nav_selecta.search_group.nsid)+"&m=pool&q="+encodeURIComponent(originalQuery)))},url:"/search/groups/?"+mergeQuery("w="+encodeURIComponent(Y.config.flickr.nav_selecta.search_group.nsid)+"&m=pool&q="+encodeURIComponent(originalQuery))}),groupOptionShown=!0),this.showMoreSearches||Y.config.flickr.nav_selecta.search_view?(Y.config.flickr.user&&Y.config.flickr.user.nsid&&!photostreamOptionShown&&matches.push({type:"search-photostream",message:Y.transjax.get("nav-selecta","search_photostream",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w="+Y.config.flickr.user.nsid+"&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w="+Y.config.flickr.user.nsid+"&q="+encodeURIComponent(originalQuery))}),!Y.config.flickr.nav_selecta.photostream_search_user||Y.config.flickr.user&&Y.config.flickr.user.nsid===Y.config.flickr.nav_selecta.photostream_search_user.nsid||userPhotostreamOptionShown||matches.push({type:"search-users-photostream",message:Y.transjax.get("nav-selecta","search_users_photostream",Y.StringFilters.escape_entities(Y.config.flickr.nav_selecta.photostream_search_user.owner_name_possessive),'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w="+Y.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w="+Y.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(originalQuery))}),!Y.config.flickr.nav_selecta.favorites_search_user||Y.config.flickr.user&&Y.config.flickr.user.nsid===Y.config.flickr.nav_selecta.favorites_search_user.nsid||userFavoritesOptionShown||matches.push({type:"search-users-favorites",message:Y.transjax.get("nav-selecta","search_users_favorites",Y.StringFilters.escape_entities(Y.config.flickr.nav_selecta.favorites_search_user.owner_name_possessive),'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w="+Y.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w="+Y.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(originalQuery))}),Y.config.flickr.user&&Y.config.flickr.user.nsid&&matches.push({type:"search-contacts",message:Y.transjax.get("nav-selecta","search_contacts",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/?"+mergeQuery("w=contacts&q="+encodeURIComponent(originalQuery)))},url:"/search/?"+mergeQuery("w=contacts&q="+encodeURIComponent(originalQuery))}),matches.push({type:"search-groups",message:Y.transjax.get("nav-selecta","search_groups",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/groups/?"+mergeQuery("q="+encodeURIComponent(originalQuery)))},url:"/search/groups/?"+mergeQuery("q="+encodeURIComponent(originalQuery))}),matches.push({type:"search-people",message:Y.transjax.get("nav-selecta","search_people",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){metaKey||navigateTo("/search/people/?"+mergeQuery("m=names&q="+encodeURIComponent(originalQuery)))},url:"/search/people/?"+mergeQuery("m=names&q="+encodeURIComponent(originalQuery))})):matches.push({type:"search-more",message:Y.transjax.get("nav-selecta","search_more",'<em class="term-highlight">'+originalQuery+"</em>"),onclick:function(){that.showMoreSearches=!0,that.selectSecondItem=that.autoComp.after("results",function(e){photostreamOptionShown||userPhotostreamOptionShown||favoritesOptionShown||userFavoritesOptionShown||groupOptionShown?that.autoComp.set("activeItem",that.autoComp._getFirstItemNode().next().next()):that.autoComp.set("activeItem",that.autoComp._getFirstItemNode().next()),that.selectSecondItem.detach()}),that.refreshResults()}}),query&&"string"==typeof query){query=this._escapeForRegEx(query),query=Y.StringFilters.substitute_equivalent_chars(query);var contact,match,n,m,len,mLen,queryRegEx=new RegExp(query,"i");if(this.contacts){var matched_a_contact=!1,contact_matches=[];for(n=0,len=this.contacts.length;n<len;n++)match=!1,(contact=this.contacts[n]).matched=null,!contact.n||this.includeUser&&originalQuery!==this.meString||contact.n!==Y.config.flickr.user.nsid?contact.e&&!contact.u&&!contact.n||this.skipList&&(this.skipList[contact.n]||this.skipList[contact.e])||(this.searchOnUsername&&contact.u&&-1!==contact.u.search(queryRegEx)&&(match=!0,contact.matched="username",contact.matchedPos=contact.u.search(queryRegEx)),!match&&this.searchOnRealname&&contact.r&&-1!==contact.r.search(queryRegEx)&&(match=!0,contact.matched="realname",contact.matchedPos=contact.r.search(queryRegEx)),!match&&this.searchOnEmail&&contact.e&&"@"!==query&&-1!==contact.e.search(queryRegEx)&&(match=!0,contact.matched="email",contact.matchedPos=contact.e.search(queryRegEx)),!match&&this.searchOnPathAlias&&contact.a&&-1!==contact.a.search(queryRegEx)&&(match=!0,contact.matched="path_alias",contact.matchedPos=contact.a.search(queryRegEx)),match&&(matched_a_contact=!0,contact.type="contact",contact_matches.push(contact))):originalQuery!==this.meString||this.skipList[contact.n]||(me=contact);matched_a_contact&&(propertyToPositionMap={username:0,realname:1,email:2,path_alias:3},contact_matches.sort(function(a,b){var aType=a.n&&a.u?"contact":"addressBookEntry";if(aType!=(b.n&&b.u?"contact":"addressBookEntry"))return"contact"==aType?-1:1;if(a.matchedPos!==b.matchedPos)return a.matchedPos<b.matchedPos?-1:1;if(propertyToPositionMap[a.matched]!==propertyToPositionMap[b.matched])return propertyToPositionMap[a.matched]<propertyToPositionMap[b.matched]?-1:1;var au=a.u.charCodeAt(0),bu=b.u.charCodeAt(0);return au===bu?0:au<bu?-1:1}),originalQuery===this.meString&&me&&(me.matched="username",matches.unshift(me)),matches=matches.concat(contact_matches.slice(0,this.maxContactsDisplayed)))}else Y.config.flickr.user&&Y.config.flickr.user.nsid&&this.fetchData();if(this.groups,Y.NavSelecta.nav_sections){var alias_match_position,matched_a_section=!1,section_matches=[];for(n=0,len=Y.NavSelecta.nav_sections.length;n<len;n++){if(match=!1,section=Y.NavSelecta.nav_sections[n],section.matched=null,section.name&&-1!==section.name.search(queryRegEx)&&(match=!0,section.matched="name",section.matchedPos=section.name.search(queryRegEx)),!match&&section.aliases&&section.aliases.length)for(m=0,mLen=section.aliases.length;m<mLen;m++)-1!==(alias_match_position=section.aliases[m].search(queryRegEx))&&(!section.matchedPos||alias_match_position<section.matchedPos)&&(match=!0,section.matched="alias",section.matchedPos=alias_match_position);!match&&this.searchOnURL&&section.url&&-1!==section.url.search(queryRegEx)&&(match=!0,section.matched="url",section.matchedPos=section.url.search(queryRegEx)),match&&(matched_a_section=!0,section.type="section",section_matches.push(section))}matched_a_section&&(propertyToPositionMap={name:0,alias:1,url:2},section_matches.sort(function(a,b){if(a.matchedPos!==b.matchedPos)return a.matchedPos<b.matchedPos?-1:1;if(propertyToPositionMap[a.matched]!==propertyToPositionMap[b.matched])return propertyToPositionMap[a.matched]<propertyToPositionMap[b.matched]?-1:1;var au=a.name.charCodeAt(0),bu=b.name.charCodeAt(0);return au===bu?0:au<bu?-1:1}),matches=matches.concat(section_matches.slice(0,this.maxSectionsDisplayed)))}}return matches},proto._formatResult=function(query,results,highlighted){var contact,messageHTML,buddyIconHTML,addressBookContactHTML,pClass,pathIdentifier,relationshipHTML,usernameHTML,subtitleHTML,contactEl,formatedResults=[],queryRegEx=query?new RegExp(Y.StringFilters.substitute_equivalent_chars(this._escapeForRegEx(query)),"gi"):null,contactFormatted=!1,sectionFormatted=!1;query=query||"";for(var n=0,len=results.length;n<len;n++)(contact=results[n].raw)&&("search-more"!==contact.type?contact.type.match(/^search/)?(messageHTML='<p class="bs-message bs-onclick ns-search"><a class="inner" href="'+contact.url+'"><span class="icon"></span>'+contact.message+"</a></p>",formatedResults.push(messageHTML)):"section"!==contact.type?contact.globalSearchLink?(messageHTML='<p class="bs-global-search-link bs-message bs-onclick"><span>'+contact.message+"</span></p>",formatedResults.push(messageHTML)):contact.message?(messageHTML='<p class="bs-message'+(contact.notFoundLink?"":" bs-onclick")+(contact.disableActive?" bs-disable-active":"")+(contact.className?" "+contact.className:"")+'">'+contact.message+"</p>",formatedResults.push(messageHTML)):(pClasses=[],contactFormatted||pClasses.push("first-contact"),results[n+1]&&results[n+1].raw&&"contact"!==results[n+1].raw.type&&pClasses.push("last-contact"),pClass=pClasses.length?' class="'+pClasses.join(" ")+'"':"",contactFormatted=(!contact.e||contact.u||contact.n?(' / <a href="/people/'+(pathIdentifier=contact.a?contact.a:contact.n)+'/">'+Y.transjax.get("bo-selecta","uber_contact_list_view_profile")+"</a>",contact.i||(contact.i=contact.f&&0!==contact.f&&contact.s&&0!==contact.s?"http://farm"+contact.f+"."+Y.config.flickr.static_domain+"/"+contact.s+"/buddyicons/"+contact.n+".jpg":"http://www.flickr.com/images/buddyicon.gif"),F.config.flickr.is_secure&&(contact.i=contact.i.replace("http:","https:")),relationshipHTML="",this.showRelationship&&("1"===contact.d&&"1"===contact.y?relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_friend_and_family"):"1"===contact.d?relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_friend"):"1"===contact.y?relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_family"):"1"===contact.removed?relationshipHTML+='<em class="contact-removed">'+Y.transjax.get("bo-selecta","uber_contact_list_removed")+"</em>":this.searchingGlobally?relationshipHTML+="":relationshipHTML+=Y.transjax.get("bo-selecta","uber_contact_list_contact"),this.showEditRelationshipLink&&!this.searchingGlobally&&(relationshipHTML+=' <span class="edit-rel">(<a href="/people/'+pathIdentifier+'/relationship/" onclick="icon_windowOpenFromLink(\''+contact.n+"'); return false;\">"+Y.transjax.get("bo-selecta","uber_contact_list_edit")+"</a>)</span>")),buddyIconHTML=this.showIcon?'<img src="'+contact.i+'" width="24" height="24" class="BuddyIconX fade-in" nsid="'+contact.n+'" '+this.iconAnimCode+">":"",buddyIconHTML=this.linkUsernameToPhotostream?'<a href="/photos/'+pathIdentifier+'/">'+buddyIconHTML+"</a>":buddyIconHTML,usernameHTML=this.showUsername?highlightTerm(this._sanitizeString(contact.u,queryRegEx)):"",usernameHTML=this.linkUsernameToPhotostream?'<strong class="username"><a href="/photos/'+pathIdentifier+'/">'+usernameHTML+"</a></strong>":'<strong class="username">'+usernameHTML+"</strong>",subtitleHTML="",this.showSubtitle&&(contact.matched&&"realname"!==contact.matched?"username"===contact.matched?subtitleHTML=contact.r?this._sanitizeString(contact.r):Y.transjax.get("bo-selecta","uber_contact_list_no_realname"):"email"===contact.matched?subtitleHTML=highlightTerm(contact.e,queryRegEx):"path_alias"===contact.matched&&contact.a&&(subtitleHTML="flickr.com/people/"+highlightTerm(contact.a,queryRegEx)+"/"):subtitleHTML=contact.r?highlightTerm(contact.r,queryRegEx):Y.transjax.get("bo-selecta","uber_contact_list_no_realname"),subtitleHTML=this.linkSubtitle?'<a title="'+Y.transjax.get("bo-selecta","uber_contact_list_view_profile")+'" href="/people/'+pathIdentifier+'/" class="realname">'+subtitleHTML+"</a>":'<span class="realname">'+subtitleHTML+"</span>"),contactEl=Y.Node.create('<p nsid="'+contact.n+'"'+pClass+'><span class="name">'+buddyIconHTML+usernameHTML+subtitleHTML+'</span><span class="relationship">'+relationshipHTML+"</span></p>"),Y.imageFader.attach(contactEl.all("img")),formatedResults.push(contactEl)):(contact.i||(contact.i="/images/icon_unread.gif"),buddyIconHTML=this.showIcon?'<img src="'+contact.i+'" width="16" height="16" class="BuddyIconX bs-email-icon">':"",addressBookContactHTML='<p email="'+contact.e+'"'+pClass+'><span class="name name-email">'+buddyIconHTML+'<strong class="username">'+highlightTerm(contact.e,queryRegEx)+'</strong></span><span class="relationship"></span></p>',formatedResults.push(addressBookContactHTML)),!0)):(messageHTML='<p class="bs-message ns-section ns-section-'+(contact.sectionType?contact.sectionType:"generic")+(sectionFormatted?"":" first-section")+'"><a href="'+contact.url+'" class="inner"><span class="icon"></span>'+highlightTerm(contact.name,queryRegEx)+"</a></p>",formatedResults.push(messageHTML),sectionFormatted=!0):(messageHTML='<p class="bs-message bs-onclick ns-search ns-search-more"><span class="inner"><span class="icon"></span>'+contact.message+"</span></p>",formatedResults.push(messageHTML)));return formatedResults},proto.addSections=function(newSections){Y.NavSelecta.nav_sections=Y.NavSelecta.nav_sections.concat(newSections)},statik.nav_sections=[{name:trans("section_your_photostream"),sectionType:"photos",url:"/photos/me/",aliases:[]},{name:trans("section_your_sets"),sectionType:"photos",url:"/photos/me/sets/",aliases:[]},{name:trans("section_your_collections"),sectionType:"photos",url:"/photos/me/collections/",aliases:[]},{name:trans("section_your_galleries"),sectionType:"photos",url:"/photos/me/galleries/",aliases:[]},{name:trans("section_your_archives"),sectionType:"photos",url:"/photos/me/archives/",aliases:[]},{name:trans("section_your_tags"),sectionType:"photos",url:"/photos/me/tags/",aliases:[]},{name:trans("section_your_map"),sectionType:"map",url:"/photos/me/map/",aliases:[]},{name:trans("section_your_favorites"),sectionType:"photos",url:"/photos/me/favorites/",aliases:[]},{name:trans("section_your_stats"),sectionType:"stats",url:"/photos/me/stats/",aliases:["Graphs","Referrers","Referers","Views",trans("section_alias_graphs"),trans("section_alias_referrers"),trans("section_alias_views")]},{name:trans("section_your_apps"),sectionType:"",url:"/services/apps/by/me/",aliases:[]},{name:trans("section_recent_activity"),sectionType:"activity",url:"/activity/",aliases:[]},{name:trans("section_photos_of_you"),sectionType:"photos",url:"/photosof/me/",aliases:[]},{name:trans("section_upload_photos"),sectionType:"photos",url:"/photos/upload/",aliases:["Uploadr",trans("section_alias_upload")]},{name:trans("section_your_account"),sectionType:"text",url:"/account/",aliases:["Settings","Preferences",trans("section_alias_settings"),trans("section_alias_preferences")]},{name:trans("section_your_profile"),sectionType:"",url:"/people/me/",aliases:[]},{name:trans("section_flickrmail"),sectionType:"text",url:"/mail/",aliases:[]},{name:trans("section_organize_and_create"),sectionType:"photos",url:"/photos/organize/",aliases:["Batch",trans("section_alias_batch")]},{name:trans("section_prints_and_photo_products"),sectionType:"photos",url:"/photos/organize/?start_tab=print",aliases:["Snapfish","Prints","Calendar","Book","Buy",trans("section_alias_prints"),trans("section_alias_calendar"),trans("section_alias_book"),trans("section_alias_buy")]},{name:trans("section_contacts"),sectionType:"photos",url:"/photos/contacts/",aliases:[]},{name:trans("section_photos_of_your_contacts"),sectionType:"photos",url:"/photosof/contacts/",aliases:[]},{name:trans("section_contact_list"),sectionType:"contacts",url:"/people/me/contacts/",aliases:[]},{name:trans("section_find_your_friends"),sectionType:"contacts",url:"/import/people/",aliases:["Facebook","Gmail","Hotmail","Yahoo Mail"]},{name:trans("section_invite_your_friends"),sectionType:"contacts",url:"/invite/",aliases:[]},{name:trans("section_invite_history"),sectionType:"text",url:"/invite/history/",aliases:[]},{name:trans("section_guest_pass_history"),sectionType:"text",url:"/invite/history/guests/",aliases:["Guestpass"]},{name:trans("section_your_groups"),sectionType:"photos",url:"/groups/",aliases:[]},{name:trans("section_recent_changes_in_your_groups"),sectionType:"activity",url:"/recent.gne",aliases:[]},{name:trans("section_create_a_new_group"),sectionType:"text",url:"/groups_create.gne",aliases:[]},{name:trans("section_the_tour"),sectionType:"text",url:"/tour/",aliases:[]},{name:trans("section_explore"),sectionType:"photos",url:"/explore/",aliases:[]},{name:trans("section_last_7_days_interesting"),sectionType:"photos",url:"/explore/interesting/7days/",aliases:[]},{name:trans("section_popular_tags"),sectionType:"photos",url:"/photos/tags/",aliases:[]},{name:trans("section_most_recent_uploads_to_flickr"),sectionType:"photos",url:"/photos/",aliases:[]},{name:trans("section_video_on_flickr"),sectionType:"video",url:"/explore/video/",aliases:[]},{name:trans("section_galleries"),sectionType:"photos",url:"/galleries/",aliases:[]},{name:trans("section_explore_analog"),sectionType:"photos",url:"/analog/",aliases:["Film",trans("section_alias_film")]},{name:trans("section_world_map"),sectionType:"map",url:"/map/",aliases:[]},{name:trans("section_places"),sectionType:"map",url:"/places/",aliases:[]},{name:trans("section_the_commons"),sectionType:"photos",url:"/commons/",aliases:[]},{name:trans("section_creative_commons"),sectionType:"photos",url:"/creativecommons/",aliases:["CC","License",trans("section_alias_license")]},{name:trans("section_flickrblog"),sectionType:"photos",url:"http://blog.flickr.com/",aliases:[]},{name:trans("section_getty_images"),sectionType:"photos",url:"/gettyimages/",aliases:["License","Buy","Sell",trans("section_alias_license"),trans("section_alias_buy"),trans("section_alias_sell")]},{name:trans("section_code_flickr"),sectionType:"code",url:"http://code.flickr.com/",aliases:["API","Developer","Programming","Documentation",trans("section_alias_developer"),trans("section_alias_programming"),trans("section_alias_documentation")]},{name:trans("section_the_app_garden"),sectionType:"text",url:"/services/",aliases:["Apps"]},{name:trans("section_camera_finder"),sectionType:"text",url:"/cameras/",aliases:[]},{name:trans("section_developer_guidelines"),sectionType:"code",url:"/services/developer/",aliases:["API","Programming","Code","Documentation",trans("section_alias_programming"),trans("section_alias_code"),trans("section_alias_documentation")]},{name:trans("section_api_docs"),sectionType:"code",url:"/services/api/",aliases:["API","Developer","Programming","Code","Documentation",trans("section_alias_developer"),trans("section_alias_programming"),trans("section_alias_code"),trans("section_alias_documentation")]},{name:trans("section_feeds"),sectionType:"text",url:"/services/feeds/",aliases:["RSS","Atom","Data"]},{name:trans("section_help"),sectionType:"text",url:"/help/",aliases:[]},{name:trans("section_community_guidelines"),sectionType:"text",url:"/help/guidelines/",aliases:[]},{name:trans("section_the_help_forum"),sectionType:"text",url:"/help/forum/",aliases:[]},{name:trans("section_faq"),sectionType:"text",url:"/help/faq/",aliases:["Frequently"]},{name:trans("section_tools"),sectionType:"text",url:"/tools/",aliases:["Upload","Plug-in","Mac","Windows",trans("section_alias_upload"),trans("section_alias_plugin")]},{name:trans("section_about_flickr"),sectionType:"meta",url:"/about/",aliases:["Staff",trans("section_alias_staff")]},{name:trans("section_jobs"),sectionType:"meta",url:"/jobs/",aliases:["Career","Work",trans("section_alias_career"),trans("section_alias_work")]},{name:trans("section_mobile"),sectionType:"",url:"/mobile/",aliases:["Cellphone"]},{name:"Android",sectionType:"",url:"/android/",aliases:[]}],Y.extend(Y.NavSelecta,Y.BoSelecta3,proto,statik)},"0.0.1",{requires:F.config.modules["nav-selecta"].requires||[],optional:F.config.modules["nav-selecta"].optional||[]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-base",function(e,t){function p(){this._init.apply(this,arguments)}function d(e){return n.type(e)==="object"}var n=e.Lang,r=e.Object,i=YUI.namespace("Env.History"),s=e.Array,o=e.config.doc,u=o.documentMode,a=e.config.win,f={merge:!0},l="change",c="add",h="replace";e.augment(p,e.EventTarget,null,null,{emitFacade:!0,prefix:"history",preventable:!1,queueable:!0}),i._state||(i._state={}),p.NAME="historyBase",p.SRC_ADD=c,p.SRC_REPLACE=h,p.html5=!!(a.history&&a.history.pushState&&a.history.replaceState&&("onpopstate"in a||e.UA.gecko>=2)&&(!e.UA.android||e.UA.android>=2.4)),p.nativeHashChange=("onhashchange"in a||"onhashchange"in o)&&(!u||u>7),e.mix(p.prototype,{_init:function(e){var t;e=this._config=e||{},this.force=!!e.force,t=this._initialState=this._initialState||e.initialState||null,this.publish(l,{broadcast:2,defaultFn:this._defChangeFn}),t&&this.replace(t)},add:function(){var e=s(arguments,0,!0);return e.unshift(c),this._change.apply(this,e)},addValue:function(e,t,n){var r={};return r[e]=t,this._change(c,r,n)},get:function(t){var n=i._state,s=d(n);return t?s&&r.owns(n,t)?n[t]:undefined:s?e.mix({},n,!0):n},replace:function(){var e=s(arguments,0,!0);return e.unshift(h),this._change.apply(this,e)},replaceValue:function(e,t,n){var r={};return r[e]=t,this._change(h,r,n)},_change:function(t,n,r){return r=r?e.merge(f,r):f,r.merge&&d(n)&&d(i._state)&&(n=e.merge(i._state,n)),this._resolveChanges(t,n,r),this},_fireEvents:function(e,t,n){this.fire(l,{_options:n,changed:t.changed,newVal:t.newState,prevVal:t.prevState,removed:t.removed,src:e}),r.each(t.changed,function(t,n){this._fireChangeEvent(e,n,t)},this),r.each(t.removed,function(t,n){this._fireRemoveEvent(e,n,t)},this)},_fireChangeEvent:function(e,t,n){this.fire(t+"Change",{newVal:n.newVal,prevVal:n.prevVal,src:e})},_fireRemoveEvent:function(e,t,n){this.fire(t+"Remove",{prevVal:n,src:e})},_resolveChanges:function(e,t,n){var s={},o,u=i._state,a={};t||(t={}),n||(n={}),d(t)&&d(u)?(r.each(t,function(e,t){var n=u[t];e!==n&&(s[t]={newVal:e,prevVal:n},o=!0)},this),r.each(u,function(e,n){if(!r.owns(t,n)||t[n]===null)delete t[n],a[n]=e,o=!0},this)):o=t!==u,(o||this.force)&&this._fireEvents(e,{changed:s,newState:t,prevState:u,removed:a},n)},_storeState:function(e,t){i._state=t||{}},_defChangeFn:function(e){this._storeState(e.src,e.newVal,e._options)}},!0),e.HistoryBase=p},"3.11.0",{requires:["event-custom-complex"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-html5",function(e,t){function a(){a.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.config.win,s=e.config.useHistoryHTML5,o="popstate",u=n.SRC_REPLACE;e.extend(a,n,{_init:function(t){var n=i.history.state;e.Object.isEmpty(n)&&(n=null),t||(t={}),t.initialState&&r.type(t.initialState)==="object"&&r.type(n)==="object"?this._initialState=e.merge(t.initialState,n):this._initialState=n,e.on("popstate",this._onPopState,i,this),a.superclass._init.apply(this,arguments)},_storeState:function(t,n,r){t!==o&&i.history[t===u?"replaceState":"pushState"](n,r.title||e.config.doc.title||"",r.url||null),a.superclass._storeState.apply(this,arguments)},_onPopState:function(e){this._resolveChanges(o,e._event.state||null)}},{NAME:"historyhtml5",SRC_POPSTATE:o}),e.Node.DOM_EVENTS.popstate||(e.Node.DOM_EVENTS.popstate=1),e.HistoryHTML5=a;if(s===!0||s!==!1&&n.html5)e.History=a},"3.11.0",{optional:["json"],requires:["event-base","history-base","node-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-hash",function(e,t){function p(){p.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.Array,s=e.Object,o=YUI.namespace("Env.HistoryHash"),u="hash",a,f,l,c=e.config.win,h=e.config.useHistoryHTML5;e.extend(p,n,{_init:function(t){var n=p.parseHash();t=t||{},this._initialState=t.initialState?e.merge(t.initialState,n):n,e.after("hashchange",e.bind(this._afterHashChange,this),c),p.superclass._init.apply(this,arguments)},_change:function(e,t,n){return s.each(t,function(e,n){r.isValue(e)&&(t[n]=e.toString())}),p.superclass._change.call(this,e,t,n)},_storeState:function(e,t){var r=p.decode,i=p.createHash(t);p.superclass._storeState.apply(this,arguments),e!==u&&r(p.getHash())!==r(i)&&p[e===n.SRC_REPLACE?"replaceHash":"setHash"](i)},_afterHashChange:function(e){this._resolveChanges(u,p.parseHash(e.newHash),{})}},{NAME:"historyHash",SRC_HASH:u,hashPrefix:"",_REGEX_HASH:/([^\?#&]+)=([^&]+)/g,createHash:function(e){var t=p.encode,n=[];return s.each(e,function(e,i){r.isValue(e)&&n.push(t(i)+"="+t(e))}),n.join("&")},decode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},encode:function(e){return encodeURIComponent(e).replace(/%20/g,"+")},getHash:e.UA.gecko?function(){var t=e.getLocation(),n=/#(.*)$/.exec(t.href),r=n&&n[1]||"",i=p.hashPrefix;return i&&r.indexOf(i)===0?r.replace(i,""):r}:function(){var t=e.getLocation(),n=t.hash.substring(1),r=p.hashPrefix;return r&&n.indexOf(r)===0?n.replace(r,""):n},getUrl:function(){return location.href},parseHash:function(e){var t=p.decode,n,i,s,o,u={},a=p.hashPrefix,f;e=r.isValue(e)?e:p.getHash();if(a){f=e.indexOf(a);if(f===0||f===1&&e.charAt(0)==="#")e=e.replace(a,"")}s=e.match(p._REGEX_HASH)||[];for(n=0,i=s.length;n<i;++n)o=s[n].split("="),u[t(o[0])]=t(o[1]);return u},replaceHash:function(t){var n=e.getLocation(),r=n.href.replace(/#.*$/,"");t.charAt(0)==="#"&&(t=t.substring(1)),n.replace(r+"#"+(p.hashPrefix||"")+t)},setHash:function(t){var n=e.getLocation();t.charAt(0)==="#"&&(t=t.substring(1)),n.hash=(p.hashPrefix||"")+t}}),a=o._notifiers,a||(a=o._notifiers=[]),e.Event.define("hashchange",{on:function(t,n,r){(t.compareTo(c)||t.compareTo(e.config.doc.body))&&a.push(r)},detach:function(e,t,n){var r=i.indexOf(a,n);r!==-1&&a.splice(r,1)}}),f=p.getHash(),l=p.getUrl(),n.nativeHashChange?o._hashHandle||(o._hashHandle=e.Event.attach("hashchange",function(e){var t=p.getHash(),n=p.getUrl();i.each(a.concat(),function(r){r.fire({_event:e,oldHash:f,oldUrl:l,newHash:t,newUrl:n})}),f=t,l=n},c)):o._hashPoll||(o._hashPoll=e.later(50,null,function(){var e=p.getHash(),t,n;f!==e&&(n=p.getUrl(),t={oldHash:f,oldUrl:l,newHash:e,newUrl:n},f=e,l=n,i.each(a.concat(),function(e){e.fire(t)}))},null,!0)),e.HistoryHash=p;if(h===!1||!e.History&&h!==!0&&(!n.html5||!e.HistoryHTML5))e.History=p},"3.11.0",{requires:["event-synthetic","history-base","yui-later"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-hash-ie",function(e,t){if(e.UA.ie&&!e.HistoryBase.nativeHashChange){var n=e.Do,r=YUI.namespace("Env.HistoryHash"),i=e.HistoryHash,s=r._iframe,o=e.config.win;i.getIframeHash=function(){if(!s||!s.contentWindow)return"";var e=i.hashPrefix,t=s.contentWindow.location.hash.substr(1);return e&&t.indexOf(e)===0?t.replace(e,""):t},i._updateIframe=function(e,t){var n=s&&s.contentWindow&&s.contentWindow.document,r=n&&n.location;if(!n||!r)return;t?r.replace(e.charAt(0)==="#"?e:"#"+e):(n.open().close(),r.hash=e)},n.before(i._updateIframe,i,"replaceHash",i,!0),s||e.on("domready",function(){var t=i.getHash();s=r._iframe=e.Node.getDOMNode(e.Node.create('<iframe src="javascript:0" style="display:none" height="0" width="0" tabindex="-1" title="empty"/>')),e.config.doc.documentElement.appendChild(s),i._updateIframe(t||"#"),e.on("hashchange",function(e){t=e.newHash,i.getIframeHash()!==t&&i._updateIframe(t)},o),e.later(50,null,function(){var e=i.getIframeHash();e!==t&&i.setHash(e)},null,!0)})}},"3.11.0",{requires:["history-hash","node-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("router",function(e,t){function f(){f.superclass.constructor.apply(this,arguments)}var n=e.HistoryHash,r=e.QueryString,i=e.Array,s=e.config.win,o=[],u=[],a="ready";e.Router=e.extend(f,e.Base,{_regexPathParam:/([:*])([\w\-]+)?/g,_regexUrlQuery:/\?([^#]*).*$/,_regexUrlOrigin:/^(?:[^\/#?:]+:\/\/|\/\/)[^\/]*/,initializer:function(t){var n=this;n._html5=n.get("html5"),n._routes=[],n._url=n._getURL(),n._setRoutes(t&&t.routes?t.routes:n.get("routes")),n._html5?(n._history=new e.HistoryHTML5({force:!0}),n._historyEvents=e.after("history:change",n._afterHistoryChange,n)):n._historyEvents=e.on("hashchange",n._afterHistoryChange,s,n),n.publish(a,{defaultFn:n._defReadyFn,fireOnce:!0,preventable:!1}),n.once("initializedChange",function(){e.once("load",function(){setTimeout(function(){n.fire(a,{dispatched:!!n._dispatched})},20)})}),o.push(this)},destructor:function(){var e=i.indexOf(o,this);e>-1&&o.splice(e,1),this._historyEvents&&this._historyEvents.detach()},dispatch:function(){return this.once(a,function(){this._ready=!0,this.upgrade()||this._dispatch(this._getPath(),this._getURL())}),this},getPath:function(){return this._getPath()},hasRoute:function(e){var t;return this._hasSameOrigin(e)?(this._html5||(e=this._upgradeURL(e)),t=this.removeQuery(this.removeRoot(e)),!!this.match(t).length):!1},match:function(e){return i.filter(this._routes,function(t){return e.search(t.regex)>-1})},removeRoot:function(e){var t=this.get("root");return e=e.replace(this._regexUrlOrigin,""),t&&e.indexOf(t)===0&&(e=e.substring(t.length)),e.charAt(0)==="/"?e:"/"+e},removeQuery:function(e){return e.replace(/\?.*$/,"")},replace:function(e){return this._queue(e,!0)},route:function(e,t){t=i.flatten(i(arguments,1,!0));var n=[];return this._routes.push({callbacks:t,keys:n,path:e,regex:this._getRegex(e,n),callback:t[0]}),this},save:function(e){return this._queue(e)},upgrade:function(){if(!this._html5)return!1;var e=this._getHashPath();return e?(this.once(a,function(){this.replace(e)}),!0):!1},_decode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},_dequeue:function(){var t=this,n;return YUI.Env.windowLoaded?(n=u.shift(),n?n():this):(e.once("load",function(){t._dequeue()}),this)},_dispatch:function(t,n,r){var s=this,o=s._decode,u=s.match(t),a=[],f,l,c;return s._dispatching=s._dispatched=!0,!u||!u.length?(s._dispatching=!1,s):(l=s._getRequest(t,n,r),c=s._getResponse(l),l.next=function(n){var r,h,p;if(n)n==="route"?(a=[],l.next()):e.error(n);else if(r=a.shift())typeof r=="string"&&(h=r,r=s[h],r||e.error("Router: Callback not found: "+h,null,"router")),l.pendingCallbacks=a.length,r.call(s,l,c,l.next);else if(p=u.shift())a=p.callbacks.concat(),f=i.map(p.regex.exec(t)||[],o),f.length===p.keys.length+1?l.params=i.hash(p.keys,f.slice(1)):l.params=f.concat(),l.pendingRoutes=u.length,l.next()},l.next(),s._dispatching=!1,s._dequeue())},_getHashPath:function(e){return e||(e=n.getHash()),e&&e.charAt(0)==="/"?this._joinURL(e):""},_getOrigin:function(){var t=e.getLocation();return t.origin||t.protocol+"//"+t.host},_getPath:function(){var t=!this._html5&&this._getHashPath()||e.getLocation().pathname;return this.removeQuery(this.removeRoot(t))},_getPathRoot:function(){var t="/",n=e.getLocation().pathname,r;return n.charAt(n.length-1)===t?n:(r=n.split(t),r.pop(),r.join(t)+t)},_getQuery:function(){var t=e.getLocation(),r,i;return this._html5?t.search.substring(1):(r=n.getHash(),i=r.match(this._regexUrlQuery),r&&i?i[1]:t.search.substring(1))},_getRegex:function(e,t){return e instanceof RegExp?e:e==="*"?/.*/:(e=e.replace(this._regexPathParam,function(e,n,r){return r?(t.push(r),n==="*"?"(.*?)":"([^/#?]*)"):n==="*"?".*":e}),new RegExp("^"+e+"$"))},_getRequest:function(e,t,n){return{path:e,query:this._parseQuery(this._getQuery()),url:t,src:n}},_getResponse:function(e){var t=function(){return e.next.apply(this,arguments)};return t.req=e,t},_getRoutes:function(){return this._routes.concat()},_getURL:function(){var t=e.getLocation().toString();return this._html5||(t=this._upgradeURL(t)),t},_hasSameOrigin:function(t){var n=(t&&t.match(this._regexUrlOrigin)||[])[0];return n&&n.indexOf("//")===0&&(n=e.getLocation().protocol+n),!n||n===this._getOrigin()},_joinURL:function(e){var t=this.get("root");return e=this.removeRoot(e),e.charAt(0)==="/"&&(e=e.substring(1)),t&&t.charAt(t.length-1)==="/"?t+e:t+"/"+e},_normalizePath:function(e){var t="..",n="/",r,i,s,o,u,a;if(!e||e===n)return n;o=e.split(n),a=[];for(r=0,i=o.length;r<i;++r)u=o[r],u===t?a.pop():u&&a.push(u);return s=n+a.join(n),s!==n&&e.charAt(e.length-1)===n&&(s+=n),s},_parseQuery:r&&r.parse?r.parse:function(e){var t=this._decode,n=e.split("&"),r=0,i=n.length,s={},o;for(;r<i;++r)o=n[r].split("="),o[0]&&(s[t(o[0])]=t(o[1]||""));return s},_queue:function(){var t=arguments,n=this;return u.push(function(){return n._html5?e.UA.ios&&e.UA.ios<5?n._save.apply(n,t):setTimeout(function(){n._save.apply(n,t)},1):(n._dispatching=!0,n._save.apply(n,t)),n}),this._dispatching?this:this._dequeue()},_resolvePath:function(t){return t?(t.charAt(0)!=="/"&&(t=this._getPathRoot()+t),this._normalizePath(t)):e.getLocation().pathname},_resolveURL:function(t){var n=t&&t.match(this._regexURL),r,i,s,o,u;return n?(r=n[1],i=n[2],s=n[3],o=n[4],r?(r.indexOf("//")===0&&(r=e.getLocation().protocol+r),r+(i||"/")+(s||"")+(o||"")):(u=this._getOrigin()+this._resolvePath(i),i||s?u+(s||"")+(o||""):(s=this._getQuery(),u+(s?"?"+s:"")+(o||"")))):e.getLocation().toString()},_save:function(t,r){var i=typeof t=="string",s,o,u;if(i&&!this._hasSameOrigin(t))return e.error("Security error: The new URL must be of the same origin as the current URL."),this;i&&(t=this._joinURL(t)),this._ready=!0;if(this._html5)this._history[r?"replace":"add"](null,{url:t});else{s=e.getLocation().pathname,o=this.get("root"),u=n.getHash(),i||(t=u);if(o===s||o===this._getPathRoot())t=this.removeRoot(t);t===u?e.Router.dispatch():n[r?"replaceHash":"setHash"](t)}return this},_setRoutes:function(e){return this._routes=[],i.each(e,function(e){var t=e.callbacks||e.callback
;this.route(e.path,t)},this),this._routes.concat()},_upgradeURL:function(t){if(!this._hasSameOrigin(t))return t;var n=(t.match(/#(.*)$/)||[])[1]||"",r=e.HistoryHash.hashPrefix,i;r&&n.indexOf(r)===0&&(n=n.replace(r,""));if(n){i=this._getHashPath(n);if(i)return this._resolveURL(i)}return t},_afterHistoryChange:function(e){var t=this,n=e.src,r=t._url,i=t._getURL();t._url=i;if(n==="popstate"&&(!t._ready||r.replace(/#.*$/,"")===i.replace(/#.*$/,"")))return;t._dispatch(t._getPath(),i,n)},_defReadyFn:function(e){this._ready=!0}},{NAME:"router",ATTRS:{html5:{valueFn:function(){return e.Router.html5},writeOnce:"initOnly"},root:{value:""},routes:{value:[],getter:"_getRoutes",setter:"_setRoutes"}},html5:e.HistoryBase.html5&&(!e.UA.android||e.UA.android>=3),_instances:o,dispatch:function(){var e,t,n;for(e=0,t=o.length;e<t;e+=1)n=o[e],n&&n._dispatch(n._getPath(),n._getURL())}}),e.Controller=e.Router},"3.11.0",{optional:["querystring-parse"],requires:["array-extras","base-build","history"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("pjax-base",function(e,t){function s(){}var n=e.config.win,r=e.ClassNameManager.getClassName("pjax"),i="navigate";s.prototype={_regexURL:/^((?:[^\/#?:]+:\/\/|\/\/)[^\/]*)?([^?#]*)(\?[^#]*)?(#.*)?$/,initializer:function(){this.publish(i,{defaultFn:this._defNavigateFn}),this.get("html5")&&this._pjaxBindUI()},destructor:function(){this._pjaxEvents&&this._pjaxEvents.detach()},navigate:function(t,n){return t=this._resolveURL(t),this._navigate(t,n)?!0:(this._hasSameOrigin(t)||e.error("Security error: The new URL must be of the same origin as the current URL."),!1)},_isLinkSameOrigin:function(t){var n=e.getLocation(),r=n.protocol,i=n.hostname,s=parseInt(n.port,10)||null,o;return t.get("protocol")!==r||t.get("hostname")!==i?!1:(o=parseInt(t.get("port"),10)||null,r==="http:"?(s||(s=80),o||(o=80)):r==="https:"&&(s||(s=443),o||(o=443)),o===s)},_navigate:function(t,r){t=this._upgradeURL(t);if(!this.hasRoute(t))return!1;r=e.merge(r,{url:t});var s=this._getURL(),o,u;u=t.replace(/(#.*)$/,function(e,t,n){return o=t,e.substring(n)});if(o&&u===s.replace(/#.*$/,"")){if(!this.get("navigateOnHash"))return!1;r.hash=o}return"replace"in r||(r.replace=t===s),this.get("html5")||r.force?this.fire(i,r):n&&(r.replace?n.location.replace(t):n.location=t),!0},_pjaxBindUI:function(){this._pjaxEvents||(this._pjaxEvents=e.one("body").delegate("click",this._onLinkClick,this.get("linkSelector"),this))},_defNavigateFn:function(e){this[e.replace?"replace":"save"](e.url),n&&this.get("scrollToTop")&&setTimeout(function(){n.scroll(0,0)},1)},_onLinkClick:function(e){var t,n,r;if(e.button!==1||e.ctrlKey||e.metaKey)return;t=e.currentTarget;if(t.get("tagName").toUpperCase()!=="A")return;if(!this._isLinkSameOrigin(t))return;n=t.get("href"),n&&(r=this._navigate(n,{originEvent:e}),r&&e.preventDefault())}},s.ATTRS={linkSelector:{value:"a."+r,writeOnce:"initOnly"},navigateOnHash:{value:!1},scrollToTop:{value:!0}},e.PjaxBase=s},"3.11.0",{requires:["classnamemanager","node-event-delegate","router"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("view",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}e.View=e.extend(n,e.Base,{containerTemplate:"<div/>",events:{},template:"",_allowAdHocAttrs:!0,initializer:function(t){t||(t={}),t.containerTemplate&&(this.containerTemplate=t.containerTemplate),t.template&&(this.template=t.template),this.events=t.events?e.merge(this.events,t.events):this.events,this.after("containerChange",this._afterContainerChange)},destroy:function(e){return e&&(e.remove||e["delete"])&&this.onceAfter("destroy",function(){this._destroyContainer()}),n.superclass.destroy.call(this)},destructor:function(){this.detachEvents(),delete this._container},attachEvents:function(t){var n=this.get("container"),r=e.Object.owns,i,s,o,u;this.detachEvents(),t||(t=this.events);for(u in t){if(!r(t,u))continue;s=t[u];for(o in s){if(!r(s,o))continue;i=s[o],typeof i=="string"&&(i=this[i]);if(!i)continue;this._attachedViewEvents.push(n.delegate(o,i,u,this))}}return this},create:function(t){return t?e.one(t):e.Node.create(this.containerTemplate)},detachEvents:function(){return e.Array.each(this._attachedViewEvents,function(e){e&&e.detach()}),this._attachedViewEvents=[],this},remove:function(){var e=this.get("container");return e&&e.remove(),this},render:function(){return this},_destroyContainer:function(){var e=this.get("container");e&&e.remove(!0)},_getContainer:function(e){return this._container||(e?(this._container=e,this.attachEvents()):(e=this._container=this.create(),this._set("container",e))),e},_afterContainerChange:function(){this.attachEvents(this.events)}},{NAME:"view",ATTRS:{container:{getter:"_getContainer",setter:e.one,writeOnce:!0}},_NON_ATTRS_CFG:["containerTemplate","events","template"]})},"3.11.0",{requires:["base-build","node-event-delegate"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("app-base",function(e,t){var n=e.Lang,r=e.Object,i=e.PjaxBase,s=e.Router,o=e.View,u=e.ClassNameManager.getClassName,a=e.config.win,f;f=e.Base.create("app",e.Base,[o,s,i],{views:{},initializer:function(t){function i(t,r){n[r]=e.merge(n[r],t)}t||(t={});var n={};r.each(this.views,i),r.each(t.views,i),this.views=n,this._viewInfoMap={},this.after("activeViewChange",e.bind("_afterActiveViewChange",this)),this.get("serverRouting")||this._pjaxBindUI()},createView:function(t,i){var s=this.getViewInfo(t),u=s&&s.type||o,a,f;return a=n.isString(u)?r.getValue(e,u.split(".")):u,f=new a(i),this._viewInfoMap[e.stamp(f,!0)]=s,f},getViewInfo:function(t){return n.isString(t)?this.views[t]:t&&this._viewInfoMap[e.stamp(t,!0)]},render:function(){var t=e.App.CLASS_NAMES,n=this.get("container"),r=this.get("viewContainer"),i=this.get("activeView"),s=i&&i.get("container"),o=n.compareTo(r);return n.addClass(t.app),r.addClass(t.views),i&&!r.contains(s)&&r.appendChild(s),!n.contains(r)&&!o&&n.appendChild(r),this},showView:function(t,r,i,s){var o,u;return i||(i={}),s?i=e.merge(i,{callback:s}):n.isFunction(i)&&(i={callback:i}),n.isString(t)&&(o=this.getViewInfo(t),o&&o.preserve&&o.instance?(t=o.instance,this._viewInfoMap[e.stamp(t,!0)]=o):(t=this.createView(t,r),u=!0)),i.update&&!u&&t.setAttrs(r),"render"in i?i.render&&t.render():u&&t.render(),this._set("activeView",t,{options:i})},_attachView:function(e,t){if(!e)return;var n=this.getViewInfo(e),r=this.get("viewContainer");e.addTarget(this),n&&(n.instance=e),r[t?"prepend":"append"](e.get("container"))},_destroyContainer:function(){var t=e.App.CLASS_NAMES,n=this.get("container"),r=this.get("viewContainer"),i=n.compareTo(r);if(e.one("body").compareTo(n)){this.detachEvents(),n.removeClass(t.app),i?n.removeClass(t.views):r.remove(!0);return}r.remove(!0),i||n.remove(!0)},_detachView:function(t){if(!t)return;var n=this.getViewInfo(t)||{};n.preserve?t.remove():(t.destroy({remove:!0}),delete this._viewInfoMap[e.stamp(t,!0)],t===n.instance&&delete n.instance),t.removeTarget(this)},_getViewContainer:function(e){return!e&&!this._viewContainer&&(e=this._viewContainer=this.create(),this._set("viewContainer",e)),e},_initHtml5:function(){return this.get("serverRouting")===!1?!1:s.html5},_isChildView:function(e,t){var n=this.getViewInfo(e),r=this.getViewInfo(t);return n&&r?this.getViewInfo(n.parent)===r:!1},_isParentView:function(e,t){var n=this.getViewInfo(e),r=this.getViewInfo(t);return n&&r?this.getViewInfo(r.parent)===n:!1},_navigate:function(t,n){return this.get("serverRouting")||(n=e.merge({force:!0},n)),i.prototype._navigate.call(this,t,n)},_save:function(t,n){var r;return this.get("serverRouting")&&!this.get("html5")?this._hasSameOrigin(t)?(a&&(r=this._joinURL(t||""),n?a.location.replace(r):a.location=r),this):(e.error("Security error: The new URL must be of the same origin as the current URL."),this):s.prototype._save.apply(this,arguments)},_uiSetActiveView:function(e,t,n){n||(n={});var r=n.callback,i=this._isChildView(e,t),s=!i&&this._isParentView(e,t),o=!!n.prepend||s;if(e===t)return r&&r.call(this,e);this._attachView(e,o),this._detachView(t),r&&r.call(this,e)},_afterActiveViewChange:function(e){this._uiSetActiveView(e.newVal,e.prevVal,e.options)}},{ATTRS:{activeView:{value:null,readOnly:!0},container:{valueFn:function(){return e.one("body")}},html5:{valueFn:"_initHtml5"},linkSelector:{value:"a"},serverRouting:{valueFn:function(){return e.App.serverRouting},writeOnce:"initOnly"},viewContainer:{getter:"_getViewContainer",setter:e.one,writeOnce:!0}},_NON_ATTRS_CFG:["views"]}),e.namespace("App").Base=f,e.App=e.mix(e.Base.create("app",f,[]),e.App,!0),e.App.CLASS_NAMES={app:u("app"),views:u("app","views")}},"3.11.0",{requires:["classnamemanager","pjax-base","router","view"]});
YUI.add("flickr-app",function(Y){var app;function saveIfRoutable(href){var path;return path=app.removeRoot(href),!!app.hasRoute(path)&&(app.save(path),!0)}function replaceIfRoutable(href){var path;return path=app.removeRoot(href),!!app.hasRoute(path)&&(app.replace(path),!0)}function upgradeClick(e){var anchorNode,href,path;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))return!(!(href=(anchorNode=e.target.ancestor("a",!0))&&anchorNode.getAttribute("href"))||(path=app.removeRoot(href),!app.hasRoute(path)))&&(e.preventDefault(),app.save(path),!0)}Y.FlickrApp={init:function(){app||((app=new Y.App({serverRouting:!0,linkSelector:!1,scrollToTop:!1})).upgradeClick=upgradeClick,app.saveIfRoutable=saveIfRoutable,app.replaceIfRoutable=replaceIfRoutable,Y.FlickrApp=app,"hartsell"===Y.config.flickr.user.admin_user&&(F.FlickrApp=app))}}},"0.0.1",{requires:F.config.modules["flickr-app"].requires||[],optional:F.config.modules["flickr-app"].optional||[]});YUI.add("flickr-tooltips",function(Y){var g_tooltip_elm=null,g_tooltip_inner_elm=null,g_tooltip_showing=0,g_tooltip_trigger_elm=null,g_tip_elm=null;function show_tooltip(trigger_elm,tip_elm_id,len,extra_txt,className){var full_w,s_w,x,y;if(trigger_elm=Y.one(trigger_elm),className=className||"ToolTip",g_tooltip_elm||(g_tooltip_elm=document.createElement("div"),g_tooltip_inner_elm=document.createElement("div"),g_tooltip_elm.style.display="none",g_tooltip_elm.style.zIndex="200000",document.body.appendChild(g_tooltip_elm),g_tooltip_elm.appendChild(g_tooltip_inner_elm)),"hidden"!==trigger_elm.getStyle("visibility")){if(g_tooltip_elm.className=className,g_tooltip_showing){if(g_tooltip_trigger_elm===trigger_elm._node)return void hide_tooltip();hide_tooltip()}len+=(extra_txt=void 0===extra_txt?"":extra_txt).length,g_tip_elm=document.getElementById(tip_elm_id),g_tooltip_inner_elm.innerHTML=g_tip_elm.innerHTML+extra_txt,g_tooltip_inner_elm.style.width="auto",g_tooltip_elm.style.display="block",g_tooltip_elm.style.visibility="hidden","ToolTipSmall"!==className&&(w=150,200<len?w=300:100<len&&(w=200),g_tooltip_inner_elm.style.width=w+"px"),full_w=g_tooltip_elm.offsetWidth,x=trigger_elm.getX(),y=trigger_elm.getY(),"ToolTipSmall"===className?(x-=Math.round((full_w-trigger_elm.get("offsetWidth"))/2)-5,"below"===trigger_elm._node.tip_placement?y+=trigger_elm.get("offsetHeight")+10:y-=22):y+=20,(s_w=function(){{if(window.innerWidth)return window.innerWidth;if(document.documentElement.clientWidth)return document.documentElement.clientWidth;if(document.body.clientWidth)return document.body.clientWidth}}()-40)<x+full_w&&(x=s_w-full_w),x=Math.max(10,x),g_tooltip_elm.style.left=x+"px",g_tooltip_elm.style.top=y+"px",g_tooltip_showing=1,g_tooltip_elm.style.display="block",g_tooltip_elm.style.visibility="visible",g_tooltip_trigger_elm=trigger_elm._node,document.onmousedown=doc_mousedown}}function doc_mousedown(e){var e_src=function(e){if(e&&e.target)return e.target;if(e&&e.srcElement)return e.srcElement;if(window.event)return window.event.srcElement;return null}(e);e_src===g_tooltip_trigger_elm||function(el){var p=el;for(;p;){if(p.href)return 1;p=p.parentNode}return 0}(e_src)&&function(el){var p=el;for(;p;){if(p===g_tooltip_elm)return 1;p=p.parentNode}return 0}(e_src)?document.onmousedown=function(){}:hide_tooltip()}function hide_tooltip(if_trigger_elm){if(!if_trigger_elm||g_tooltip_trigger_elm===if_trigger_elm)return document.onmousedown=function(){},!!g_tooltip_elm&&(g_tooltip_showing=0,g_tooltip_elm.style.display="none",!(g_tooltip_trigger_elm="null"))}Y.tooltips={init:function(){window.show_tooltip=show_tooltip}}},"0.0.1",{requires:["node","event","event-delegate"]});YUI.add("cache-simple",function(Y){CacheSimple=function(){},CacheSimple.prototype={cache:{},add:function(key,value,payload){this.cache[key]={response:value,payload:payload}},retrieve:function(key){return this.cache[key]},clear:function(){this.cache={}}},Y.CacheSimple=CacheSimple},"0.0.1");YUI.add("node-visibility",function(Y){var NodeVisibility,handlers,dispatcher,isHiddenByOverflow,isVisible,onVisible,validateThreshold,animScrollIntoView,navigationHeight,eyebrowHeight,win=window,doc=window.document;function getViewportRegion(){var region=getViewportRegion.region;return region||((region={}).height=Y.DOM.winHeight(),region.width=Y.DOM.winWidth(),region.top=Math.max(doc.body.scrollTop||0,doc.documentElement.scrollTop||0,win.pageYOffset||0),region.left=Math.max(doc.body.scrollLeft||0,doc.documentElement.scrollLeft||0,win.pageXOffset||0),region.right=region.left+region.width,region.bottom=region.top+region.height,region[0]=region.top,region[1]=region.left,getViewportRegion.region=region),region}function invalidateViewportRegion(){getViewportRegion.region=void 0}function getNodeCache(key){var cache,data;return getNodeCache.cache||(getNodeCache.cache=new Y.CacheSimple),cache=getNodeCache.cache,Y.Lang.isString(key)?(data=cache.retrieve(key))&&data.response&&(new Date).getTime()<data.payload.expires?data.response:null:cache}handlers={resize:[],scroll:[]},eyebrowHeight=F.config.flickr.flags.enable_uh_eyebrow&&Y.one("#eyebrow")?Y.one("#eyebrow").get("offsetHeight"):0,navigationHeight=F.config.flickr.flags.enable_global_nav&&Y.one("#global-nav")?Y.one("#global-nav").get("offsetHeight")+eyebrowHeight:0,dispatcher={register:function(type,func){var index=handlers[type].push(func);return{detach:function(){handlers[type][index]=function(){}}}}},Y.on("scroll",Y.betterThrottle(function(e){Y.Array.each(handlers.scroll,function(o){o(e)})},50)),Y.on("resize",Y.betterThrottle(function(e){Y.Array.each(handlers.resize,function(o){o(e)})},50)),dispatcher.register("resize",invalidateViewportRegion),dispatcher.register("scroll",invalidateViewportRegion),isHiddenByOverflow=function(node,nodeRegion){var ancestor,ancestorOverflow;for(ancestor=node.ancestor();ancestor;ancestor=ancestor.ancestor())if(""!==(ancestorOverflow=ancestor.getStyle("overflow"))&&"visible"!==ancestorOverflow&&(nodeRegion=nodeRegion||node.get("region"),!node.inRegion(ancestor,!1,nodeRegion)))return!0;return!1},isVisible=function(node,threshold){var is_visible,viewportRegion,node_id,node_data,cached_node_data;return is_visible=!0,threshold=threshold?validateThreshold(threshold):[0,0],node_data=(cached_node_data=getNodeCache(node_id=node.toString()))||{},is_visible&&(Y.Lang.isString(node_data.display)||(node_data.display=node.getStyle("display")),Y.Lang.isNumber(node_data.offsetHeight)||(node_data.offsetHeight=node.get("offsetHeight")),Y.Lang.isNumber(node_data.offsetWidth)||(node_data.offsetWidth=node.get("offsetWidth")),"block"!==node_data.display||0!==node_data.offsetHeight&&0!==node_data.offsetWidth||(is_visible=!1)),is_visible&&(viewportRegion=getViewportRegion(),node_data.region||(node_data.region=node.get("region")),node.inRegion(function(region,threshold){var newRegion={};return Y.Lang.isNumber(threshold[0])&&(newRegion.left=region.left-threshold[0],newRegion.right=region.right+threshold[0],newRegion.width=region.width+2*threshold[0],newRegion.width<1&&(newRegion.width=1,newRegion.left=Math.floor((region.right+region.left)/2),newRegion.right=newRegion.left+1),newRegion[0]=newRegion.top),Y.Lang.isNumber(threshold[1])&&(newRegion.top=region.top-threshold[1],newRegion.bottom=region.bottom+threshold[1],newRegion.height=region.height+2*threshold[1],newRegion.height<1&&(newRegion.height=1,newRegion.top=Math.floor((region.bottom+region.top)/2),newRegion.bottom=newRegion.top+1),newRegion[1]=newRegion.left),newRegion}(viewportRegion,threshold),!1,node_data.region)||(is_visible=!1)),is_visible&&(Y.Lang.isBoolean(node_data.hidden_by_overflow)||(node_data.hidden_by_overflow=isHiddenByOverflow(node,node_data.region)),node_data.hidden_by_overflow&&(is_visible=!1)),cached_node_data||function(key,val){!Y.Lang.isString(key)||getNodeCache().add(key,val,{expires:(new Date).getTime()+500})}(node_id,node_data),is_visible},onVisible=function(){var init,uninit,cancel,callIfVisible,callAllVisible,setHandlerProperty,resizeHandle,scrollHandle,initialized=!1,handlers={};return init=function(){initialized||(resizeHandle=dispatcher.register("scroll",callAllVisible),scrollHandle=dispatcher.register("resize",callAllVisible),initialized=!0)},uninit=function(){initialized&&(resizeHandle.detach(),scrollHandle.detach(),initialized=!1)},cancel=function(id){var handler,finished;if(handlers[id]){for(handler in delete handlers[id],finished=!0,handlers)if(handlers.hasOwnProperty(handler)){finished=!1;break}return finished&&uninit(),!0}},callIfVisible=function(id){var handler=handlers[id];Y.Lang.isObject(handler)&&isVisible(handler.node,handler.threshold)&&(handler.callback.call(handler.oScope,handler.arg),cancel(id))},callAllVisible=function(){for(var id in handlers)handlers.hasOwnProperty(id)&&callIfVisible(id)},setHandlerProperty=function(id,property,value){if(Y.Lang.isObject(handlers[id]))return handlers[id][property]=value,!0},function(node,callback,threshold,arg,oScope){var handler,id;return node=Y.one(node),!(!Y.Lang.isObject(node)||!Y.Lang.isFunction(callback))&&(threshold=threshold?validateThreshold(threshold):[0,0],arg=arg||node,!0===oScope&&(oScope=arg),Y.Lang.isObject(oScope)||(oScope=window),init(),handler={node:node,callback:callback,threshold:threshold,arg:arg,oScope:oScope},id=Y.guid(),handlers[id]=handler,Y.later(0,window,callIfVisible,id),{cancel:function(){return cancel(id)},set:function(prop,val){return setHandlerProperty(id,prop,val)},check:function(){return callIfVisible(id)}})}}(),validateThreshold=function(threshold){return Y.Lang.isNumber(threshold)&&(threshold=[threshold,threshold]),Y.Lang.isArray(threshold)&&Y.Lang.isNumber(threshold[0])&&Y.Lang.isNumber(threshold[1])||(threshold=[0,0]),threshold},animScrollIntoView=function(node,align_to_top,top,onfinish,force){var anim,y;return!(!node instanceof Y.Node)&&(node.inViewportRegion(!0)&&!force||(align_to_top="object"==typeof align_to_top?(align_to_bottom=align_to_top.bottom,onfinish=align_to_top.onfinish,align_to_top.top):!!align_to_top,top=Y.Lang.isNumber(top)?top:0,win.setTimeout(function(){Y.Anim?(y=align_to_top?node.getY()-top:align_to_bottom?node.getY()-node.get("winHeight")+5+2*node.get("offsetHeight")+top:node.getY()+node.get("offsetHeight")-node.get("winHeight")+5,y-=navigationHeight,(anim=new Y.Anim({node:Y.one("window"),to:{scroll:[0,y]},duration:.3,easing:Y.Easing.easeOut})).on("end",function(){onfinish&&"function"==typeof onfinish&&onfinish()}),anim.run()):(node.scrollIntoView(align_to_top),onfinish&&"function"==typeof onfinish&&onfinish())},0)),node)},(NodeVisibility=function(config){this._node=config.host}).NS="vis",NodeVisibility.NAME="NodeVisibilityPlugin",NodeVisibility.prototype={isVisible:function(threshold){return isVisible(this._node,threshold)},onVisible:function(callback,threshold,arg,oScope){return onVisible(this._node,callback,threshold,arg,oScope)},animScrollIntoView:function(align_to_top,top,force){return animScrollIntoView(this._node,align_to_top,top,null,force)},destroy:function(){}},Y.Node.plug(NodeVisibility),Y.NodeVisibility=NodeVisibility},"0.0.1",{requires:["node","node-pluginhost","better-throttle","cache-simple"],optional:["anim","anim-scroll"]});YUI.add("personmenu-transjax",function(b){b.transjax.add("personmenu",{svn_bump:"",error_timeout:"Uh oh! There was a problem contacting the server.",error_getting:"Uh oh! There was a problem getting data from the server."})},"0.0.1",{requires:["transjax-base"]});YUI.add("personmenu-rapid",function(Y){Y.on("personmenu:show",function(id){id&&Y.rapidTracker.addModules(id)})},"0.0.1",{requires:F.config.modules["personmenu-rapid"].requires||[]});YUI.add("personmenu",function(Y){var body,config,latest_nsid,latest_trigger_node,is_open,is_shown,is_spinning,show_timeout_handle,hide_timeout_handle,spinner_timeout_handle,imageWidth=Y.config.flickr.flags.enable_photo_page_icon_lite_sidebar?70:48;function getCache(key){var cache,data;return getCache.cache||(getCache.cache=new Y.CacheSimple),cache=getCache.cache,Y.Lang.isString(key)?(data=cache.retrieve(key))&&data.response&&(new Date).getTime()<data.payload.expires?data.response:null:cache}function setCache(key,val){return!!Y.Lang.isString(key)&&(getCache().add(key,val,{expires:(new Date).getTime()+config.io_cache_ttl}),!0)}function deStutter(fn){return function(){var args_have_changed,key,arguments_arr,prev_arguments_arr;if(prev_arguments&&arguments.length===prev_arguments.length){for(key in arguments_arr=Array.prototype.slice.call(arguments),prev_arguments_arr=Array.prototype.slice.call(prev_arguments),arguments_arr)if(arguments_arr.hasOwnProperty(key)&&arguments_arr[key]!==prev_arguments_arr[key]){args_have_changed=!0;break}}else args_have_changed=!0;args_have_changed&&fn.apply(this,arguments),prev_arguments=arguments};var prev_arguments}function cleanNode(node){return Y.Lang.isString(node)&&(node=Y.one(node)),!(!node instanceof Y.Node)&&node}function handleTriggerEvent(e){if(e.target.hasClass("personmenu-trigger"))switch(e.type){case"mouseover":if((is_open||is_spinning)&&is_shown)return;!function(node){cancelHide(),cancelShow(),is_shown&&!config.zeus?showClosed(node):show_timeout_handle=window.setTimeout(function(){show_timeout_handle=null,showClosed(node)},config.show_delay)}(e.target);break;case"mouseout":cancelShow()}}function handleContactChange(obj){!function(key){setCache(key,null)}(obj.nsid)}function handleMenuEvent(e){switch(e.type){case"mouseover":cancelHide(),config.get_data_on_arrow_hover&&Y.one(".personmenu .personmenu-arrow")&&(e.target.test(".personmenu .personmenu-arrow")||Y.one(".personmenu .personmenu-arrow").contains(e.target))&&(is_open||getCache(latest_nsid)||getBodyFragment(latest_nsid));break;case"mouseout":is_open||is_spinning||(hide_timeout_handle=hide_timeout_handle||window.setTimeout(function(){hide_timeout_handle=null,hide()},config.hide_delay));break;case"click":if(Y.one(".personmenu .personmenu-arrow")&&(e.target.test(".personmenu .personmenu-arrow")||Y.one(".personmenu .personmenu-arrow").contains(e.target)))e.preventDefault(),is_open?showClosed():showOpen();else if(config.zeus&&Y.one(".personmenu .personmenu-more")&&(e.target.test(".personmenu .personmenu-more")||Y.one(".personmenu .personmenu-more").contains(e.target)))is_open||(e.preventDefault(),e.halt(),showOpen());else if(config.open_on_icon_click&&Y.one(".personmenu .personmenu-icon-link")&&(e.target.test(".personmenu .personmenu-icon-link")||Y.one(".personmenu .personmenu-icon-link").contains(e.target)))is_open||(e.preventDefault(),showOpen());else if(Y.one(".personmenu .personmenu-relationship-change")&&(e.target.test(".personmenu .personmenu-relationship-change")||Y.one(".personmenu .personmenu-relationship-change").contains(e.target)))Y.config.modules["contact-changer"]&&(e.preventDefault(),startSpinning()),Y.use("contact-changer",function(Y){stopSpinning(),Y.contact_changer.show(latest_nsid)});else if(Y.one(".personmenu .photos-trigger")&&e.target.test(".personmenu .photos-trigger")){var photosNode=e.target.ancestor("li").one(".photos");photosNode&&(e.preventDefault(),photosNode.toggleClass("photos-open"))}else Y.fire("personmenu:navigate",{id:getMenu().get("id"),url:e.target.get("href")})}}function handleWindowEvent(e){"click"===e.type&&(config.open_on_icon_click&&e.target.hasClass("personmenu-trigger")?(e.preventDefault(),e.halt(),showOpen(e.target)):is_shown&&!Y.one(".personmenu").contains(e.target)&&hide()),"resize"===e.type&&is_shown&&move(latest_trigger_node)}function handleContextChange(e){""!==e.newVal&&hide()}function cancelHide(){hide_timeout_handle&&(window.clearTimeout(hide_timeout_handle),hide_timeout_handle=null)}function cancelShow(){show_timeout_handle&&(window.clearTimeout(show_timeout_handle),show_timeout_handle=null)}function getSrc(node){return(node=cleanNode(node)).get("data-defer-src")||node.get("src")}function getNsid(node){var img_src_hash;return!!function(nsid){return/^[0-9]+@N[0-9]{2}$/.test(nsid)}(img_src_hash=getSrc(node).split("#")[1])&&img_src_hash}function getMenu(){var menu_template;return getMenu.menu||(menu_template=config.zeus?'<div class="personmenu personmenu-hidden personmenu-zeus"><div class="personmenu-hd"><a data-track="icon-link" href="" class="personmenu-icon-link rapidnofollow"><img class="personmenu-icon"></a><span class="personmenu-spinner"></span><span class="personmenu-name"></span></div><div class="personmenu-bd"></div></div>':'<div class="personmenu personmenu-hidden"><div class="personmenu-hd rapidnofollow"><a data-track="icon-link" href="" class="personmenu-icon-link rapidnofollow"><span class="personmenu-spinner"></span><img class="personmenu-icon"></a><a data-track="show-menu" href="" class="rapidnofollow personmenu-arrow" role="button"><span></span></a></div><span class="personmenu-hd-shadow"></span><div class="personmenu-bd"></div><span class="personmenu-bd-border-blocker"></span></div>',Y.one("body").append(menu_template),(getMenu.menu=Y.one(".personmenu")).on("mouseover",handleMenuEvent),getMenu.menu.on("mouseout",handleMenuEvent),getMenu.menu.on("click",handleMenuEvent)),getMenu.menu}function updateIcon(href,src){href&&getMenu().one(".personmenu-icon-link").set("href",href),src&&getMenu().one(".personmenu-icon").set("src",src)}function startSpinning(){is_spinning=!0,getMenu().addClass("personmenu-spinning"),config.zeus?getMenu().one(".personmenu-spinner")&&getMenu().one(".personmenu-spinner").addClass("personmenu-spinner-on"):spinner_timeout_handle=window.setTimeout(function(){getMenu().one(".personmenu-spinner").addClass("personmenu-spinner-on"),spinner_timeout_handle=null},config.spinner_delay)}function stopSpinning(){is_spinning=!1,spinner_timeout_handle&&(window.clearTimeout(spinner_timeout_handle),spinner_timeout_handle=null),getMenu().removeClass("personmenu-spinning"),getMenu().one(".personmenu-spinner")&&getMenu().one(".personmenu-spinner").removeClass("personmenu-spinner-on")}function hide(){is_shown=!1,getMenu().addClass("personmenu-hidden")}function move(trigger_node){var xy,offset;xy=trigger_node.getXY(),offset=config.zeus?8:6,xy[0]-=parseInt((imageWidth-trigger_node.get("width"))/2,10)+offset,xy[1]-=parseInt((imageWidth-trigger_node.get("height"))/2,10)+offset,getMenu().setStyle("position","absolute"),getMenu().setStyle("left",xy[0]+"px"),getMenu().setStyle("top",xy[1]+"px")}function updateClosed(trigger_node){var href;if(updateIcon(href=function(node){var nsid;return!!(nsid=getNsid(node=cleanNode(node)))&&"/photos/"+nsid}(trigger_node),getSrc(trigger_node)),config.zeus){var nsid=getNsid(trigger_node),html='<ul><li><a href="/people/'+nsid+'" class="personmenu-item">Profile</a></li><li><a href="'+href+'" class="personmenu-item">Photostream</a></li><li class="personmenu-sep-bottom"><a href="/photos/'+nsid+'/favorites" class="personmenu-item">Favorites</a></li><li><a href="" class="personmenu-item personmenu-more">More...</a></li></ul>';getMenu().one(".personmenu-bd").set("innerHTML",html),getMenu().one(".personmenu-name").set("innerHTML",nsid)}}function getBodyFragment(nsid){var in_progress_nsids,callbacks,io_url;if(in_progress_nsids=getBodyFragment.in_progress_nsids=getBodyFragment.in_progress_nsids||{},callbacks={success:function(id,obj,nsid){var html=obj.responseText;html&&setCache(nsid,html),is_spinning&&latest_nsid===nsid&&updateOpen(nsid)},failure:function(id,obj,nsid){is_spinning&&latest_nsid===nsid&&("timeout"===obj.statusText?showError(Y.transjax.get("personmenu","error_timeout")):showError(Y.transjax.get("personmenu","error_getting")))},end:function(id,nsid){delete in_progress_nsids[nsid]}},io_url="/personmenu_fragment.gne?nsid="+nsid+"&magic_cookie="+Y.config.flickr.magic_cookie,config.zeus&&(io_url+="&zeus=1"),in_progress_nsids[nsid])return!1;in_progress_nsids[nsid]=nsid,Y.io(io_url+"&cachebust="+(new Date).getTime(),{timeout:config.io_timeout,on:callbacks,arguments:nsid})}function updateOpen(nsid){var html=getCache(nsid);if(html){config.zeus?getMenu().set("innerHTML",html):getMenu().one(".personmenu-bd").set("innerHTML",html),stopSpinning();var triggerid=latest_trigger_node.getAttribute("data-menu-id");triggerid?getMenu().set("id",triggerid):triggerid=!1,Y.fire("personmenu:show",triggerid),open()}else startSpinning(),getBodyFragment(nsid)}function showError(msg){var html='<div class="alert">'+msg+"</div>";getMenu().one(".personmenu-bd").set("innerHTML",html),stopSpinning(),open()}function showClosed(trigger_node){var nsid;return!!(trigger_node=cleanNode(trigger_node)||latest_trigger_node)&&(!!(nsid=getNsid(latest_trigger_node=trigger_node))&&(latest_nsid=nsid,stopSpinning(),getMenu().addClass("personmenu-closed"),getMenu().removeClass("personmenu-open"),is_open=!1,updateClosed(trigger_node),move(trigger_node),is_shown=!0,getMenu().removeClass("personmenu-hidden"),config.zeus&&!getCache(nsid)&&getBodyFragment(nsid),!0))}function showOpen(trigger_node){var nsid;return!!(trigger_node=cleanNode(trigger_node)||latest_trigger_node)&&(!!(nsid=getNsid(latest_trigger_node=trigger_node))&&(latest_nsid=nsid,showClosed(trigger_node),updateOpen(nsid),!0))}function open(){getMenu().removeClass("personmenu-closed"),getMenu().addClass("personmenu-open"),is_open=!0,getMenu().one(".personmenu-bd").vis.animScrollIntoView()}updateIcon=deStutter(updateIcon),updateClosed=deStutter(updateClosed),Y.personmenu={init:function init(config_overrides){init.is_init||(config={open_on_icon_click:!1,get_data_on_arrow_hover:!0,show_delay:100,hide_delay:500,spinner_delay:200,io_timeout:1e4,io_cache_ttl:12e4,zeus:!1},Y.Lang.isObject(config_overrides)||(config_overrides={}),config=Y.mix(config_overrides,config),body=Y.one("body"),(Y.config.flickr.user.nsid||Y.config.flickr.flags.enable_grease)&&(body.on("mouseover",handleTriggerEvent),body.on("mouseout",handleTriggerEvent),body.on("click",handleWindowEvent),Y.on("resize",handleWindowEvent),Y.on("contact_changer:change",handleContactChange),Y.on("contact_changer:open",hide),Y.on("PageContext:set",handleContextChange)),init.is_init=!0)},showClosed:showClosed,showOpen:showOpen,hide:hide}},"0.0.1",{requires:["node","anim","anim-scroll","node-visibility","event-custom","cache-simple","io-base","personmenu-transjax","personmenu-css"],optional:["contact-changer"]});YUI.add("flickr",function(Y){Y.flickr=function(){if(Y.FlickrApp.init(),(Y.config.flickr.flags.enable_grease||Y.config.flickr.user&&Y.config.flickr.user.nsid)&&Y.personmenu.init(),Y.config.flickr.sharing.use_share_this_v3&&(Y.use("share-this-v3-menu",function(Y){var overrideRefresh,scroll,pos=Y.config.flickr.flags.enable_2013_photo_page&&"photo"===Y.config.flickr.page_type?"br":"t";(function(element){for(var coords={x:0,y:0};element;)coords.x+=element.offsetLeft,coords.y+=element.offsetTop,element=element.offsetParent;return coords})(document.getElementById("share-this-v3-more-button")).y<411&&(pos="tr",scroll=overrideRefresh=!0),Y.shareThisV3Menu.init({arrowPosition:pos,overrideRefresh:overrideRefresh,scroll:scroll})}),Y.config.flickr.sharing.share_immediately_service&&Y.use("share-this-v3-dialog",function(Y){var share_immediately_service=Y.config.flickr.sharing.share_immediately_service;Y.shareThisV3Dialog.share_by_service(share_immediately_service.service_id,share_immediately_service.service_type_id)})),Y.config.flickr.flags.enable_tumblr_trackr&&Y.use("tumblr-trackr",function(Y){Y.tumblrTrackr.init()}),Y.config.flickr.flags.view_count_on_visible&&Y.ViewCount.onVisible("img.view-count-on-visible"),Y.tooltips.init(),1<window.devicePixelRatio&&-1===document.cookie.indexOf("rtna=1")){var date=new Date;date.setTime(date.getTime()+2592e6),document.cookie="rtna=1; expires="+date.toGMTString()+"; path=/"}Y.config.flickr.flags.enable_sitekey_fetcher&&window.setInterval(function(){Y.config.flickrAPI&&Y.config.flickrAPI.api_key&&Y.use("gallery-flickr-api",function(Y){var params,callback;params={},callback={success:function(obj){obj&&obj.data&&obj.data.key&&obj.data.key._content&&Y.Lang.isString(obj.data.key._content)&&(Y.config.flickrAPI.api_key=obj.data.key._content)},failure:function(obj){}},Y.flickrAPI.callMethod("flickr.site.getKey",params,callback)})},252e5)},Y.config.flickr.user.admin_user&&(window.pdokas=function(){alert("hi Louis")})},"0.0.1",{requires:F.config.modules.flickr.requires||[],optional:F.config.modules.flickr.optional||[]});YUI.add("popup-login",function(Y){var web1999Window,POST_LOGIN="/photo_grease_postlogin.gne",hasBlurred=!1,authInProgress=!1,upload=!1,sessionRegex=/cookie_session=[^;]+/gi,globalDialog=Y.global_dialog;function checkAuth(){var io_cfg={method:"post",data:"random=0",on:{success:function(id,o,args){!o||"1,1"!==o.responseText&&"1,0"!==o.responseText?globalDialog&&globalDialog.hide():Y.fire("login:authenticated",o.responseText)}}};Y.later(100,this,startSpinning),Y.io("/fragment.gne?name=social-auth-fragment",io_cfg)}function startSpinning(){globalDialog&&globalDialog.show({loading:!0,modal:!0})}function authenticate(){Y.later(20,this,pollCookie),authInProgress=!0,function(url){var windowWidth,popupWidth=650;if(Y.config.flickr.flags.enable_ads_on_login_page&&(windowWidth=Y.one(window).get("winWidth")||0,isNaN(popupWidth)||(popupWidth=Math.max(880,Math.min(1200,windowWidth)))),Y.config.flickr.is_touch_device){var postLogin=POST_LOGIN+"?d="+window.location+"&notpopup=1";return window.location=url+"?popup=0&redir="+encodeURIComponent(postLogin)}var fullUrl=url+"?popup=1&redir="+POST_LOGIN+"?d="+window.location;try{web1999Window=window.open(fullUrl,"newWindow","width="+popupWidth+",height=650,resizable=1,scrollbars=1,location=yes")}catch(e){return}try{web1999Window.focus&&web1999Window.focus()}catch(ee){}Y.later(500,this,function(){if(!web1999Window||web1999Window.closed||void 0===web1999Window.closed||!hasBlurred){var postLogin=POST_LOGIN+"?d="+window.location+"&notpopup=1";window.location=url+"?popup=0&redir="+encodeURIComponent(postLogin)}})}("/signin")}function pollCookie(){document.cookie.match(sessionRegex)?(authInProgress=!1,checkAuth()):Y.later(20,this,pollCookie)}Y.popup_login={init:function(){if(!Y.config.flickr.user.nsid){Y.one("body").on("click",function(e){var tid=e.target.get("id");e.target.ancestor(".signin-popup",!0)?(e.preventDefault(),e.halt(),authenticate()):"head-upload-link"===tid&&(upload=!0,e.halt(),authenticate())});var win=Y.one("window");win.on("login|blur",function(e){hasBlurred=!0}),win.on("login|focus",function(e){hasBlurred=!1,authInProgress&&checkAuth()}),Y.on("login:authenticated",function(e){var winLoc=window.location.toString();!function(){var result=!1;if(web1999Window)try{web1999Window.close(),result=!0}catch(e){}}(),"1,1"===e?window.location="/":upload?window.location="/photos/upload":winLoc.match(/\/new/i)?window.location="/":window.location.pathname&&"/"===window.location.pathname?window.location="/":window.location.reload()})}}}},"0.0.1",{requires:["node","event","io-base"]});YUI.add("liquid-resizer",function(Y){Y.liquidResizer={init:function(attr){Y.on("resize",Y.betterThrottle(function(){var totalPageWidth=F.liquid.resizePage(!0);Y.fire("Liquid:resize",totalPageWidth)},20))}}},"0.0.1",{requires:F.config.modules["liquid-resizer"].requires||[],optional:F.config.modules["liquid-resizer"].optional||[]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("json-stringify",function(e,t){var n=":",r=e.config.global.JSON;e.mix(e.namespace("JSON"),{dateToString:function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+n+t(e.getUTCMinutes())+n+t(e.getUTCSeconds())+"Z"},stringify:function(){return r.stringify.apply(r,arguments)},charCacheThreshold:100})},"3.11.0",{requires:["yui-base"]});
YUI.add("gallery-storage-lite",function(Y){var storageDriver,storageMode,d=Y.config.doc,w=Y.config.win,JSON=Y.JSON,StorageLite=Y.namespace("StorageLite"),DB_NAME="yui_storage_lite",data={};try{if(w.localStorage)storageMode=1;else if(w.globalStorage){storageMode=2;w.globalStorage[w.location.hostname]}else storageMode=w.openDatabase&&-1===navigator.userAgent.indexOf("Chrome")?3:5<=Y.UA.ie?4:0}catch(e){storageMode=0}Y.StorageFullError=function(message){Y.StorageFullError.superclass.constructor.call(message),this.name="StorageFullError",this.message=message||"Maximum storage capacity reached",Y.UA.ie&&(this.description=this.message)},Y.extend(Y.StorageFullError,Error),Y.augment(StorageLite,Y.EventTarget,!0,null,{emitFacade:!0,prefix:"storage-lite",preventable:!1}),StorageLite.publish("ready",{fireOnce:!0}),Y.mix(StorageLite,{clear:function(){},getItem:function(key,json){return null},length:function(){return 0},removeItem:function(key){},setItem:function(key,value){}}),1===storageMode||2===storageMode?(Y.mix(StorageLite,{length:function(){return storageDriver.length},removeItem:function(key){storageDriver.removeItem(key)},setItem:function(key,value,json){storageDriver.setItem(key,json?JSON.stringify(value):value)}},!0),1===storageMode?(storageDriver=w.localStorage,Y.mix(StorageLite,{clear:function(){storageDriver.clear()},getItem:function(key,json){try{return json?JSON.parse(storageDriver.getItem(key)):storageDriver.getItem(key)}catch(ex){return null}}},!0)):2===storageMode&&(storageDriver=w.globalStorage[w.location.hostname],Y.mix(StorageLite,{clear:function(){for(var key in storageDriver)storageDriver.hasOwnProperty(key)&&(storageDriver.removeItem(key),delete storageDriver[key])},getItem:function(key,json){try{return json?JSON.parse(storageDriver[key].value):storageDriver[key].value}catch(ex){return null}}},!0)),StorageLite.fire("ready")):3===storageMode||4===storageMode?(Y.mix(StorageLite,{clear:function(){data={},StorageLite._save()},getItem:function(key,json){return data.hasOwnProperty(key)?data[key]:null},length:function(){var key,count=0;for(key in data)data.hasOwnProperty(key)&&(count+=1);return count},removeItem:function(key){data?(delete data[key],StorageLite._save()):data={}},setItem:function(key,value,json){data[key]=value,StorageLite._save()}},!0),3===storageMode?(storageDriver=w.openDatabase(DB_NAME,"1.0","YUI StorageLite data",1048576),Y.mix(StorageLite,{_save:function(){storageDriver.transaction(function(t){t.executeSql("REPLACE INTO "+DB_NAME+" (name, value) VALUES ('data', ?)",[JSON.stringify(data)])})}},!0),storageDriver.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+DB_NAME+"(name TEXT PRIMARY KEY, value TEXT NOT NULL)"),t.executeSql("SELECT value FROM "+DB_NAME+" WHERE name = 'data'",[],function(t,results){if(results.rows.length)try{data=JSON.parse(results.rows.item(0).value)}catch(ex){data={}}StorageLite.fire("ready")})})):4===storageMode&&((storageDriver=d.createElement("span")).addBehavior("#default#userData"),Y.mix(StorageLite,{_save:function(){var _data=JSON.stringify(data);try{storageDriver.setAttribute("data",_data),storageDriver.save("yui_storage_lite")}catch(ex){throw new Y.StorageFullError}}},!0),Y.on("domready",function(){d.body.appendChild(storageDriver),storageDriver.load("yui_storage_lite");try{data=JSON.parse(storageDriver.getAttribute("data"))}catch(ex){data={}}StorageLite.fire("ready")}))):StorageLite.fire("ready")},"1.0.0",{requires:["event-base","event-custom","event-custom-complex","json"]});YUI.add("occult",function(Y){if(void 0===window.FLICKR){window.FLICKR={};var F=window.FLICKR}Y.occult={register:function(name,value){!function(){var i,j,d,a=arguments,o=null;for(i=0;i<a.length;i+=1)for(d=(""+a[i]).split("."),o=FLICKR,j="FLICKR"==d[0]?1:0;j<d.length;j+=1)o[d[j]]=o[d[j]]||{},o=o[d[j]]}(name);for(var arr=name.split("."),len=arr.length,workpoint=FLICKR,i=0;i<arr.length-1;i++)workpoint=workpoint[arr[i]];workpoint[arr[len-1]]=value},get:function(name,value){return F[name]}}},"0.0.1",{});YUI.add("photo-transjax",function(a){a.transjax.add("photo",{your_favorites:"Your favorites",untitled:"Untitled",window_title:"%s | Flickr - Photo Sharing!"})},"0.0.1",{requires:["transjax-base"]});YUI.add("type-cast",function(Y){function integer(val){if(val=parseInt(val,10),Y.Lang.isNumber(val))return val}Y.TypeCast={string:function(val){return Y.Lang.isNumber(val)&&(val+=""),Y.Lang.isString(val)?val:""},bool:function(val){return"0"===val&&(val=0),!!val},integer:integer,integer0123:function(val){if(val=integer(val),!(!Y.Lang.isNumber(val)||val<0||3<val))return val},arr:function(val){return Y.Lang.isArray(val)?val:[]},obj:function(val){return Y.Lang.isObject(val)?val:{}}}},"0.0.1",{requires:F.config.modules["type-cast"].requires||[],optional:F.config.modules["type-cast"].optional||[]});YUI.add("urls",function(Y){var regexes={photo:/^\/photos\/([^\/]+)\/(\d+)(?:\/in\/([^\/]+))?(?:(?:\/page(\d+))|(?:\/(lightbox))|(?:\/(tour)))?/,photostream:/^\/photos\/([^\/]+)(?:\/page(\d+))?(?:\/with\/(\d+))?\/?(lightbox\/?)?/,delete_photo:/^\/photos\/([^\/]+)\/?\?delete=(\d+)(?:&context=([^&]+))?/,faves:/^\/photos\/([^\/]+)\/favorites(?:\/from\/([^\/]+))?(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,explore:/^\/explore\/?(\d{4}\/\d{2}\/\d{2})?(?:\/?with\/([0-9]+))?\/?(lightbox\/?)?/,group_pool:/^\/groups\/([^\/]+)\/?(?:pool)?(?:\/((?:(?!with|page|lightbox)[^\/\?])+))?(?:\/with\/(\d+))?(?:\/page(\d+))?(\/lightbox)?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,gallery:/^\/photos\/([^\/]+)\/galleries\/([0-9]+)(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?/,contacts:/^\/photos\/(?:friends|contacts)(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,contactsfaves:/^\/photos\/contacts\/favorites(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/};Y.urls={get:function(page_type,config){var url;switch((config=config||{}).photo&&Y.Lang.isString(config.photo)&&(config.photo_id=config.photo,Y.PhotoData&&(config.photo=Y.PhotoData.get(config.photo)),Y.Lang.isObject(config.photo)||(config.photo=void 0,delete config.photo)),Y.Lang.isObject(config.photo)&&(config.photo_id=config.photo.get("id")),page_type){case"photo":url=function(config){var photo,photo_id,path_alias,context_id,page,lightbox,sizes,hash,exif,faves,details;if(photo=config.photo,photo_id=config.photo_id,path_alias=config.path_alias,!Y.Lang.isObject(photo)&&!photo_id)return void Y.log("[urls] missing photo object or ID");if(!Y.Lang.isObject(photo)&&!path_alias)return void Y.log("[urls] missing photo object or path alias");photo_id=photo_id||photo.get("id"),path_alias=path_alias||photo.get("pathalias")||photo.get("owner"),config.context&&(Y.Lang.isString(config.context)?context_id=config.context:Y.Lang.isObject(config.context)&&Y.Lang.isString(config.context.id)&&(context_id=config.context.id));config.page&&(1!==(page=parseInt(config.page,10))&&Y.Lang.isNumber(page)||(page=!1));return lightbox=!!Y.Lang.isBoolean(config.lightbox)&&config.lightbox,sizes=!(!Y.Lang.isBoolean(config.sizes)&&!Y.Lang.isString(config.sizes))&&config.sizes,hash=!!Y.Lang.isString(config.hash)&&config.hash,exif=!!Y.Lang.isBoolean(config.exif)&&config.exif,faves=!!Y.Lang.isBoolean(config.faves)&&config.faves,details=!!Y.Lang.isBoolean(config.details)&&config.details,"/photos/"+path_alias+"/"+photo_id+"/"+(sizes?"sizes/"+(Y.Lang.isString(sizes)?sizes+"/":""):"")+(exif?"meta/":"")+(faves?"favorites/":"")+(details?"edit-details/":"")+(context_id?"in/"+context_id+"/":"")+(page?"page"+page+"/":"")+(lightbox?"lightbox/":"")+(hash?"#"+hash:"")}(config);break;case"photostream":url=function(config){var path_alias,url;config.photo&&(config.path_alias=config.photo.get("pathalias")||config.photo.get("owner"));if(!(path_alias=config.path_alias))return void Y.log("[urls] missing path_alias");url="/photos/"+path_alias+"/",config.person?url+="people/"+config.person+"/":config.tag?(Y.Lang.isArray(config.tag)&&(config.tag=config.tag.join(",")),url+="tags/"+config.tag+"/"):config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");return url}(config);break;case"delete_photo":url=function(config){var path_alias;return(path_alias=config.path_alias)?(photo_id=config.photo_id,photo_id?(context_id=config.context_id,"/photos/"+path_alias+"/?delete="+photo_id+(context_id?"&context="+context_id:"")+"&magic_cookie="+Y.config.flickr.magic_cookie):void Y.log("[urls] missing photo_id")):void Y.log("[urls] missing path_alias")}(config);break;case"faves":url=function(config){var path_alias,url;if(!(path_alias=config.path_alias))return void Y.log("[urls] missing path_alias");url="/photos/"+path_alias+"/favorites/",config.from&&(url+="from/"+config.from+"/");config.page&&(url+="page"+config.page+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"group_pool":url=function(config){var group_id,url;if(!(group_id=config.group_id))return void Y.log("[urls] missing group_id");url="/groups/"+group_id+"/pool/",config.owner_id&&(url+=config.owner_id+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.page&&(url+="page"+config.page+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"gallery":url=function(config){var path_alias,gallery_id,url;if(path_alias=config.path_alias,gallery_id=config.gallery_id,!path_alias)return void Y.log("[urls] missing path_alias");if(!gallery_id)return void Y.log("[urls] missing gallery_id");url="/photos/"+path_alias+"/galleries/"+gallery_id+"/",config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");return url}(config);break;case"contacts":url=function(config){var url;url="/photos/friends/",config.page&&(url+="page"+config.page+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"contactsfaves":url=function(config){var url;url="/photos/contacts/favorites/",config.page&&(url+="page"+config.page+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"explore":url=function(config){var date,with_id,url;date=config.date,with_id=config.with_id,url="/explore",date&&(url+="/"+date);with_id&&(url+="/with/"+with_id);config.lightbox&&(url+="lightbox/");return url}(config)}return url},parse:function(page_type,path){var path_parts,obj={};if(regexes[page_type]){switch(path_parts=regexes[page_type].exec(path),page_type){case"photo":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.photo_id=path_parts[2],obj.context_id=path_parts[3]&&decodeURIComponent(path_parts[3]),obj.page=path_parts[4],obj.lightbox=!!path_parts[5],obj.tour=!!path_parts[6];break;case"photostream":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.page=path_parts[2],obj.photo_id=path_parts[3],obj.lightbox=!!path_parts[4];break;case"delete_photo":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.photo_id=path_parts[2],obj.context_id=path_parts[3];break;case"faves":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.from=path_parts[2]&&decodeURIComponent(path_parts[2]),obj.page=path_parts[3],obj.photo_id=path_parts[4],obj.lightbox=!!path_parts[5],obj.view_mode=path_parts[6];break;case"group_pool":obj.group_id=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.owner_id=path_parts[2]&&decodeURIComponent(path_parts[2]),obj.photo_id=path_parts[3],obj.page=path_parts[4],obj.lightbox=!!path_parts[5],obj.view_mode=path_parts[6];break;case"gallery":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.gallery_id=path_parts[2]&&decodeURIComponent(path_parts[2]),obj.page=path_parts[3],obj.photo_id=path_parts[4],obj.lightbox=!!path_parts[5];break;case"contacts":case"contactsfaves":obj.page=path_parts[1],obj.photo_id=path_parts[2],obj.lightbox=!!path_parts[3],obj.view_mode=path_parts[4];break;case"explore":obj.date=path_parts[1],obj.photo_id=path_parts[2],obj.lightbox=path_parts[3]}return obj}Y.log('[urls] no regex found for page_type "'+page_type+'"')},getShortID:function(num){Y.Lang.isNumber(num)||(num=parseInt(num,10));for(var mod,enc="",alpha="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",div=num;58<=num;)div=num/58,mod=num-58*Math.floor(div),enc=""+alpha.substr(mod,1)+enc,num=Math.floor(div);return div?""+alpha.substr(div,1)+enc:enc},getLongID:function(short_id){for(var alphabet="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",decoded=0,multi=1,i=short_id.length-1;0<=i;i--)decoded+=multi*alphabet.indexOf(short_id[i]),multi*=alphabet.length;return decoded},regexes:regexes}},"0.0.1",{requires:F.config.modules.urls.requires||[],optional:F.config.modules.urls.optional||[]});YUI.add("grease",function(Y){var authInProgress,web1999Window,src,globalDialog,callback,grease_ok=!1,storage=Y.StorageLite,PENDING_SHARE_V3="ps3",POST_LOGIN="/photo_grease_postlogin.gne",FAVE="fave",CONTACT="contact",SHARE="share",sessionRegex=/cookie_session=[^;]+/gi,loginPoll=1e3,keyList=["pc","pic","ps",PENDING_SHARE_V3,"pf","pct","pf","pp","pps"];function clearStorage(){Y.Array.each(keyList,function(o){storage.removeItem(o)})}Y.config.flickr.flags.enable_grease&&(grease_ok=!0),globalDialog=Y.global_dialog;var timer,pollCount,canceled,running,authPoller=(timer=null,pollCount=0,running=canceled=!1,{start:function(){if(running)return loginPoll=50,timer&&timer.cancel(),void checkAuth();running=!0,checkAuth()},stop:stop,cancel:function(){timer&&timer.cancel(),canceled=!0,Y.fire("grease:cancel")},pause:function(){timer&&timer.cancel(),loginPoll=1e6},canceled:canceled,reset:function(){running=!1,timer&&timer.cancel(),stop(),globalDialog.remove_existing_dialog(),timer=null,canceled=!1,pollCount=0,canceled=!(loginPoll=1e3)}});function ascendingDefer(){return loginPoll=1e4<=loginPoll?loginPoll:2*loginPoll}function stop(){running&&(timer&&(globalDialog.remove_existing_dialog(),timer.cancel(),!1),running=!1)}function checkAuth(){if(!canceled){timer&&(timer.cancel(),timer=null);var io_cfg={method:"post",data:"random=0",on:{success:function(id,o,args){o&&"1"===o.responseText.substring(0,1)?Y.fire("grease:authenticated"):pollCount++<3&&(stopSpinning(),timer=timer||Y.later(ascendingDefer(),this,checkAuth))},failure:function(){pollCount++<1&&(timer=timer||Y.later(ascendingDefer(),this,checkAuth))}}};Y.io("/fragment.gne?name=social-auth-fragment",io_cfg)}}function cancelSocial(){Y.detach("grease|*"),authInProgress=!1,stopSpinning(),callback(!1),authPoller.reset()}function handleClicks(e){(e.target.hasClass("close-x")||e.target.hasClass("Butt"))&&(e.preventDefault(),e.halt(),Y.global_dialog.hide())}function startSpinning(){globalDialog.show({loading:!0,modal:!0})}function stopSpinning(){globalDialog.hide()}function beacon(url){var bd=Y.one("body"),img=bd.create('<img height="1" width="1" src="'+url+'">');bd.appendChild(img)}function showConfirmDialog(){globalDialog.create_dialog(Y.one("#grease-confirm-"+src).get("innerHTML"),{width:355}).show({loading:!1,modal:!0}),Y.one("#global_dialog").on("click",handleClicks,this),Y.later(1e4,this,Y.global_dialog.hide),Y.config.flickr.flags.enable_rapid_tracking&&Y.one("#reg-tour")&&Y.use("rapid-tracker",function(Y){switch(Y.rapidTracker.addModules("grease-conversion-tracker"),Y.rapidTracker.beaconClick("grease-conversion-tracker",src),src){case FAVE:beacon("https://pclick.internal.yahoo.com/p/s=2143640346&t="+Math.random());break;case CONTACT:beacon("https://pclick.internal.yahoo.com/p/s=2143640345&t="+Math.random());break;case SHARE:beacon("https://pclick.internal.yahoo.com/p/s=2143640344&t="+Math.random());break;default:beacon("https://pclick.internal.yahoo.com/p/s=2143640343&t="+Math.random())}})}function handleApiFailure(){clearStorage(),globalDialog.create_dialog(Y.one("#grease-error").get("innerHTML")).show({loading:!1,modal:!0,width:355,style:"grease-error"}),Y.one("#global_dialog").on("click",handleClicks,this),Y.later(5e3,this,Y.global_dialog.hide)}function pollCookie(){document.cookie.match(sessionRegex)?(authInProgress=!1,startSpinning(),authPoller.start()):Y.later(20,this,pollCookie)}function submitPendingComment(comment){if(startSpinning(),clearStorage(),Y.one("#message")){Y.one("#message").set("innerHTML",comment);var io_cfg={method:"post",data:"preview=0",form:{id:Y.one(".add-comment-form form")},on:{success:function(id,o,args){stopSpinning(),showConfirmDialog();var commentBox=Y.one("#comments");commentBox.set("innerHTML",o.responseText);var problem=commentBox.one(".Problem");problem&&globalDialog.create_alert_dialog(problem.get("innerHTML"),function(){commentBox.one("#message").scrollIntoView()})}}};Y.io("/photo_comments_fragment.gne",io_cfg)}else handleApiFailure()}function store(key,value,json){var j=json||!1;storage.setItem(key,value,j)}function get(key,parse){var p=parse||!1;return storage.getItem(key,p)}Y.grease={init:function(reg){grease_ok&&(reg&&Y.config.flickr.user.nsid?storage.on("storage-lite:ready",function(){var pendingComment=get("pc"),pendingInlineComment=get("pic"),pendingFave=get("pf"),pendingContact=get("pct"),pendingShare=get("ps",!0),pendingShareV3=get(PENDING_SHARE_V3,!0);get("pp"),get("pps");if(pendingComment){src="comment";var slicePoint=pendingComment.indexOf(";"),id=pendingComment.substring(0,slicePoint),comment=pendingComment.substring(slicePoint+1);id===Y.photo.getCurrentPhoto().get("id")&&submitPendingComment(comment)}else if(pendingInlineComment){src="comment";slicePoint=pendingInlineComment.indexOf(";"),id=pendingInlineComment.substring(0,slicePoint);!function(comment,photo_id){clearStorage();var io_cfg={method:"post",data:"magic_cookie="+Y.config.flickr.magic_cookie+"&photo="+photo_id+"&addcomment=1flash_ver=unknown&offset="+-1+"&limit=4&show-chrome=true&view-more-count=20&hide-meta=true&message="+comment,on:{success:function(id,o,args){var pic=Y.one("div[data-photo-id="+photo_id+"]");if(pic){var count=pic.getAttribute("data-comments-total-count");count=""===count?0:parseInt(count,10),count++,pic.setAttribute("data-comments-total-count",count);var countNode=pic.one(".comment-count");countNode&&(count<100?countNode.setHTML(count):countNode.setHTML("99+"))}stopSpinning()},failure:function(obj,xhr){stopSpinning(),showError(Y.transjax.get("photo-comments","error_add_generic"))}}};Y.io("/photo_comments_fragment_2013.gne?cachebust="+(new Date).getTime(),io_cfg)}(comment=pendingInlineComment.substring(slicePoint+1),id)}else if(pendingFave)src="fave",function(pendingFave){var photoData,listModel,smokescreen,needsAPI=!0;if(Y.photo&&Y.photo.getCurrentPhoto&&Y.photo.getCurrentPhoto()&&Y.photo.getCurrentPhoto().get("is_owner"))return globalDialog&&globalDialog.remove_existing_dialog(),(smokescreen=Y.one("#global-dialog-background"))&&smokescreen.setStyle("display","none"),clearStorage();Y.PhotoData&&((photoData=Y.PhotoData.get(pendingFave))?photoData.get("is_fave")||photoData.toggle_fave():(void 0!==Y.FlickrAppExplore&&(listModel=Y.FlickrAppExplore.getListModel())&&(listModel.toggleFave(pendingFave),needsAPI=!1),void 0!==Y.FlickrAppPhotostream&&(listModel=Y.FlickrAppPhotostream.getListModel())&&(listModel.toggleFave(pendingFave),neeedsAPI=!1),needsAPI&&Y.flickrAPI.callMethod("flickr.favorites.add",{photo_id:pendingFave})),showConfirmDialog(),clearStorage())}(pendingFave);else if(pendingContact)src="contact",function(contactString){startSpinning(),contactArr=contactString.split(";"),Y.flickrAPI.callMethod("flickr.contacts.add",{user_id:contactArr[0],friend:contactArr[1],family:contactArr[2]},{success:function(o){stopSpinning(),showConfirmDialog(),clearStorage()},failure:handleApiFailure})}(pendingContact);else if(pendingShare)src="share",function(params){startSpinning(),clearStorage(),Y.flickrAPI.callMethod("flickr.sharing.share",params,{success:function(o){stopSpinning(),showConfirmDialog()},failure:handleApiFailure})}(pendingShare);else if(pendingShareV3)src="sharev3",function(share_params){startSpinning(),clearStorage(),share_params.magic_cookie=Y.config.flickr.magic_cookie,share_params.from_grease=1,Y.use("share-this-v3-dialog",function(Y){Y.shareThisV3Dialog.do_share_action(share_params)})}(pendingShareV3);else{var smokescreen=Y.one("#global-dialog-background");smokescreen&&smokescreen.setStyle("display","none"),clearStorage()}}):storage.on("storage-lite:ready",function(){clearStorage()}))},enabled:grease_ok,authenticate:function authenticate(cb){authInProgress?(cancelSocial(),authenticate(cb)):(authPoller.reset(),callback=cb||function(){},Y.global_dialog.remove_existing_dialog(),Y.global_dialog.show({loading:!0,modal:!0}),authInProgress=!0,function(url){var postLogin,windowWidth,popupWidth=650;Y.config.flickr.flags.enable_ads_on_login_page&&(windowWidth=Y.one(window).get("winWidth")||0,isNaN(popupWidth)||(popupWidth=Math.max(880,Math.min(1200,windowWidth)))),authPoller.reset();var fullUrl=url+"&popup=1&redir="+POST_LOGIN+"?d="+encodeURIComponent(window.location+"?reg=1")+"&src="+src;if(Y.config.flickr.is_touch_device)return postLogin=POST_LOGIN+"?d="+window.location+"&notpopup=1&src="+src+"&reg=1",window.location=url+"&popup=0&redir="+encodeURIComponent(postLogin);try{web1999Window=window.open(fullUrl,"newWindow","width="+popupWidth+",height=650,resizable=1,scrollbars=1,location=yes")}catch(e){return}try{web1999Window.focus&&web1999Window.focus()}catch(ee){}!web1999Window||web1999Window.closed||void 0===web1999Window.closed?(postLogin=POST_LOGIN+"?d="+window.location+"&notpopup=1&src="+src+"&reg=1",window.location=url+"&popup=0&redir="+encodeURIComponent(postLogin)):window.setTimeout(pollCookie,500);var win=Y.one("window");win.on("grease|focus",function(){authPoller.canceled||authPoller.start(),document.cookie.match(sessionRegex)||(stopSpinning(),callback(!1),pollCookie())}),Y.on("grease:cancel",function(o){authInProgress=!1,cancelSocial()}),win.on("grease|blur",function(){authPoller.canceled||authPoller.pause()}),win.on("grease:timeout",function(o){authInProgress=!1,cancelSocial()}),Y.on("grease:authenticated",function(o){if(web1999Window)try{web1999Window.close()}catch(err){}startSpinning(),callback(!(authInProgress=!1));var urlParams=["reg=1","src="+src];if(PENDING_SHARE_V3){var newURL=window.location.toString(),hasQuery=newURL.match(/\?/i);-1!==(newURL+=(hasQuery?"&":"?")+urlParams.join("&")).indexOf("#?")&&(newURL=newURL.replace("#","")),window.location=newURL}else window.location=Y.urls.get("photo",{photo:Y.photo.getCurrentPhoto()})+"?"+urlParams.join("&")})}("/signin?src="+src+"&reg=1"))},postComment:function(comment,photoid){photoid=photoid||Y.photo.getCurrentPhoto().get("id"),clearStorage(),store(photoid?"pic":"pc",photoid+";"+comment),src="comment"},addFave:function(id){clearStorage(),store("pf",id),src="fave"},addContact:function(params){clearStorage(),Y.Lang.isArray(params)&&(store("pct",params.join(";")),src="contact")},share:function(params){clearStorage(),store("ps",params,!0),src="share"},shareV3:function(params){clearStorage(),store(PENDING_SHARE_V3,params,!0),src="sharev3"},photoParty:function(params){clearStorage(),store("pp",params),src="party"},photoPartyStart:function(params){clearStorage(),store("pps",Y.JSON.stringify(params)),src="partyStart"}},"saw"===Y.config.flickr.user.admin_user&&(Y.occult.register("postComment",function(a){submitPendingComment(a)}),Y.occult.register("showdialog",function(a){src="fave",showConfirmDialog()}),Y.occult.register("fakeerror",function(a){handleApiFailure()}));var tourbar=Y.one("#reg-tour");function clearbody(){for(var i=1;i<4;i++)bd.removeClass(stub+i)}if(tourbar){var stub="tour-step",bd=Y.one("body");tourbar.one(".close-x").on("click",function(e){e.preventDefault(),clearbody(),Y.Event.purgeElement("#reg-tour"),tourbar.addClass("hidden")}),tourbar.on("mouseover",function(e){!function handleOver(targ){if(!targ.test("#reg-tour"))if(targ.test("ol li"))switch(clearbody(),targ.get("id")){case"step-1":bd.addClass(stub+1);break;case"step-2":bd.addClass(stub+2);break;case"step-3":bd.addClass(stub+3)}else handleOver(targ.get("parentNode"))}(e.target)}),tourbar.on("mouseout",function(e){clearbody()})}},"0.0.1",{requires:F.config.modules.grease.requires||[],optional:F.config.modules.grease.optional||[]});YUI.add("photo-data",function(Y){var registry={},TypeCast=Y.TypeCast;function isInt(val){return Y.Lang.isNumber(val)&&parseInt(val,10)===val}function PhotoData(photo_data){PhotoData.superclass.constructor.apply(this,arguments)}Y.PhotoData={add:function(photo_data){var photo;return photo_data instanceof PhotoData?photo=photo_data:registry[photo_data.id]?(photo=registry[photo_data.id]).merge_data(photo_data):(photo=new PhotoData(photo_data),registry[photo_data.id]=photo),photo},get:function(photo_id){return void 0===photo_id?registry:registry[photo_id]}},PhotoData.NAME="PhotoData",PhotoData.ATTRS={id:{value:""},title:{broadcast:1,value:"",setter:function(val,name){return(val=TypeCast.string(val)).replace(/^\s+$/,"")}},description:{broadcast:1,value:"",setter:TypeCast.string},owner:{value:"",setter:function(val){return Y.Lang.isString(val)||(val=Y.Lang.isObject(val)&&val.nsid?val.nsid:""),val}},ownername:{value:""},pathalias:{value:""},iconserver:{value:""},iconfarm:{value:""},url:{value:"",getter:function(val,name){return Y.urls.get("photo",{photo:this})}},date_posted:{broadcast:1,getter:TypeCast.integer},is_public:{broadcast:1,getter:TypeCast.bool},is_friend:{broadcast:1,getter:TypeCast.bool},is_family:{broadcast:1,getter:TypeCast.bool},perm_comment:{broadcast:1,getter:TypeCast.integer0123},perm_addmeta:{broadcast:1,getter:TypeCast.integer0123},perms:{getter:function(){return{is_public:this.get("is_public"),is_friend:this.get("is_friend"),is_family:this.get("is_family"),perm_comment:this.get("perm_comment"),perm_addmeta:this.get("perm_addmeta")}}},license:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},safety_level:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},needs_interstitial:{broadcast:1,value:!1,getter:TypeCast.bool,setter:TypeCast.bool},media:{broadcast:1,value:"photo"},is_video:{getter:function(){return"video"===this.get("media")}},secret:{value:""},deleted:{value:!1},dmca_takedown:{value:!1},geo:{broadcast:1,getter:function(val){return Y.Lang.isObject(val)||(val={}),val}},has_geo:{getter:function(){var geo=this.get("geo");return geo&&geo.latitude&&geo.longitude&&geo.accuracy}},exif_latlong:{},perm_viewgeo:{broadcast:1,value:!1},is_bad:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},content_type:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},is_fave:{broadcast:1,value:!1,setter:function(val,name){return(val=TypeCast.bool(val))!==this.get(name)&&(val?this.increment("fave_count"):this.decrement("fave_count")),0===this.get("fave_changes_pending")&&this.set("is_confirmed_fave",val),val},getter:TypeCast.bool},is_confirmed_fave:{value:void 0},fave_changes_pending:{value:0},fave_count:{broadcast:1,value:0,getter:TypeCast.integer,setter:TypeCast.integer},comment_count:{broadcast:1,value:0,getter:TypeCast.integer,setter:TypeCast.integer},can_addmeta:{value:!1,getter:TypeCast.bool},can_comment:{value:!1,getter:TypeCast.bool},can_fave:{value:!1,getter:function(){return!this.get("is_ignored")&&(!this.get("dmca_takedown")&&(!this.get("is_owner")&&!(!Y.config.flickr.user.nsid&&!Y.config.flickr.flags.enable_grease)))}},group_count:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},people_count:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},guestpass_count:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},is_owner:{value:!1,getter:function(){return Y.config.flickr.user.nsid&&Y.config.flickr.user.nsid===this.get("owner")}},is_ignored:{value:!1},tags:{broadcast:1,getter:TypeCast.arr},sizes:{value:{},getter:function(val,name){var biggest,ratio,height_2048,width_2048;return val=TypeCast.obj(val),Y.config.flickr.flags.enable_2048_images&&(biggest=val.o||val.l||val.z)&&(2048<=biggest.width||2048<=biggest.height)&&(1<(ratio=biggest.width/biggest.height)?(width_2048=2048,height_2048=Math.round(2048/ratio)):(height_2048=2048,width_2048=Math.round(2048*ratio)),val[2048]={url:val.t.url.replace("_t","_2048"),height:height_2048+"",width:width_2048+"",label:"2048"}),val}}},Y.extend(PhotoData,Y.Base,{initializer:function(photo_data){this.merge_data(photo_data)},merge_data:function(photo_data){var sizes,old_sizes;void 0!==photo_data.id&&photo_data.id!==this.get("id")&&this.set("id",photo_data.id),void 0!==photo_data.title&&photo_data.title!==this.get("title")&&this.set("title",photo_data.title),void 0!==photo_data.description&&photo_data.description!==this.get("description")&&this.set("description",photo_data.description),void 0!==photo_data.owner&&photo_data.owner!==this.get("owner")&&this.set("owner",photo_data.owner),void 0!==photo_data.ownername&&photo_data.ownername!==this.get("ownername")&&this.set("ownername",photo_data.ownername),void 0!==photo_data.pathalias&&photo_data.pathalias!==this.get("pathalias")&&this.set("pathalias",photo_data.pathalias),void 0!==photo_data.iconserver&&photo_data.iconserver!==this.get("iconserver")&&this.set("iconserver",photo_data.iconserver),void 0!==photo_data.iconfarm&&photo_data.iconfarm!==this.get("iconfarm")&&this.set("iconfarm",photo_data.iconfarm),void 0!==photo_data.url&&photo_data.url!==this.get("url")&&this.set("url",photo_data.url),void 0!==photo_data.date_posted&&photo_data.date_posted!==this.get("date_posted")&&this.set("date_posted",photo_data.date_posted),void 0!==photo_data.date_taken&&photo_data.date_taken!==this.get("date_taken")&&this.set("date_taken",photo_data.date_taken),void 0!==photo_data.is_public&&photo_data.is_public!==this.get("is_public")&&this.set("is_public",photo_data.is_public),void 0!==photo_data.is_friend&&photo_data.is_friend!==this.get("is_friend")&&this.set("is_friend",photo_data.is_friend),void 0!==photo_data.is_family&&photo_data.is_family!==this.get("is_family")&&this.set("is_family",photo_data.is_family),void 0!==photo_data.can_comment&&photo_data.can_comment!==this.get("can_comment")&&this.set("can_comment",photo_data.can_comment),void 0!==photo_data.can_addmeta&&photo_data.can_addmeta!==this.get("can_addmeta")&&this.set("can_addmeta",photo_data.can_addmeta),void 0!==photo_data.perm_comment&&photo_data.perm_comment!==this.get("perm_comment")&&this.set("perm_comment",photo_data.perm_comment),void 0!==photo_data.perm_addmeta&&photo_data.perm_addmeta!==this.get("perm_addmeta")&&this.set("perm_addmeta",photo_data.perm_addmeta),void 0!==photo_data.license&&photo_data.license!==this.get("license")&&this.set("license",photo_data.license),void 0!==photo_data.needs_interstitial&&photo_data.needs_interstitial!==this.get("needs_interstitial")&&this.set("needs_interstitial",photo_data.needs_interstitial),void 0!==photo_data.safety_level&&photo_data.safety_level!==this.get("safety_level")&&this.set("safety_level",photo_data.safety_level),void 0!==photo_data.media&&photo_data.media!==this.get("media")&&this.set("media",photo_data.media),void 0!==photo_data.secret&&photo_data.secret!==this.get("secret")&&this.set("secret",photo_data.secret),void 0!==photo_data.is_bad&&photo_data.is_bad!==this.get("is_bad")&&this.set("is_bad",photo_data.is_bad),void 0!==photo_data.content_type&&photo_data.content_type!==this.get("content_type")&&this.set("content_type",photo_data.content_type),void 0!==photo_data.is_faved&&photo_data.is_faved!==this.get("is_fave")&&this.set("is_fave",photo_data.is_faved),void 0!==photo_data.is_fave&&photo_data.is_fave!==this.get("is_fave")&&this.set("is_fave",photo_data.is_fave),void 0!==photo_data.fave_count&&photo_data.fave_count!==this.get("fave_count")&&this.set("fave_count",photo_data.fave_count),void 0!==photo_data.count_faves&&photo_data.count_faves!==this.get("fave_count")&&this.set("fave_count",photo_data.count_faves),void 0!==photo_data.comment_count&&photo_data.comment_count!==this.get("comment_count")&&this.set("comment_count",photo_data.comment_count),void 0!==photo_data.count_comments&&photo_data.count_comments!==this.get("comment_count")&&this.set("comment_count",photo_data.count_comments),void 0!==photo_data.geo&&photo_data.geo!==this.get("geo")&&this.set("geo",photo_data.geo),void 0!==photo_data.exif_latlong&&photo_data.exif_latlong!==this.get("exif_latlong")&&this.set("exif_latlong",photo_data.exif_latlong),void 0!==photo_data.perm_viewgeo&&photo_data.perm_viewgeo!==this.get("perm_viewgeo")&&this.set("perm_viewgeo",photo_data.perm_viewgeo),void 0!==photo_data.woe&&photo_data.woe!==this.get("woe")&&this.set("woe",photo_data.woe),void 0!==photo_data.tags&&photo_data.tags!==this.get("tags")&&this.set("tags",photo_data.tags),void 0!==photo_data.group_count&&photo_data.group_count!==this.get("group_count")&&this.set("group_count",photo_data.group_count),void 0!==photo_data.people_count&&photo_data.people_count!==this.get("people_count")&&this.set("people_count",photo_data.people_count),void 0!==photo_data.guestpass_count&&photo_data.guestpass_count!==this.get("guestpass_count")&&this.set("guestpass_count",photo_data.guestpass_count),photo_data.sizes&&Y.Lang.isObject(photo_data.sizes)?sizes=photo_data.sizes:(sizes={},photo_data.url_sq&&(sizes.sq={url:photo_data.url_sq,width:parseInt(photo_data.width_sq,10),height:parseInt(photo_data.height_sq,10)}),photo_data.url_t&&(sizes.t={url:photo_data.url_t,width:parseInt(photo_data.width_t,10),height:parseInt(photo_data.height_t,10)}),photo_data.url_s&&(sizes.s={url:photo_data.url_s,width:parseInt(photo_data.width_s,10),height:parseInt(photo_data.height_s,10)}),photo_data.url_m&&(sizes.m={url:photo_data.url_m,width:parseInt(photo_data.width_m,10),height:parseInt(photo_data.height_m,10)}),photo_data.url_z&&(sizes.z={url:photo_data.url_z,width:parseInt(photo_data.width_z,10),height:parseInt(photo_data.height_z,10)}),photo_data.url_l&&(sizes.l={url:photo_data.url_l,width:parseInt(photo_data.width_l,10),height:parseInt(photo_data.height_l,10)}),photo_data.url_h&&(sizes.h={url:photo_data.url_h,width:parseInt(photo_data.width_h,10),height:parseInt(photo_data.height_h,10)}),photo_data.url_k&&(sizes.k={url:photo_data.url_k,width:parseInt(photo_data.width_k,10),height:parseInt(photo_data.height_k,10)}),photo_data.url_o&&(sizes.o={url:photo_data.url_o,width:parseInt(photo_data.width_o,10),height:parseInt(photo_data.height_o,10)}),"video"===photo_data.media&&photo_data.height_v&&(sizes.v={width:parseInt(photo_data.width_v,10),height:parseInt(photo_data.height_v,10)})),Y.Object.size(sizes)&&(old_sizes=this.get("sizes")||{},Y.Object.each(old_sizes,function(old_size,key){sizes[key]&&(sizes[key]=Y.merge(old_size,sizes[key]))}),this.set("sizes",Y.merge(old_sizes,sizes)))},toggle_fave:function(e){var adding,method,params,callback,that=this;if(this.get("can_fave")){if(Y.config.flickr.flags.enable_grease&&!Y.config.flickr.user.nsid)return Y.grease.addFave(this.get("id")),void Y.grease.authenticate();method="flickr.favorites."+((adding=!this.get("is_fave"))?"add":"remove"),params={photo_id:this.get("id")},callback={success:function(){var photo_id,faves_context_id,faves_context,faves_context_position;photo_id=that.get("id"),that.decrement("fave_changes_pending"),that.set("is_confirmed_fave",adding),0===that.get("fave_changes_pending")&&that.set("is_fave",adding),faves_context_id="faves-"+(Y.config.flickr.user.pathalias?Y.config.flickr.user.pathalias:Y.config.flickr.user.nsid),(faves_context=Y.ContextData.getContext(faves_context_id))&&(faves_context_position=faves_context.getPhotoPosition(photo_id)),adding?faves_context?Y.ContextData.getPrevLimit(faves_context_id)===faves_context_position?Y.ContextData.unremovePhoto(faves_context_id,faves_context_position):Y.ContextData.invalidate(faves_context_id):"photo"===Y.config.flickr.page_type&&that.get("id")===Y.photo.getCurrentPhoto().get("id")&&Y.ContextData.add({id:faves_context_id,user_id:Y.config.flickr.user.nsid,type:"faves",title:Y.transjax.get("photo","your_favorites"),url:Y.config.flickr.user.photos_url+"favorites/",photos:[{position:"0",photo:that}]}):faves_context&&Y.Lang.isNumber(faves_context_position)&&Y.ContextData.removePhoto(faves_context_id,faves_context_position)},failure:function(){that.decrement("fave_changes_pending"),0===that.get("fave_changes_pending")&&that.set("is_fave",that.get("is_confirmed_fave"))}},this.set("is_fave",adding),this.increment("fave_changes_pending"),Y.flickrAPI.callMethod(method,params,callback)}},record_interstitial_clickthrough:function(){var owner=this.get("owner");Y.Object.each(registry,function(photo,photo_id){photo.get("owner")===owner&&photo.set("needs_interstitial",!1)}),Y.flickrAPI.callMethod("flickr.people.recordInterstitialClickthrough",{user_id:owner},function(){})},updateWoeAttributeByeId:function(woe_id){var scope=this;Y.use("flickr-geo",function(Y){Y.flickrGeo.getWoeById(woe_id,function(r){r.success&&Y.Lang.isObject(r.woe)?scope.set("woe",r.woe):Y.log("Unable to update WOE. Expected data was not received from the API.","error","photo-data")},this)})},increment:function(name){return!!isInt(this.get(name))&&this.add(name,1)},decrement:function(name){return!!isInt(this.get(name))&&this.add(name,-1)},add:function(name,number){var newVal,prevVal=this.get(name);return!(!Y.Lang.isNumber(prevVal)||!Y.Lang.isNumber(number))&&(newVal=prevVal+number,!!this.set(name,newVal)&&newVal)}})},"0.0.1",{requires:F.config.modules["photo-data"].requires||[],optional:F.config.modules["photo-data"].optional||[]});function udm_(a){var j,m,n,o,p,b="comScore=",c=document,d=c.cookie,e="",f="indexOf",g="substring",h="length",i=2048,k="&ns_",q=window,r=q.encodeURIComponent||escape;if(d[f](b)+1)for(o=0,p=(n=d.split(";"))[h];o<p;o++)(m=n[o][f](b))+1&&(e="&"+unescape(n[o][g](m+b[h])));(a+=k+"_t="+ +new Date+k+"c="+(c.characterSet||c.defaultCharset||"")+e)[h]>i&&0<a[f]("&")&&(j=a[g](0,i-8).lastIndexOf("&"),a=(a[g](0,j)+k+"cut="+r(a[g](j+1)))[g](0,i)),c.images?(m=new Image,q.ns_p||(ns_p=m),m.src=a):c.write("<","p","><",'img src="',a,'" height="1" width="1" alt="*"',"><","/p",">")}"undefined"==typeof _comscore&&(_comscore=[]),function(){function k(b){for(var c=0,d=(b=b||_comscore)[a];c<d;c++)j(b[c]);b=_comscore=[]}var i,a="length",b=self,c=b.encodeURIComponent?encodeURIComponent:escape,j=(Math,function(b){if(b){var g,i,j,f=[],h=0,k="";for(var l in b)"string"!=(g=typeof b[l])&&"number"!=g||(f[f[a]]=l+"="+c(b[l]),"c2"==l?k=b[l]:"c1"==l&&(h=1));if(f[a]<=0||""==k)return;if((j=b.options||{}).d=j.d||document,"string"==typeof j.url_append){l=0;for(var n,m=(i=j.url_append.replace(/&amp;/,"&").split("&"))[a];l<m;l++)2==(n=i[l].split("="))[a]&&(f[f[a]]=n[0]+"="+c(n[1]))}udm_(["http","s"==j.d.URL.charAt(4)?"s://sb":"://b",".scorecardresearch.com","/p?",h?"":"c1=2&",f.join("&").replace(/&$/,"")].join(""))}});k(),(i=b.COMSCORE)?(i.purge=k,i.beacon=j):COMSCORE={purge:k,beacon:j}}();YUI.add("murmurhash",function(Y){Y.murmurhash=function(key,seed){var remainder,bytes,h1,h1b,c1,c2,k1,i;for(remainder=3&key.length,bytes=key.length-remainder,h1=seed,c1=3432918353,c2=461845907,i=0;i<bytes;)k1=255&key.charCodeAt(i)|(255&key.charCodeAt(++i))<<8|(255&key.charCodeAt(++i))<<16|(255&key.charCodeAt(++i))<<24,++i,h1=27492+(65535&(h1b=5*(65535&(h1=(h1^=k1=(65535&(k1=(k1=(65535&k1)*c1+(((k1>>>16)*c1&65535)<<16)&4294967295)<<15|k1>>>17))*c2+(((k1>>>16)*c2&65535)<<16)&4294967295)<<13|h1>>>19))+((5*(h1>>>16)&65535)<<16)&4294967295))+((58964+(h1b>>>16)&65535)<<16);switch(k1=0,remainder){case 3:k1^=(255&key.charCodeAt(i+2))<<16;case 2:k1^=(255&key.charCodeAt(i+1))<<8;case 1:h1^=k1=(65535&(k1=(k1=(65535&(k1^=255&key.charCodeAt(i)))*c1+(((k1>>>16)*c1&65535)<<16)&4294967295)<<15|k1>>>17))*c2+(((k1>>>16)*c2&65535)<<16)&4294967295}return h1^=key.length,h1=2246822507*(65535&(h1^=h1>>>16))+((2246822507*(h1>>>16)&65535)<<16)&4294967295,h1=3266489909*(65535&(h1^=h1>>>13))+((3266489909*(h1>>>16)&65535)<<16)&4294967295,(h1^=h1>>>16)>>>0}},"0.0.1",{});